<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Writing Strongly-Typed XML</title>
    <link rel="StyleSheet" href="css/xml.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>Gosu Reference Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="xml.21.01.html#1865697">Gosu and XML</a> : <a class="WebWorks_Breadcrumb_Link" href="xml.21.31.html#1865697">Legacy XML APIs: Structured XML Using XSDs</a> : Writing Strongly-Typed XML</span></div>
    <hr align="left" />
    <blockquote>
      <h4 class="H2B_-_Heading_2_Break"><a name="1865697">Writing Strongly-Typed XML</a></h4>
      <div class="B_-_Body"><a name="1865698">Constructing an XML tree is more complicated than working with XML that has already been constructed with a parse method call, but the basic idea is relatively simple. First, create a top-level object, then set its properties, attach subobjects, and so on until the object tree is complete. To convert the tree into an XML string, invoke the </a><span class="cv_-_computer_voice">asUTFString</span> method on the top-level node or get the <span class="cv_-_computer_voice">Bytes</span> property from the node.</div>
      <div class="B_-_Body"><a name="1865699">To create a node, first use the no-argument constructor for the associated class:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="1865700"> var simpleTest = new xsd.test.SimpleTest()</a></div>
      <div class="B_-_Body"><a name="1865701">To set node properties, use the strongly-typed properties or access attributes using the </a><span class="cv_-_computer_voice">Attributes</span> untyped map:</div>
      <div class="CS_-_Code_Single_Line"><a name="1865702">simpleTest.id = "RootNode" &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// strongly typed</a></div>
      <div class="CS_-_Code_Single_Line"><a name="1865703">simpleTest.Attributes["id"] = "RootNode" // untyped</a></div>
      <div class="B_-_Body"><a name="1865704">To add a single-element child property, simply set the property:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="1865705"> simpleTest.Test1 = new xsd.test.TestType()</a></div>
      <div class="B_-_Body"><a name="1865706">To modify a multiple-element child property, instead add to the list that is always present for that child:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="1865707"> simpleTest.Test2s.add(new xsd.test.Test2())</a></div>
      <div class="B_-_Body"><a name="1865708">You can also assign a new array to the value, but the preferred method is to simply add and remove from the pre-existing list. If you want the list of children to be emptied, call clear on the list rather than setting the list to </a><span class="cv_-_computer_voice">null</span>.</div>
      <div class="B_-_Body"><a name="1865709">Also, the properties are strongly-typed so they imply both the element names and the ordering of the elements relative to the other properties. Thus, you can create the children elements and attach them in any order, and the resulting XML orders them correctly as per the schema. They appear in output in the natural order in a list of elements and the order is as defined in XSD.</a></div>
      <div class="B_-_Body"><a name="1865710">Once the tree is complete, you can produce the resulting XML as a string by calling the </a><span class="cv_-_computer_voice">asUTFString()</span> method or get the <span class="cv_-_computer_voice">Bytes</span> property. For example:</div>
      <div class="CS_-_Code_Single_Line"><a name="1865711">var xmlBytes = root.Bytes</a></div>
      <div class="CS_-_Code_Single_Line"><a name="1865712">var xmlString = root.asUTFString()</a></div>
      <div class="B_-_Body"><a name="1865713">The following Gosu manipulates XML nodes using the test XSD from earlier in this topic:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1865714">var simpleTest = new xsd.test.SimpleTest()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865715">simpleTest.id = "Root"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865716">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865717">var test2 = new xsd.test.Test2()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865718">test2.id = "test"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865719">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865720">simpleTest.test2s.add(test2)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865721">simpleTest.test2s.add(new xsd.test.Test2())</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865722">simpleTest.test2s.get(1).final = true</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865723">simpleTest.test2s.get(1).Test1 = new xsd.test.TestType()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865724">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865725">var test1 = new xsd.test.TestType()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865726">test1.color = Red &nbsp;// Gosu can infer what enum class is appropriate!</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865727">test1.number = 5</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865728">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865729">simpleTest.test4s.add(new xsd.test.TestType())</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865730">simpleTest.test3 = Blue &nbsp;// Since this is a simple child element, you access its value directly.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865731">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1865732">print(simpleTest.asUTFString())</a></PRE>
      <div class="B_-_Body"><a name="1865733">The final print statement produces this XML tree:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865734"> &lt;SimpleTest id="Root"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865735">   &lt;Test1 color="Red" number="5"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865736">   &lt;Test2 id="test"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865737">   &lt;Test2 final="true"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865738">     &lt;Test1/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865739">   &lt;/Test2&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865740">   &lt;Test3&gt;Blue&lt;/Test3&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865741">   &lt;Test4/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865742"> &lt;/SimpleTest&gt;</a></PRE>
      <div class="B_-_Body"><a name="1865743">Remember that element names are only guaranteed to be assigned at the time the element writes out to XML. Because some types correspond to multiple element names, Gosu sometimes cannot determine the element name until after a node is assigned to a parent. At that point, the structure of the XSD defines which element the node represents.</a></div>
      <div class="B_-_Body"><a name="1865745">For more details of XML export and issues related to Unicode and Guidewire messaging, see </a><a href="javascript:WWHClickedPopup('gosu', 'xml.21.29.html#1865411', '');" title="Legacy XML APIs: Exporting XML Data">“Legacy XML APIs: Exporting XML Data”</a>.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>