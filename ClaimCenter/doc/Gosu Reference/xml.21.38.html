<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>XML Node IDs</title>
    <link rel="StyleSheet" href="css/xml.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>Gosu Reference Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="xml.21.01.html#1866228">Gosu and XML</a> : <a class="WebWorks_Breadcrumb_Link" href="xml.21.31.html#1866228">Legacy XML APIs: Structured XML Using XSDs</a> : XML Node IDs</span></div>
    <hr align="left" />
    <blockquote>
      <h4 class="H2B_-_Heading_2_Break"><a name="1866228">XML Node IDs</a></h4>
      <div class="B_-_Body"><a name="1866229">Gosu supports node IDs and node ID references in XSDs and converts them into Gosu types. Node IDs are text values that uniquely identify an element. Some XSDs use node ID references to link to another element in the XML. In the XSD specification, node ID references (links to a node ID) do not reference the type of object, so Gosu cannot automatically guess the type. However, Gosu provides an intuitive way to dereference a node ID reference using the </a><span class="cv_-_computer_voice">as</span> keyword.</div>
      <div class="B_-_Body"><a name="1866230">Gosu converts the following XSD types as follows:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1866231">A schema element or attribute of type </a><span class="cv_-_computer_voice">xsd:IDREF</span> becomes a property of type <span class="cv_-_computer_voice">IXMLNodeWithID</span>. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1866232">Any element with an attribute of type </a><span class="cv_-_computer_voice">xsd:ID</span> automatically implements the interface <span class="cv_-_computer_voice">IXMLNodeWithID</span>. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1866233">At run time, you can populate the </a><span class="cv_-_computer_voice">IDREF</span> property with a link to an element with an ID (element with an attribute of type <span class="cv_-_computer_voice">xsd:ID)</span>. To do this, simply assign an object that implements <span class="cv_-_computer_voice">IXMLNodeWithID</span> to an <span class="cv_-_computer_voice">IDREF</span> property. The IDREF property links to the property by its ID. There is no danger of infinite recursion. </div>
      <div class="B_-_Body"><a name="1866234">If you do not set an ID explicitly, Gosu automatically assigns an ID. If a parsed XML document has automatically-assigned node IDs and you reserialize the XML, the result retains the original ID values unless there are ID conflicts within the document. </a></div>
      <div class="B_-_Body"><a name="1866235">You can get the XML node that represent a node ID references directly from Gosu like any other node from Gosu. With this object, you can use the usual node actions </a><span class="cv_-_computer_voice">IXMLNode</span> actions documented earlier in this topic. However, typically you want a Gosu reference to the linked-to object so you can get its properties or subobjects. To do this, cast the ID reference node to the appropriate <span class="cv_-_computer_voice">XMLNode</span> type. In other words, cast the IDREF to the Gosu type representation of the linked-to object. The cast operation uses the ID reference value and the destination type to find and return the desired element with that ID. If the XML graph does not contain an element of the desired type with that node ID, Gosu throws an exception.</div>
      <div class="B_-_Body"><a name="1866240">For example, suppose you want to import the following XSD, called </a><span class="cv_-_computer_voice">mytest.xsd</span>. Create a file by this name within your configuration module hierarchy in the package hierarchy <span class="cv_-_computer_voice">test</span>:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866241">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866242">&lt;xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866243">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866244">&nbsp;&nbsp;&lt;xsd:element name="root"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866245">&nbsp;&nbsp;&nbsp;&nbsp;&lt;xsd:complexType&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866246">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xsd:sequence&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866247">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xsd:element ref="category" maxOccurs="unbounded" minOccurs="0"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866252">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>&lt;xsd:element name="item" maxOccurs="unbounded" minOccurs="0"&gt; </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866253">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xsd:complexType&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866254">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xsd:attribute name="itemName" type="xsd:string"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span class="s_-_strong"><a name="1866255">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xsd:attribute name="categoryRef" type="xsd:IDREF"/&gt;</a></span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866256">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/xsd:complexType&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866257">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/xsd:element&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866258">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/xsd:sequence&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866259">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/xsd:complexType&gt;   </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866260">&nbsp;&nbsp;&lt;/xsd:element&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866261">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866262">&nbsp;&nbsp;&lt;xsd:element name="category"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866263">&nbsp;&nbsp;&nbsp;&nbsp;&lt;xsd:complexType&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span class="s_-_strong"><a name="1866264">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xsd:attribute name="categoryId" type="xsd:ID"/&gt;</a></span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866265">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xsd:attribute name="categoryName" type="xsd:string"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866266">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/xsd:complexType&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866267">&nbsp;&nbsp;&lt;/xsd:element&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866268">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866269">&lt;/xsd:schema&gt;</a></PRE>
      <div class="B_-_Body"><a name="1866270">Notice the two lines in boldface. The item element contains an </a><span class="cv_-_computer_voice">IDREF</span> called <span class="cv_-_computer_voice">categoryRef</span>. For the sake of this example, this will link to a <span class="cv_-_computer_voice">category</span> element within the XML. However, note that the definition of the <span class="cv_-_computer_voice">categoryRef</span> attribute does not specify the type of the linked-to object:</div>
      <div class="CS_-_Code_Single_Line"><a name="1866271">&lt;xsd:attribute name="categoryRef" type="xsd:IDREF"/&gt;</a></div>
      <div class="B_-_Body"><a name="1866272">Next, create an XML file that uses that XSD. The following example has two category elements and one item element. The item links to one of the category objects using its </a><span class="cv_-_computer_voice">categoryRef</span> attribute (the IDREF). That IDREF corresponds to the <span class="cv_-_computer_voice">categoryID</span> property on a category. Save the following file to the path <span style="font-family: &quot;Lucida Sans Typewriter&quot;; font-size: 7.0pt">/my_xml_files/mytest.xml</span>.</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866277">&lt;root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866278">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xsi:noNamespaceSchemaLocation="mytest.xsd"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866279">&nbsp;&nbsp;&lt;category categoryId="FOO1" categoryName="category #1"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866280">&nbsp;&nbsp;&lt;category categoryId="FOO2" categoryName="category #2"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866281">&nbsp;&nbsp;&lt;item categoryRef="FOO1" itemName="item #1"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866282">&lt;/root&gt;</a></PRE>
      <div class="B_-_Body"><a name="1866283">You can then create Gosu code that parses your XML against this XSD. For example, you can use the following code in the Gosu Scratchpad:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866284">uses java.io.File</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866285">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866286">// Load the XML.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866287">var f = new File( "/my_xml_files/mytest.xml")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866288">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866289">// Parse the XML.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866290">var xml = test.mytest.root.parse( f , true )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866291">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866292">// Get a property from the item node directly (does not use the IDREF.)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866293">print( xml.items[0].itemName)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866294">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866295">// Get the item node IDREF and cast it to the category objects.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866296">var category = xml.items[0].categoryRef as gw.mytest.category</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866297">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866298">// Now you have a Gosu reference to the element, so you can get properties from it.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1866299">print( category.categoryName )</a></PRE>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>