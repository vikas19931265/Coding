<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Using Comparison Predicates with Character Fields</title>
    <link rel="StyleSheet" href="css/querybuilder.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>Gosu Reference Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="querybuilder.10.01.html#2238185">Query Builder APIs</a> : <a class="WebWorks_Breadcrumb_Link" href="querybuilder.10.12.html#2238185">Restricting Queries with Predicates on Fields</a> : Using Comparison Predicates with Character Fields</span></div>
    <hr align="left" />
    <blockquote>
      <h4 class="H2B_-_Heading_2_Break"><a name="2238185">Using Comparison Predicates with Character Fields</a></h4>
      <div class="B_-_Body"><a name="3263840">With SQL, you can apply comparison predicates to character fields by using Gosu character literals as comparison values. In SQL, you apply predicates to column values in the </a><span class="cv_-_computer_voice">WHERE</span> clause. For example, the following SQL statement applies the predicate <span class="cv_-_computer_voice">=&nbsp;"Acme Rentals"</span> to values in the <span class="cv_-_computer_voice">name</span> column of the <span class="cv_-_computer_voice">companies</span> table to select the company “Acme Rentals.”</div>
      <PRE class="CF_-_Code_First_Line"><a name="3284609">SELECT * from companies</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3284610">&nbsp;&nbsp;&nbsp;&nbsp;WHERE </a><span class="s_-_strong">name = "Acme Rentals"</span>;</PRE>
      <div class="B_-_Body"><a name="3284148">With the query builder APIs, you apply predicates to entity fields by using functions on the query object. The following Gosu sample code applies the function </a><span class="cv_-_computer_voice">compare</span> to values in the Name field of <span class="cv_-_computer_voice">Company</span> entity instances to select the company “Acme Rentals.” </div>
      <PRE class="CF_-_Code_First_Line"><a name="3284914">uses gw.api.database.Query </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3284915">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3284916">// Query the Company instances for a specific company. </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3285461">var query = Query.make(Company)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3284917">query.</a><span class="s_-_strong">compare("Name", Equals, "Acme Rentals")</span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3285458">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3285587">// Fetch the data print it.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3285573">var result = query.select()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3285429">for (company in result) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3285430">  print (company.Name)</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3284910">}</a></PRE>
      <div class="B_-_Body"><a name="3285622">With comparison predicates applied to character fields, the values in the field must match exactly the comparison value, including the case of the comparison value. For example, the preceding query builder code selects only “Acme Rentals,” not “ACME Rentals.”</a></div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="3284858">ClaimCenter converts character literals that you specify in query builder predicates to bind variables in the generated SQL statement that ClaimCenter sends to the relational database. </a></div>
      <h6 class="HS_-_Head_Sub"><a name="3263812">See also</a></h6>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('gosu', 'querybuilder.10.18.html#2511893', '');" title="Comparing Column Values with Literal Values" name="3284135">“Comparing Column Values with Literal Values”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('gosu', 'querybuilder.10.19.html#3243528', '');" title="Comparing Typekey Column Values with Typekey Literals" name="3284128">“Comparing Typekey Column Values with Typekey Literals”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="3263814">Case-Insensitive Comparisons with Character Fields</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2238198">A problem often occurs when you compare character values. You might not know which case the character values that you want to select use. For example, you want to select the company named “Acme Rentals.” There is one instance only of the </a><span class="cv_-_computer_voice">Company</span> entity type with that name. However, you do not know whether the company is in the database as “Acme Rentals,” “ACME RENTALS,” or even “acme rentals.”</div>
      <div class="B_-_Body"><a name="2238199">SQL Select statements let you specify case-insensitive comparisons with functions that convert values in columns to upper or lower case before making comparisons. The following example SQL statement converts values in the </a><span class="cv_-_computer_voice">name</span> column to lower case before applying the predicate <span class="cv_-_computer_voice">= "acme rentals"</span>. </div>
      <PRE class="CF_-_Code_First_Line"><a name="2238200">SELECT * from companies</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2238201">&nbsp;&nbsp;&nbsp;&nbsp;WHERE</a><span class="s_-_strong"> LCASE(name) = “acme rentals”</span>;</PRE>
      <div class="B_-_Body"><a name="2238202">The query builder APIs provide the </a><span class="cv_-_computer_voice">compareEqualsIgnoreCase</span> method for case-insensitive comparisons, as the following Gosu sample code shows.</div>
      <PRE class="CF_-_Code_First_Line"><a name="2238203">uses gw.api.database.Query </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2238204">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2238205">var query = Query.make(Company)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2238206">query.</a><span class="s_-_strong">compareIgnoreCase("Name", Equals, "Acme Rentals")</span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3286121">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3286106">// Fetch the data print it.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3286107">var result = query.select()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3286108">for (company in result) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3286109">  print (company.Name)</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3286110">}</a></PRE>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2238208">Your data model definition must specify the column with the attribute </a><span class="cv_-_computer_voice">supportsLinguisticSearch</span> set to <span class="cv_-_computer_voice">true</span>. Otherwise, query performance suffers if you include the column in a <span class="cv_-_computer_voice">compareIgnoreCase</span> predicate method. </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2238221">Partial Comparison Predicates with Character Fields</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2238222">Sometimes you want to make partial comparisons that match the beginning or portions in the middle of character fields, instead of matching completely the entire field. SQL </a><span class="cv_-_computer_voice">SELECT</span> statements support the following wildcard characters for use with the <span class="cv_-_computer_voice">LIKE</span> operator: </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="ri_-_run_in_header"><a name="2238223">% (percent sign)</a></span> – represents zero, one, or more characters </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="ri_-_run_in_header"><a name="2238224">_ (underscore)</a></span> – represents exactly one character </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2238225">The query builder APIs offer the following methods to simulate the SQL </a><span class="cv_-_computer_voice">LIKE</span> operator:</div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="cv_-_computer_voice"><a name="2238226">startsWith</a></span> – accepts a string of characters to match at the beginning of a character field</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><span class="cv_-_computer_voice"><a name="2238227">contains</a></span> – accepts a string of characters to match any portion of a character field</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2238236">Case-insensitive Partial Comparisons</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2238237">Sometimes you want to make partial comparisons in a case-insensitive way. SQL </a><span class="cv_-_computer_voice">SELECT</span> statements let you specify case-insensitive comparisons with functions that convert the values in columns to upper or lower case before making the comparison. The following SQL statement converts the values in <span class="cv_-_computer_voice">AddressLine1</span> to lower case before comparing them to <span class="cv_-_computer_voice">main st</span>. </div>
      <PRE class="CF_-_Code_First_Line"><a name="2238239">SELECT * from companies a, addresses b</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2238240">&nbsp;&nbsp;&nbsp;&nbsp;WHERE a.primary_address = b.ID </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2238241">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND </a><span class="s_-_strong">LCASE(b.AddressLine1)</span> LIKE "<span class="s_-_strong">%main st%</span>";</PRE>
      <div class="B_-_Body"><a name="2238242">In comparison with the preceding SQL example, the following Gosu sample code constructs and executes a functionally equivalent query.</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2238243">uses gw.api.database.Query</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2238244">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2238245">// -- start a new query with Company as the primary entity --</a></span></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2238246">var queryCompany = Query.make(Company)</a></span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2238247">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2238248">// -- join Address as the secondary entity to the pimary entity Company --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2238249">var tableAddress = queryCompany.join("PrimaryAddress")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2238250">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2238251">// -- add a predicate on the secondary entity --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2238252">tableAddress.</a><span class="s_-_strong">contains</span>("<span class="s_-_strong">AddressLine1</span>", "<span class="s_-_strong">Market St</span>", true) // -- Equivalent to SQL LIKE.</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2238253">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// &nbsp;&nbsp;&nbsp;The true value means "case-insenstive --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2238254">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2238255">// -- fetch the data with a for loop --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2238256">var result = queryCompany.select()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2238257">for (company in result) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2238258">    print (company + ", " + company.PrimaryAddress.AddressLine1)</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2238259">}</a></PRE>
      <div class="B_-_Body"><a name="2858897">If you choose case insensitivity, Gosu generates an SQL </a><span class="cv_-_computer_voice">LOWER</span> function to implement the comparison predicate. However, if the data model definition of the column sets the <span class="cv_-_computer_voice">supportsLinguisticSearch</span> attribute to <span class="cv_-_computer_voice">true</span>, Gosu uses the denormalized version of the column instead. </div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>