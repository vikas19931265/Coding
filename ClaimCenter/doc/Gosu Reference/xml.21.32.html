<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Importing Strongly-Typed XML</title>
    <link rel="StyleSheet" href="css/xml.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>Gosu Reference Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="xml.21.01.html#1865652">Gosu and XML</a> : <a class="WebWorks_Breadcrumb_Link" href="xml.21.31.html#1865652">Legacy XML APIs: Structured XML Using XSDs</a> : Importing Strongly-Typed XML</span></div>
    <hr align="left" />
    <blockquote>
      <h4 class="H2B_-_Heading_2_Break"><a name="1865652">Importing Strongly-Typed XML</a></h4>
      <div class="B_-_Body"><a name="1865653">Parsing (importing) incoming XML documents is fairly simple. To parse XML into the Gosu in-memory graph that represents the XML, call the </a><span class="cv_-_computer_voice">parse</span> method on the root node class that mirrors the incoming document root node. For example:</div>
      <div class="CS_-_Code_Single_Line"><a name="1865654">var node = xsd.test.SimpleTest.parse(myXMLstring)</a></div>
      <div class="B_-_Body"><a name="1865655">Once you have a reference to the root node, use the strongly-typed getter methods to access child elements. For example, use the various property accessors instead, assisted by the Studio code completion features. To get the color of the </a><span class="cv_-_computer_voice">Test1</span> node under the root node, use straightforward strongly-typed code such as:</div>
      <div class="CS_-_Code_Single_Line"><a name="1865656"> var color = node.Test1.color</a></div>
      <div class="B_-_Body"><a name="1865657">However, since the strongly typed nodes implement the </a><span class="cv_-_computer_voice">IXMLNode</span> interface, you can use the untyped <span class="cv_-_computer_voice">Children</span> and <span class="cv_-_computer_voice">Attributes</span> properties. Using these untyped properties treat the tree essentially as a untyped DOM-like tree. For related discussion, see <a href="javascript:WWHClickedPopup('gosu', 'xml.21.27.html#1865263', '');" title="Legacy XML APIs: Manipulating XML as Untyped Nodes">“Legacy XML APIs: Manipulating XML as Untyped Nodes”</a>. </div>
      <div class="B_-_Body"><a name="1865661">For example, get an attribute with code with code similar to the following:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1865662">// untyped access of the number attribute</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1865663">x.Attributes["number"]</a></PRE>
      <div class="B_-_Body"><a name="1865666">Similarly, you can use the enhancements discussed in </a><a href="javascript:WWHClickedPopup('gosu', 'xml.21.30.html#1865484', '');" title="Legacy XML APIs: Collection-like Enhancements for XML">“Legacy XML APIs: Collection-like Enhancements for XML”</a>.</div>
      <div class="B_-_Body"><a name="1865668">If you use the untyped node features, including the collection enhancements, you can continue to use the strongly typed node access by coercing nodes to the appropriate node class. For example, suppose you want to find the </a><span class="cv_-_computer_voice">Test4</span> child element that has <span class="cv_-_computer_voice">number</span> attribute set to 5 and work with that node as strongly typed. You can use code such as:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1865669">// Use untyped "Attributes" and "Children" properties to find the nodes you want.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865670">var n1 = node.findFirst(\x -&gt; x.ElementName == "Test4" &amp;&amp; x.Attributes["number"] == "5")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865671">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865672">// Coerce to specific node class imported from XSD. </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865673">var n2 = n1 as xsd.test.TestType</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865674">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865675">// (In practice, do the coercion "... as TYPENAME" on the same line as the previous line.)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865676">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865677">// Access node subelements and attributes as STRONGLY-typed values...</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1865678">var color = n2.Test1.color</a></PRE>
      <div class="B_-_Body"><a name="1865679">You can combine these features in other ways, for example:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1865680">To create a list of the names of elements that are children of the root node:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="1865681"> var elementNames = node.Children.map(\x -&gt; x.ElementName)</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1865682">To compile a list of all the ids of the </a><span class="cv_-_computer_voice">Test2</span> nodes:</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="1865683"> var ids = node.Test2s.map(\x -&gt; x.id)</a></div>
      <div class="B_-_Body"><a name="1865684">If you use an XSD for strongly-typed data access, you can use both the strongly-typed operations and untyped node access, freely intermixing the two types of operations.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="1865685">Optional Validation During Import</a></h6>
      <div class="B_-_Body"><a name="1865686">As you import XML, you can validate the XML against the XSD fully using an optional Boolean argument to the </a><span class="cv_-_computer_voice">parse</span> method when you parse the XML. If you pass <span class="cv_-_computer_voice">true</span>, Gosu validates the XML against the XSD and throws an exception if it fails.</div>
      <div class="B_-_Body"><a name="1865687">For example:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865688">uses gw.xml.XMLNode</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865689">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865690">// Somehow get a reference to some XML to import. In this example, we use a trivial XSD</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865691">// that has no limitations, and just generate XML bytes from it.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865692">var UTF_XML = new xsd.test.Root().asUTFString()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865693">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865694">// Parse it, and pass an optional boolean to the parse() method. It indicates whether to </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865695">// validate the incoming XML against the XSD. Throws an exception if there are errors.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865696">var newNode = new xsd.test.Root().parse(UTF_XML, true)</a></PRE>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>