<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Making a Query with an Inner Join</title>
    <link rel="StyleSheet" href="css/querybuilder.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>Gosu Reference Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="querybuilder.10.01.html#2237704">Query Builder APIs</a> : <a class="WebWorks_Breadcrumb_Link" href="querybuilder.10.04.html#2237704">Joining Related Entities to Queries</a> : Making a Query with an Inner Join</span></div>
    <hr align="left" />
    <blockquote>
      <h4 class="H2B_-_Heading_2_Break"><a name="2237704">Making a Query with an Inner Join</a></h4>
      <div class="B_-_Body"><a name="2237705">With an inner join, items from the primary table or entity on the left are joined to items from the table or entity on the right, based on matching values. If a primary item on the left has no matching value on the right, that primary item is not included in the result. A foreign key from one side to the other is the basis of matching.</a></div>
      <div class="B_-_Body"><a name="2237707">In SQL, it generally does not matter which side of the join the foreign key is on. It generally does not matter whether the foreign key is defined in metadata. It does not matter if the column or property names are the same. All that matters is for one side of the join to have a column or property with values that match values in the column of another table or property. </a></div>
      <div class="B_-_Body"><a name="2751868">With the query builder APIs, it matters which side of a join the foreign key is on. The side that has the foreign key determines which </a><span class="cv_-_computer_voice">join</span> method signature to use. </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2751869">join("</a></span><span class="ps_-_parameter_in_code_snippets">column</span><span class="cv_-_computer_voice">")</span> – Joins two entities when the foreign key is on left </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="2237713">See </a><a href="javascript:WWHClickedPopup('gosu', 'querybuilder.10.08.html#2237720', '');" title="Making a Query with an Inner Join">“Making Inner Joins with the Foreign Key on the Left”</a>.</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2237714">join(</a></span><span class="ps_-_parameter_in_code_snippets">table</span><span class="cv_-_computer_voice">, "</span><span class="ps_-_parameter_in_code_snippets">column</span><span class="cv_-_computer_voice">")</span> – Joins two entities when the foreign key is on the right. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="2237718">See </a><a href="javascript:WWHClickedPopup('gosu', 'querybuilder.10.08.html#2237813', '');" title="Making a Query with an Inner Join">“Making Inner Joins with the Foreign Key on the Right”</a>.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2237720">Making Inner Joins with the Foreign Key on the Left</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2237721">In SQL, you make an inner join with the </a><span class="cv_-_computer_voice">JOIN</span> keyword. You specify the table that you want to join to the primary table of the query. The <span class="cv_-_computer_voice">ON</span> keyword lets you specify which columns join the tables. In the following SQL statement, the foreign key, <span class="cv_-_computer_voice">primary_address</span>, is on the primary table, <span class="cv_-_computer_voice">companies</span>. So, the foreign key is on the left side. </div>
      <PRE class="CF_-_Code_First_Line"><a name="2237722">SELECT * FROM companies</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237723">&nbsp;&nbsp;&nbsp;&nbsp;</a><span class="s_-_strong">JOIN</span> addresses </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237724">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a><span class="s_-_strong">ON</span> companies.primary_address = addresses.ID;</PRE>
      <div class="B_-_Body"><a name="2237725">With the query builder APIs, use the </a><span class="cv_-_computer_voice">join</span> method with a single parameter if the primary entity has the foreign key. In these cases, the foreign key is on the left. You specify a property of the primary entity that the <span class="Emphasis" style="font-style: italic">Data Dictionary</span> defines as a foreign key to the secondary entity. The query builder APIs use metadata to determine the entity type to which the foreign key relates. </div>
      <h6 class="HS_-_Head_Sub"><a name="2237726">Joining the Secondary Entity to a Query with the Foreign Key on the Left</a></h6>
      <div class="B_-_Body"><a name="2237727">In the following Gosu sample code, the primary entity type, </a><span class="cv_-_computer_voice">Company</span>, has a foreign key, <span class="cv_-_computer_voice">PrimaryAddress</span>, which relates to the secondary entity type, <span class="cv_-_computer_voice">Address</span>. </div>
      <PRE class="CF_-_Code_First_Line"><a name="2237728">var queryCompany = Query.make(</a><span class="s_-_strong">Company</span>) </PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2237729">queryCompany.</a><span class="s_-_strong">join</span>("PrimaryAddress")</PRE>
      <div class="B_-_Body"><a name="2237730">Notice that unlike SQL, you do not specify which secondary entity to join, in this case </a><span class="cv_-_computer_voice">Address</span>. Neither do you specify the property on the secondary entity, <span class="cv_-_computer_voice">ID</span>. The query builder APIs use metadata from the <span class="Emphasis" style="font-style: italic">Data Dictionary</span><span class="Emphasis" style="font-style: normal"> to fill in the missing information. </span></div>
      <h6 class="HS_-_Head_Sub"><a name="2237731">Applying Predicates to the Secondary Entity </a></h6>
      <div class="B_-_Body"><a name="2237732">With the query builder APIs, generally you join a secondary entity to a query only so you can restrict the results with predicates on the secondary entity. Unlike SQL, the result of a query contains entity instances, not table rows with columns. You can access any information related to the primary entity in the result with dot notation, regardless of including the related entity type in the query itself.</a></div>
      <div class="B_-_Body"><a name="2237733">The following Gosu sample codes shows how to use dot notation to access information related to the primary entity of a query. The code accesses related </a><span class="cv_-_computer_voice">City</span> information from the <span class="cv_-_computer_voice">Address</span> entity with dot notation on <span class="cv_-_computer_voice">Company</span> instances retrieved from the result. </div>
      <PRE class="CF_-_Code_First_Line"><a name="2237734">uses gw.api.database.Query</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237735">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237736">// -- query the Company entity --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237737">var query = Query.make(</a><span class="s_-_strong">Company</span>) </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237738">var </a><span class="s_-_strong">result</span> = query.select()</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237739">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237740">// -- fetch the Company instances with a for loop and print them --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237741">for (</a><span class="s_-_strong">company</span> in <span class="s_-_strong">result</span>) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237742">&nbsp;&nbsp;&nbsp;&nbsp;print (company.Name + ", " + company.PrimaryAddress.</a><span class="s_-_strong">City</span>)</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2237743">}</a></PRE>
      <div class="B_-_Body"><a name="2237744">However, you seldom want to retrieve all instances of the primary type of a query. To select a subset, you often join a secondary entity and apply predicates to one or more of its properties. To apply predicates to the secondary entity in a join, you can save the </a><span class="cv_-_computer_voice">table</span> object that the <span class="cv_-_computer_voice">join</span> method returns in a local variable. Then, you can use predicate methods on the <span class="cv_-_computer_voice">table</span> object, such as <span class="cv_-_computer_voice">compare</span>, to restrict which secondary instances to include in the result. That also restricts which primary entities instances the result returns. </div>
      <div class="B_-_Body"><a name="2237745">For example, you want to select only companies in the city of Chicago. So, you must join the </a><span class="cv_-_computer_voice">Address</span> entity to your <span class="cv_-_computer_voice">Company</span> query and apply the predicate <span class="cv_-_computer_voice">= "Chicago"</span> to it. </div>
      <PRE class="CF_-_Code_First_Line"><a name="2237746">uses gw.api.database.Query</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237747">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237748">// -- query the Company entity --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237749">var queryCompany = Query.make(</a><span class="s_-_strong">Company</span>)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237750">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237751">// -- select only Company instances in the city of Chicago --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237752">var tableAddress = queryCompany.</a><span class="s_-_strong">join</span>("PrimaryAddress")</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237753">tableAddress.</a><span class="s_-_strong">compare</span>("City", Equals, "Chicago") </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237754">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237755">// -- fetch the Company instances with a for loop and print them --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237756">var </a><span class="s_-_strong">result</span> = queryCompany.select()</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237757">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237758">for (</a><span class="s_-_strong">company</span> in <span class="s_-_strong">result</span>) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237759">&nbsp;&nbsp;&nbsp;&nbsp;print (company.Name + ", " + company.PrimaryAddress.</a><span class="s_-_strong">City</span>)</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2237760">}</a></PRE>
      <div class="B_-_Body"><a name="2237761">Note that the query result contains only </a><span class="cv_-_computer_voice">Company</span> instances. Even though the code above included the <span class="cv_-_computer_voice">Address</span> entity in the query, information from joined entities generally is not included in results. The code above uses dot notation to access information from related <span class="cv_-_computer_voice">Address</span> instances after retrieving <span class="cv_-_computer_voice">Company</span> instances from the result. By joining <span class="cv_-_computer_voice">Address</span> to the query and applying the predicate, the code ensures that <span class="cv_-_computer_voice">Company</span> instances in the result have only “Chicago” in the property <span class="cv_-_computer_voice">company.PrimaryAddress.City</span>. </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2237813">Making Inner Joins with the Foreign Key on the Right</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2237815">In SQL, you make an inner join with the </a><span class="cv_-_computer_voice">JOIN</span> keyword. You specify the table that you want to join to the primary table of the query. The <span class="cv_-_computer_voice">ON</span> keyword lets you specify which columns join the tables. In the following SQL statement, the foreign key, <span class="cv_-_computer_voice">update-user</span>, is on the secondary table, <span class="cv_-_computer_voice">addresses</span>. So, the foreign key is on the right side. The query returns a result with all addresses and users who lasted updated them. </div>
      <PRE class="CF_-_Code_First_Line"><a name="2237816">SELECT * FROM users</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237817">&nbsp;&nbsp;&nbsp;&nbsp;</a><span class="s_-_strong">JOIN</span> addresses</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237818">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a><span class="s_-_strong">ON</span> users.ID = addresses.update_users;</PRE>
      <div class="B_-_Body"><a name="2237819">With the query builder APIs, use the </a><span class="cv_-_computer_voice">join</span> method with two parameters if the secondary entity has the foreign key. In these cases, the foreign key is on the right. You specify the name of the secondary entity, followed the property that is a foreign key to the primary entity. </div>
      <h6 class="HS_-_Head_Sub"><a name="2237820">Joining the Secondary Entity to a Query with the Foreign Key on the Right</a></h6>
      <div class="B_-_Body"><a name="2237821">In the following Gosu sample code, the secondary entity type, </a><span class="cv_-_computer_voice">Address</span>, has a foreign key, <span class="cv_-_computer_voice">UpdateUser</span>, which relates to the primary entity type, <span class="cv_-_computer_voice">User</span>. </div>
      <PRE class="CF_-_Code_First_Line"><a name="2237822">var query = Query.make(</a><span class="s_-_strong">User</span>) </PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2237823">query.</a><span class="s_-_strong">join</span>(<span class="s_-_strong">Address</span>, "<span class="s_-_strong">UpdateUser</span>")</PRE>
      <div class="B_-_Body"><a name="2237824">Notice that just like SQL, you must specify which secondary entity to join, in this case </a><span class="cv_-_computer_voice">Address</span>. However unlike SQL, you do not specify the property on the primary entity, <span class="cv_-_computer_voice">ID</span>. The query builder APIs use metadata from the <span class="Emphasis" style="font-style: italic">Data Dictionary</span><span class="Emphasis" style="font-style: normal"> to fill in the missing information. </span></div>
      <div class="B_-_Body"><a name="2268374">When the foreign key is on the right, the data model definition of the column must specify a kind of link: a </a><span class="cv_-_computer_voice">foreignkey</span>, a <span class="cv_-_computer_voice">onetoone</span>, or an <span class="cv_-_computer_voice">edgeForeignKey</span>.</div>
      <h6 class="HS_-_Head_Sub"><a name="2237826">Applying Predicates to the Secondary Entity </a></h6>
      <div class="B_-_Body"><a name="2237827">With the query builder APIs, generally you join a secondary entity to a query only so you can restrict the results with predicates on the secondary entity. Unlike SQL, the result of a query contains entity instances, not table rows with columns. You can access any information related to the primary entity in the result with dot notation, regardless of including the related entity type in the query itself.</a></div>
      <div class="B_-_Body"><a name="2237828">However, you seldom want to retrieve all instances of the primary type of a query. To select a subset, you often join a secondary entity and apply predicates to one or more of its properties. To apply predicates to the secondary entity in a join, you can save the </a><span class="cv_-_computer_voice">table</span> object that the <span class="cv_-_computer_voice">join</span> method returns in a local variable. Then, you can use predicate methods on the <span class="cv_-_computer_voice">table</span> object, such as <span class="cv_-_computer_voice">compare</span>, to restrict which secondary instances to include in the result. That also restricts which primary entities instances the result returns. </div>
      <div class="B_-_Body"><a name="2237829">For example, you want to select only users who have updated addresses in the city of Chicago. So, you must join the </a><span class="cv_-_computer_voice">Address</span> entity to your <span class="cv_-_computer_voice">User</span> query, Then, you can and apply the predicate <span class="cv_-_computer_voice">= "Chicago"</span> to <span class="cv_-_computer_voice">Address</span>, the secondary entity. </div>
      <PRE class="CF_-_Code_First_Line"><a name="2237830">uses gw.api.database.Query</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237831">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237832">// -- query the User entity --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237833">var </a><span class="s_-_strong">queryUser</span> = Query.make(<span class="s_-_strong">User</span>)</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237834">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237835">// -- select only User instances who last updated addresses in the city of Chicago --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237836">var </a><span class="s_-_strong">tableAddress</span> = queryUser.<span class="s_-_strong">join</span>(<span class="s_-_strong">Address</span>, "UpdateUser")</PRE>
      <PRE class="CM_-_Code_Middle_Line"><span class="s_-_strong"><a name="2237837">tableAddress.compare</a></span>("City", Equals, "Chicago") </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237838">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237839">// -- fetch the User instances with a for loop and print them --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237840">var </a><span class="s_-_strong">result</span> = <span class="s_-_strong">queryUser</span>.select()</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237841">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237842">for (</a><span class="s_-_strong">user</span> in <span class="s_-_strong">result</span>) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237843">&nbsp;&nbsp;&nbsp;&nbsp;print (</a><span class="s_-_strong">user</span>.DisplayName)</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2237844">}</a></PRE>
      <h6 class="HS_-_Head_Sub"><a name="2237845">Accessing Properties of the Secondary Entity </a></h6>
      <div class="B_-_Body"><a name="2237846">Note that the query result contains only </a><span class="cv_-_computer_voice">User </span>instances. Even though the code above included the <span class="cv_-_computer_voice">Address</span> entity in the query, information from joined entities generally is not included in results. This can be a problem with inner joins when the foreign key is on the right. It means that you cannot traverse from primary instances on the left to related instances on the right with dot notation. </div>
      <div class="B_-_Body"><a name="2237847">In the preceding Gosu example query, you cannot determine which addresses specific users in the result last updated. In some cases this is not a problem. Often, you use the results of inner queries with foreign keys on the right for further processing without accessing </a><span class="Emphasis" style="font-style: italic">any</span> information from the related instances that led to the result. If you <span class="Emphasis" style="font-style: italic">do</span> want to access the information, for example to display on a screen or in a report, see <a href="javascript:WWHClickedPopup('gosu', 'querybuilder.10.22.html#2239119', '');" title="Working with Row Queries">“Working with Row Queries”</a>. </div>
      <h6 class="HS_-_Head_Sub"><a name="2237851">Avoiding Duplicate Instances</a></h6>
      <div class="B_-_Body"><a name="2237852">Note that the query results probably contain main duplicate instances of the same user. When the foreign key is on the right side of a join, the foreign key value for any specific primary instance is likely to recur. This problem occurs with SQL and the query builder APIs alike. </a></div>
      <div class="B_-_Body"><a name="2237853">Consider the preceding query, which selected those users who have updated addresses from the city of Chicago. The same user is likely to have updated several Chicago addresses. Therefore, the result contains that user once for every Chicago address updated. The following Gosu example code shows how to the </a><span class="cv_-_computer_voice">withDistinct</span> method on the query. </div>
      <PRE class="CF_-_Code_First_Line"><a name="2237854">uses gw.api.database.Query</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237855">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237856">// -- query the User entity --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237857">var queryUser = Query.make(User)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237858">queryUser.</a><span class="s_-_strong">withDistinct(true)</span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237859">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237860">// -- select only User instances who last updated addresses in the city of Chicago --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237861">var tableAddress = queryUser.join(Address, "UpdateUser")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237862">tableAddress.compare("City", Equals, "Chicago") </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237863">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237864">// -- fetch the User instances with a for loop and print them --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237865">var result = queryUser.select()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237866">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237867">for (user in result) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237868">    print (user.DisplayName)</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2237869">}</a></PRE>
      <div class="B_-_Body"><a name="2731203">For more information, see </a><a href="javascript:WWHClickedPopup('gosu', 'querybuilder.10.11.html#2238055', '');" title="Handling Duplicates in Joins with Foreign Keys on the Right">“Handling Duplicates in Joins with Foreign Keys on the Right”</a>.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>