<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Stateful WS-I Session Affinity Using Cookies</title>
    <link rel="StyleSheet" href="css/webservices-wsi-publish.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-webservices.html#3768585">Web Services</a> : <a class="WebWorks_Breadcrumb_Link" href="webservices-wsi-publish.07.01.html#3768585">Publishing Web Services (WS-I)</a> : Stateful WS-I Session Affinity Using Cookies</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="3768585">Stateful WS-I Session Affinity Using Cookies</a></h3>
      <div class="B_-_Body"><a name="3768605">By default, WS-I web services do not ask the application server to generate and return session cookies. However, ClaimCenter supports cookie-based load-balancing options for web services. This is sometimes referred to as </a><span class="e_-_emphasis">session&nbsp;affinity</span>. </div>
      <div class="B_-_Body"><a name="3767368">The WS-I web services layer can generate a cookie for a series of API calls. You can configure load balancing routers to send consecutive SOAP calls in the same conversation to the same server in the cluster. This feature simplifies things like customer portal integration. Repeated page requests by the same user (assuming they successfully reused the same cookie) go to the same node in the cluster.</a></div>
      <div class="B_-_Body"><a name="3768643">By using session affinity, you can improve performance by ensuring that caches for that node in the cluster tend to already contain recently used objects and any session-specific data.</a></div>
      <div class="B_-_Body"><a name="3767257">To create cookies for the session, append the text </a><span class="cv_-_computer_voice">"?stateful"</span> (with no quotes) to the WS-I API URL.</div>
      <div class="B_-_Body"><a name="3767259">From Gosu client code, you can use code similar to following to append text to the URL:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="3767261">uses gw.xml.ws.WsdlConfig</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3767262">uses java.net.URI</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3767263">uses wsi.remote.gw.webservice.ab.ab800.abcontactapi.ABContactAPI</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3767264">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3767265">// get a reference to an API object</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3767266">var api = new ABContactAPI()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3767267">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3767268">// get URL and override URL to force creation of local cookies to save session for load balancing</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3767269">api.Config.ServerOverrideUrl = new URI(ABContactAPI.ADDRESS + "?stateful")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3767270">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3767271">// call whatever API method you need as you normally would...</a></PRE>
      <PRE class="CF_-_Code_First_Line"><a name="3767272">api.getReplacementAddress("12345")</a></PRE>
      <div class="B_-_Body"><a name="3767274">The code might look very different depending on your choice of web service client programming language and SOAP library.</a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>