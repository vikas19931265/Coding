<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Data Extraction Using Web Services</title>
    <link rel="StyleSheet" href="css/dataextraction.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-claims.html#2160658">Other Integration Topics</a> : <a class="WebWorks_Breadcrumb_Link" href="dataextraction.43.1.html#2160658">Data Extraction Integration</a> : Data Extraction Using Web Services</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="2160658">Data Extraction Using Web Services</a></h3>
      <div class="B_-_Body"><a name="2205432">You can write your own web services that use Gosu templates to generate results. For more information about writing Gosu templates, see </a><a href="javascript:WWHClickedPopup('gosu', 'templates.23.1.html#1453662', '');" title="Gosu Templates">“Gosu Templates” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('gosu', 'templates.23.1.html#1453662', '');" title="Gosu Templates">Gosu Reference Guide</a></span>. </div>
      <div class="B_-_Body"><a name="2205337">The following diagram illustrates the data extraction process for a web service API that uses Gosu templates..</a></div>
      <div class="F_-_Figure"><a name="2187645"><img class="Default" src="images/dataextraction.43.3.1.png" style="display: inline; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="B_-_Body"><a name="2188479">Every data extraction request includes a parameter indicating which Gosu template to use to format the response. You can add an unlimited number of templates to provide different responses for different types of root objects. For example, given </a>a claim as a root object for a template, you could design different templates to export claim data such as:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2160674">A list of all notes on the claim</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2160678">A list of all open activities on the claim</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2160682">A summarized view of </a>a claim</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2166458">To provide programmatic access to ClaimCenter data, ClaimCenter uses Gosu, the basis of Guidewire Studio business rules. Gosu templates allow you to embed Gosu code that generates dynamic text from evaluating the code. Wrap your code with </a><span class="cv_-_computer_voice">&lt;%</span> and <span class="cv_-_computer_voice">%&gt;</span> characters for Gosu blocks and <span class="cv_-_computer_voice">&lt;%=</span> and <span class="cv_-_computer_voice">%&gt;</span> for Gosu expressions. </div>
      <div class="B_-_Body"><a name="2166467">Once you know the root object, refer to properties on the root object or related objects just as you do as you write rules in Studio. </a></div>
      <div class="B_-_Body"><a name="2162003">Before writing a template, decide which data you want to pass to the template. </a></div>
      <div class="B_-_Body"><a name="2197228">For example, from a claim you could refer to many properties, including:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2197230">claim.LossDate			</a></span> – Loss date</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2197233">claim.LossType.Code</a></span> – Code for a typelist value</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2197236">claim.LossType.Name</a></span> – Text description of the typelist value</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2197239">claim.Policy.PolicyNumber</a></span> – Policy number (different from its public ID)</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2197240">The simplest Gosu expressions only extract data object properties, such as </a><span class="cv_-_computer_voice">claim.ClaimNumber</span>. For instance, suppose you want to export the claim number. You might use the following template, which despite its short length is a valid Gosu template in its entirety:	</div>
      <div class="CS_-_Code_Single_Line"><a name="2197241">The number is &lt;%= claim.claimNumber %&gt;.</a></div>
      <div class="B_-_Body"><a name="2167253">At run time, Gosu runs the code in the template block “</a><span class="cv_-_computer_voice">&lt;%= ... %&gt;</span>” and evaluates it dynamically:</div>
      <div class="CS_-_Code_Single_Line"><a name="2166543">The number is HO-1234556789.</a></div>
      <h4 class="H2_-_Heading_2"><a name="2167307">Error Handling in Templates</a></h4>
      <div class="B_-_Body"><a name="2166544">By default, if Gosu cannot evaluate an expression because of an error or </a><span class="cv_-_computer_voice">null</span> value, it generates a detailed error page. It is best to check for blank or <span class="cv_-_computer_voice">null</span> values as necessary from Gosu so that you do not accidentally generate errors during template evaluation.</div>
      <h4 class="H2_-_Heading_2"><a name="2167320">Getting Parameters from URLs</a></h4>
      <div class="B_-_Body"><a name="2166546">If you want to get the value of URL parameters other than the root objects and/or check to see if they have a value use the syntax </a><span class="cv_-_computer_voice">parameters.get("paramnamehere")</span>. For instance, to check for the <span class="cv_-_computer_voice">xyz</span> parameter and export it:</div>
      <div class="CS_-_Code_Single_Line"><a name="2166547">&lt;%= (parameters.get("xyz") == null)?"NO VALUE!":parameters.get("xyz") %&gt;</a></div>
      <h4 class="H2_-_Heading_2"><a name="2167332">Built in Templates</a></h4>
      <div class="B_-_Body"><a name="2166551">There are example Gosu templates included with ClaimCenter. Refer to the files within the ClaimCenter deployment directory:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="2166690">ClaimCenter/modules/configuration/config/templates/dataextraction/*.gst</a></div>
      <h4 class="H2_-_Heading_2"><a name="2197258">Using Loops in Templates</a></h4>
      <div class="B_-_Body"><a name="2197259">Gosu templates can include loops that iterate over multiple objects such as every exposure or contact person associated with a claim. For example, suppose you want to display all claims associated with a policy. The corresponding template code with the root object </a><span class="cv_-_computer_voice">claims</span> might look something like this:</div>
      <PRE class="CF_-_Code_First_Line"><a name="2197262">&lt;% for (var thisClaim in claims) { %&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2197263">  Claim number: &lt;%= thisClaim.ClaimNumber %&gt; </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2197264">&lt;% } %&gt;	</a></PRE>
      <div class="B_-_Body"><a name="2197265">This template might generate something like:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2197266">  Claim number: HO-123456:C0001 </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2197267">  Claim number: HO-123456:C0002 </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2197268">  Claim number: HO-123456:C0003 </a></PRE>
      <h4 class="H2_-_Heading_2"><a name="2161995">Structured Export Formats</a></h4>
      <div class="B_-_Body"><a name="2161996">HTML and XML are text-based formats, so there is no fundamental difference between designing a template for HTML or XML export compared to other plain text files. The only difference is that the text file must conform to HTML and XML specifications.</a></div>
      <div class="B_-_Body"><a name="2161997">HTML results must be a well-formed HTML, ensuring that all properties contain no characters that might invalidate the HTML specification, such as unescaped “</a><span class="cv_-_computer_voice">&lt;</span>” or “<span class="cv_-_computer_voice">&amp;</span>” characters. This is particularly relevant for especially user-entered text such as descriptions and notes.</div>
      <div class="B_-_Body"><a name="2160809">Systems that process XML often are very strict about syntax and well-formedness. Be careful not to generate text that might invalidate the XML or confuse the recipient. For instance, beware of unescaped “</a><span class="cv_-_computer_voice">&lt;</span>” or “<span class="cv_-_computer_voice">&amp;</span>” characters in a notes field. If possible, you could export data within an XML <span class="cv_-_computer_voice">&lt;CDATA&gt;</span> tag, which allows more types of characters and character strings without problems of unescaped characters.</div>
      <h4 class="H2_-_Heading_2"><a name="2160816">Handling Data Model Extensions in Gosu</a></h4>
      <div class="B_-_Body"><a name="2162404">If you added data model extensions, such as new properties within the </a><span class="cv_-_computer_voice">Claim</span> object, they are available work within Gosu templates just as in business rules within Guidewire Studio. For instance, just use expressions like <span class="cv_-_computer_voice">myClaim.myCustomField</span>.</div>
      <h4 class="H2_-_Heading_2"><a name="2161713">Gosu Template APIs Common for Integration</a></h4>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2161715">Gosu Libraries </a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2161720">You can access Gosu libraries from within templates similar to how you would access them from within Guidewire Studio, using the </a><span class="cv_-_computer_voice">Libraries</span> object:</div>
      <div class="CS_-_Code_Single_Line"><a name="2160839">&lt;%= Libraries.Financials.getTotalIncurredForExposure(exposure) %&gt;</a></div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2160840">Java Classes Called From Gosu</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2160843">Just like any other Gosu code, your Gosu code in your template use Java classes.</a></div>
      <div class="CS_-_Code_Single_Line"><a name="2160847">var myWidget = new mycompany.utils.Widget();</a></div>
      <h6 class="HS_-_Head_Sub"><a name="2160853">See also</a></h6>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2191369">For information about calling Java from Gosu, see </a><a href="javascript:WWHClickedPopup('gosu', 'java-gosu.09.1.html#2133774', '');" title="Calling Java from Gosu">“Calling Java from Gosu” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('gosu', 'java-gosu.09.1.html#2133774', '');" title="Calling Java from Gosu">Gosu Reference Guide</a></span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2160854">Logging</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2160862">You can send messages to the ClaimCenter log file using the ClaimCenter logger object. Access the logger from Gosu using the following code:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="2160865">libraries.Logger.logInfo("Your message here…")</a></div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2160866">Typecode Alias Conversion</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2160871">As you write integration code in Gosu templates, you may also want to use ClaimCenter typelist mapping tools. ClaimCenter provides access to these tools by using the </a><span class="cv_-_computer_voice">$typecode</span> object:</div>
      <div class="CS_-_Code_Single_Line"><a name="2197286">typecode.getAliasByInternalCode("LossType", "ns1", claim.LossType)</a></div>
      <div class="B_-_Body"><a name="2160879">This </a><span class="cv_-_computer_voice">$typecode</span> API works only within Gosu templates, not Gosu in general. </div>
      <div class="B_-_Body"><a name="2160880">In addition, you can use the </a><span class="cv_-_computer_voice">TypecodeMapperUtil</span> Gosu utility class. </div>
      <h6 class="HS_-_Head_Sub"><a name="2191460">See also</a></h6>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2205114">For more information on the Gosu utility class, see </a><a href="javascript:WWHClickedPopup('integration', 'webservices-general.11.2.html#3399393', '');" title="Mapping Typecodes to External System Codes">“Using Gosu or Java to Translate Typecodes”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1948656">&nbsp;</a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>