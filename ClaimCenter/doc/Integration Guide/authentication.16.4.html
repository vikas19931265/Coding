<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>User Authentication Service Plugin</title>
    <link rel="StyleSheet" href="css/authentication.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-plugins.html#1454315">Plugins</a> : <a class="WebWorks_Breadcrumb_Link" href="authentication.16.1.html#1454315">Authentication Integration</a> : User Authentication Service Plugin</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="1454315">User Authentication Service Plugin</a></h3>
      <div class="B_-_Body"><a name="1454316">An authentication service plugin (</a><span class="cv_-_computer_voice">AuthenticationServicePlugin</span>) implementation defines an external service that could authenticate a user. Typically, this would involve sending authentication credentials encapsulated in an <span class="e_-_emphasis">authentication source</span> and sending them to some separate centralized server on the network such as an LDAP server. This plugin is in the <span class="cv_-_computer_voice">gw.plugin.security</span> package namespace.</div>
      <div class="B_-_Body"><a name="2057888">There are several mechanisms to log in to ClaimCenter:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2057889">Log in by using the web application user interface. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2057890">Log in to the server through Guidewire Studio.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2057891">Authenticate RPCE web service calls to the current server.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2057892">Authenticate WS-I web service calls to the current server.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2057893">Any </a><span class="cv_-_computer_voice">AuthenticationServicePlugin</span> implementation must handle all types of logins other than WS-I web services. For authenticating WS-I web services, see the separate plugin interface in <a href="javascript:WWHClickedPopup('integration', 'webservices-wsi-publish.07.07.html#3699369', '');" title="Adding Advanced Security Layers to a WS-I Web Service">“WS-I Web Services Authentication Plugin”</a>.</div>
      <div class="B_-_Body"><a name="1855847">For Guidewire Studio users and SOAP API calls, the credentials passed to this plugin are the standard </a><span class="cv_-_computer_voice">UserNamePasswordAuthenticationSource,</span> which contains a basic username and password. In addition, if you design a custom authentication source with data extracted from a web application login request, this plugin must be able to handle those credentials too. </div>
      <div class="B_-_Body"><a name="1856048">There are three parts of implementing this plugin, each of which is handled by a plugin interface method:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1856049">Initialization – </a></span>All authentication plugins must initialize itself in the plugin’s <span class="cv_-_computer_voice">init</span> method.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1856050">Setting callbacks –</a></span> A plugin can look up and modify user information as part of the authentication process using the plugin’s <span class="cv_-_computer_voice">setCallback</span> method. This method provides the plugin with a call back handler (<span class="cv_-_computer_voice">CallbackHandler</span>) in this method. Your plugin must save the callback handler reference in a class variable to use it later to make any changes during authentication.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1832957">Authentication – </a></span>Authentication decisions from a username and password are performed in the <span class="cv_-_computer_voice">authenticate</span> method. The logic in this method can be almost anything you want, but typically would consult a central authentication database. The basic example included with the product uses the <span class="cv_-_computer_voice">CallbackHandler</span> to check for the user within ClaimCenter. The JAAS example calls a JAAS provider to check credentials. Then, it looks up the user’s public ID in ClaimCenter by username using the <span class="cv_-_computer_voice">CallbackHandler</span> to determine which user authenticated.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1537549">Every </a><span class="cv_-_computer_voice">AuthenticationServicePlugin</span> must support the default <span class="cv_-_computer_voice">UserNamePasswordAuthenticationSource</span> because this source is used by Guidewire Studio and RPCE web service API clients if connecting to the ClaimCenter server. A custom implementation must also support any other Authentication Sources that may be created by your custom <span class="e_-_emphasis">authentication source creator plugin</span>, if any.</div>
      <div class="B_-_Body"><a name="1454348">Almost every authentication service plugin uses the </a><span class="cv_-_computer_voice">CallbackHandler</span> provided to it, if only to look up the public ID of the user after verifying credentials. Find the Javadoc for this interface in the class <span class="cv_-_computer_voice">AuthenticationServicePluginCallbackHandler</span>. This utility class includes four utility methods:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1856001">findUser</a></span> – Lets your code look up a user’s public ID based on login user name</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1954151">verifyInternalCredential</a></span> – Supports testing a username and password against the values stored in the main user database. This method is used by the default authentication service.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1954153">modifyUser</a></span> – After getting current user data and making changes, perhaps based on contact information stored externally, this method allows the plugin to update the user’s information in ClaimCenter.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1855966">For more details of the method signatures, refer to the Java API Reference Javadoc for </a><span class="cv_-_computer_voice">AuthenticationServicePlugin</span>.</div>
      <h6 class="HS_-_Head_Sub"><a name="2075093">Synchronizing User Roles</a></h6>
      <div class="B_-_Body"><a name="2037522">There is a </a><span class="cv_-_computer_voice">config.xml</span> configuration parameter <span class="cv_-_computer_voice">ShouldSynchUserRolesInLDAP</span>. If its value is <span class="cv_-_computer_voice">true</span>, the application synchronizes contacts with the roles they belong to after authenticating with the external authentication source.</div>
      <h6 class="HS_-_Head_Sub"><a name="2037502">Authentication Service Sample Code</a></h6>
      <div class="B_-_Body"><a name="1991357">The product includes the following example authentication services in the directory </a><span class="cv_-_computer_voice">ClaimCenter/java-api/examples/plugins/authenticationservice</span>. </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1991378">Default ClaimCenter authentication example</a></span><span class="s_-_strong" style="color: #000000; font-family: &quot;Times New Roman&quot;; font-size: 10.0pt; font-style: normal"> – </span>This is the basic default service for ClaimCenter provided as source code. It checks the username and password against information stored in the ClaimCenter database and authenticates the user if a match is found.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1991371">LDAP authentication example</a></span><span class="s_-_strong" style="color: #000000; font-family: &quot;Times New Roman&quot;; font-size: 10.0pt; font-style: normal"> – </span><span class="cv_-_computer_voice">LDAPAuthenticationServicePlugin</span> is an example of authenticating against an LDAP directory.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="1991373">JAAS authentication example</a></span><span class="s_-_strong" style="color: #000000; font-family: &quot;Times New Roman&quot;; font-size: 10.0pt; font-style: normal"> – </span><span class="cv_-_computer_voice">JAASAuthenticationServicePlugin</span> is an example of how you could write a plugin to authenticate against an external repository using JAAS. JAAS is an API that enables Java code to access authentication services without being tied to those services.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1856060">In the JAAS example, the plugin makes a </a><span class="cv_-_computer_voice">context.login()</span> call to the configured JAAS provider. The provider in turn calls back to the <span class="cv_-_computer_voice">JAASCallbackHandler</span> to request credential information needed to make a decision. The plugin provides this callback handler to the JAAS provider. This is a JAAS object, different from the callback handler provided by ClaimCenter to the plugin as a ClaimCenter API. If the user cannot authenticate to JAAS, then the JAAS provider throws an exception. Otherwise, login continues.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2075139">Error Handling in Authentication Service Plugins</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2075198">Your code must be very careful to catch and categorize different types of errors that can happen during authentication. This is important for preserving this information for logging and diagnostic purposes. Additionally, ClaimCenter provides built-in features to clarify for the user what went wrong.</a></div>
      <div class="B_-_Body"><a name="2088925">In general, the login user interface displays a default general message for failure to authenticate and ignores the text in the actual exception. However, </a><span class="cv_-_computer_voice">DisplayableLoginException</span> allows you to throw a more specific message to show to the user from your authentication service plugin code.</div>
      <div class="B_-_Body"><a name="2075638">The following table lists exception classes that you can throw from your code for various authentication problems. In general, ClaimCenterclasses in the </a><span class="cv_-_computer_voice">com.guidewire</span> hierarchy are internal and not for customer use. However, the classes in the <span class="cv_-_computer_voice">com.guidewire.pl.plugin</span> hierarchy listed below are supported for customer use. </div>
      <div class="T_-_Table"><a name="2086640">&nbsp;</a></div>
      <table class="withHeading" style="text-align: left" border="0" cellpadding="10" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2086612">Exception name</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2086614">Description</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2086616">javax.security.auth.login.FailedLoginException</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2086618">Throw this standard Java exception if the user entered an incorrect password.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2087434">com.guidewire.pl.plugin.security.InactiveUserException</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2087436">This user is inactive.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2086620">com.guidewire.pl.plugin.security.LockedCredentialException</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2086622">Credential information is inaccessible because it is locked for some reason. For example, if a system is configured to permanently lock a user out after too many attempts. Also see related exception </a><span class="cvt_-_computer_voice_table">MustWaitToRetryException</span>.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2086628">com.guidewire.pl.plugin.security.MustWaitToRetryException</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2086630">The user tried too many times to authenticate and now has to wait for a while before trying again. The user must wait and retry at a later time. This is a temporary condition. Also see related exception </a><span class="cvt_-_computer_voice_table">LockedCredentialException</span>.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2086632">com.guidewire.pl.plugin.security.AuthenticationException</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2086634">Other authentication issues not otherwise specified by other more specific authentication exceptions. </a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2086636">com.guidewire.pl.plugin.security.DisplayableLoginException</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2086638">This is the only authentication exception for which the login user interface uses the text of the actual exception to present to the user. For example, throw the exception as follows:</a></div>
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2086639">throw new DisplayableLoginException("The application shows this custom message to the user")</a></span></div>
          </td>
        </tr>
      </table>
      <div class="B_-_Body"><a name="2087507">You can make subclasses of the following exception classes:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2088214">If </a><span class="cv_-_computer_voice">DisplayableLoginException</span> does not meet your needs, you can subclass the Java base class <span class="cv_-_computer_voice">javax.security.auth.login.LoginException</span>. To ensure the correct text displays for that class:</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LS2A_-_List_Start_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LS2A_-_List_Start_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">a.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS2A_-_List_Start_002c_Level_2_Alpha_inner"><a name="2088667">Create a subclass of </a><span class="cv_-_computer_voice">gw.api.util.LoginForm</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI2A_-_List_Item_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">b.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner"><a name="2088802">In your </a><span class="cv_-_computer_voice">LoginForm</span> subclass, override the <span class="cv_-_computer_voice">getSpecialLoginExceptionMessage(LoginException)</span> method. ClaimCenter only calls this method for exception types that are not built-in. Your version of the method must return the <span class="cv_-_computer_voice">String</span> to display to the user for that exception type. Note that the only supported method of <span class="cv_-_computer_voice">LoginForm</span> for you to override is <span class="cv_-_computer_voice">getSpecialLoginExceptionMessage</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI2A_-_List_Item_002c_Level_2_Alpha_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">c.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI2A_-_List_Item_002c_Level_2_Alpha_inner"><a name="2088694">Modify the </a><span class="cv_-_computer_voice">Login.pcf</span> page, which controls the user interface for that form. That PCF page instantiates <span class="cv_-_computer_voice">gw.api.util.LoginForm</span>. Change the PCF page to instantiate your <span class="cv_-_computer_voice">LoginForm</span> subclass instead of the default <span class="cv_-_computer_voice">LoginForm</span> class.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2088215">You can also subclass the exception </a><span class="cv_-_computer_voice">guidewire.pl.plugin.security.DisplayableLoginException</span> if necessary for tracking unique types of authentication errors with custom messages.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2086853">SOAP API Limitations</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1839142">You must not use ClaimCenter RPCE web service (SOAP) APIs from within authentication plugins. Doing so would require authentication. </a></div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1856130">SOAP API User Permissions and Special-Casing Users</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1856134">Guidewire recommends creating separate a ClaimCenter user (or users) for SOAP API access. This user or set of users must have the minimum permissions allowable to perform SOAP API calls. Guidewire strongly recommends this user have few permissions or no permissions in the web application user interface.</a></div>
      <div class="B_-_Body"><a name="1856135">From an authentication service plugin perspective, for those users you could create an exception list in your authentication plugin to implement ClaimCenter internal authentication for only those users. For other users, use LDAP or some other authentication service.</a></div>
      <h4 class="H2_-_Heading_2"><a name="1454359">Example Authentication Service Authentication</a></h4>
      <div class="B_-_Body"><a name="1454363">The following sample shows how to verify a user name and password against the ClaimCenter database and then modify the user’s information as part of the login process. </a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1454364">public String authenticate(AuthenticationSource source) throws LoginException</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454365">{</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454366">if (source instanceof UserNamePasswordAuthenticationSource == false) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454367">    throw new IllegalArgumentException("Authentication source type " + </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454368">   source.getClass().getName() + " is not known to this plugin");</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454369">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454370">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454371"> Assert.check(_handler != null ? null : "Callback handler not set");</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454372">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454373"> UserNamePasswordAuthenticationSource uNameSource = (UserNamePasswordAuthenticationSource) source;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454374">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454375"> Hashtable env = new Hashtable();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454376">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454377"> env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454378"> env.put(Context.PROVIDER_URL, "LDAP://" + _serverName + ":" + _serverPort);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454379"> env.put(Context.SECURITY_AUTHENTICATION, "simple");</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454380"> String userName = uNameSource.getUsername();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454381"> if (StringUtils.isNotBlank(_domainName)) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454382">   userName = _domainName + "\\" + userName;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454383"> }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454384">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454385"> env.put(Context.SECURITY_PRINCIPAL, userName);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454386"> env.put(Context.SECURITY_CREDENTIALS, uNameSource.getPassword());</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454387">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454388"> try {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454389">   // Try to login.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454390">   new InitialDirContext(env);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454391">&nbsp;&nbsp;&nbsp;// Here would could get the result to the earlier and </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1471674">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modify the user in some way if you needed to</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454392">&nbsp;&nbsp;&nbsp;} catch (NamingException e) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454393">     throw new LoginException(e.getMessage());</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454394">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454395">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454396"> String username = uNameSource.getUsername();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454397"> String userPublicId = _handler.findUser(username);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454398"> if (userPublicId == null) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454399">   throw new FailedLoginException("Bad user name " + username);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454400">}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1454401">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1454402">return userPublicId;</a></PRE>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>