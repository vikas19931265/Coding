<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Adding a New Claim-specific Entity to Policy Refresh</title>
    <link rel="StyleSheet" href="css/cc-pc-integration.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-policycontacts.html#2722570">Policy and Contact Integrations</a> : <a class="WebWorks_Breadcrumb_Link" href="cc-pc-integration.38.01.html#2722570">Claim and Policy Integration</a> : <a class="WebWorks_Breadcrumb_Link" href="cc-pc-integration.38.16.html#2722570">Policy Refresh Configuration Examples</a> : Adding a New Claim-specific Entity to Policy Refresh</span></div>
    <hr align="left" />
    <blockquote>
      <h4 class="H2B_-_Heading_2_Break"><a name="2722570">Adding a New Claim-specific Entity to Policy Refresh</a></h4>
      <div class="B_-_Body"><a name="2722571">Suppose you add a new entity type, </a><span class="cv_-_computer_voice">ClaimEntity_Ext</span>, that is claim-specific and not part of the policy graph. In <span class="cv_-_computer_voice">ClaimEntity_Ext</span> you include a foreign key to <span class="cv_-_computer_voice">Claim</span>. In turn, you extend <span class="cv_-_computer_voice">Claim</span> with a one-to-one element to provide a symmetrical link back to <span class="cv_-_computer_voice">ClaimEntity_Ext</span>. </div>
      <div class="B_-_Body"><a name="2722572">To assure </a><span class="cv_-_computer_voice">ClaimEntity_Ext</span> is part of the claim graph, do not modify the policy refresh plugin to include it in the set of entity types that comprise the policy graph. Thus, ClaimCenter knows that your new <span class="cv_-_computer_voice">ClaimEntity_Ext</span> entity is part of the claim graph.</div>
      <div class="B_-_Body"><a name="2722576">Now, suppose your new </a><span class="cv_-_computer_voice">ClaimEntity_Ext</span> has an array property that contains <span class="cv_-_computer_voice">Vehicle</span> instances. The <span class="cv_-_computer_voice">Vehicle</span> entity is a built-in type that belongs to the policy graph. For array properties, database-level foreign keys must reside on the child objects (<span class="cv_-_computer_voice">Vehicle</span>) to relate the children to their parent objects (<span class="cv_-_computer_voice">ClaimEntity_Ext</span>). So, you extend <span class="cv_-_computer_voice">Vehicle</span> with a foreign key to <span class="cv_-_computer_voice">ClaimEntity_Ext</span>. </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2722577">Example of Extending the Metadata Definitions for a New Claim-specific Entity Type</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2722578">You define your new entity </a><span class="cv_-_computer_voice">ClaimEntity_Ext</span> in this metadata definition file:</div>
      <div class="CS_-_Code_Single_Line" style="font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="cv_-_computer_voice"><a name="2722579">ClaimCenter/config/extensions/ClaimEntity_Ext.eti</a></span></div>
      <div class="B_-_Body"><a name="2722580">The contents of the file might look like the following example. </a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2722581">&lt;?xml version="1.0"?&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2722582">&lt;entity </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2722583">&nbsp;&nbsp;&nbsp;&nbsp;xmlns="http://guidewire.com/datamodel" </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2722584">&nbsp;&nbsp;&nbsp;&nbsp;</a><span class="s_-_strong">entity</span>="<span class="s_-_strong">ClaimEntity_Ext</span>" </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2722585">&nbsp;&nbsp;&nbsp;&nbsp;table="claimentity"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2722586">&nbsp;&nbsp;&nbsp;&nbsp;type="retireable"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2722587">&nbsp;&nbsp;&lt;implementsEntity name="Extractable"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2722588">&nbsp;&nbsp;&lt;</a><span class="s_-_strong">foreignkey</span> name="<span class="s_-_strong">Claim</span>" fkentity="<span class="s_-_strong">Claim</span>"/&gt;</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2722589">&nbsp;&nbsp;&lt;</a><span class="s_-_strong">array</span> name="<span class="s_-_strong">Vehicles</span>" arrayentity="<span class="s_-_strong">Vehicle</span>"/&gt;</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2722590">&lt;/entity&gt;</a></PRE>
      <div class="B_-_Body"><a name="2722591">In </a><span class="cv_-_computer_voice">ClaimCenter/config/extensions/Vehicle.etx</span>, extend the <span class="cv_-_computer_voice">Claim</span> entity with a one-to-one element. </div>
      <div class="CS_-_Code_Single_Line"><a name="2722592">&lt;</a><span class="s_-_strong">onetoone</span> fkentity="<span class="s_-_strong">ClaimEntity_Ext</span>" name="<span class="s_-_strong">ClaimEntity_Ext</span>" nullok="true"/&gt;</div>
      <div class="B_-_Body"><a name="2722593">In </a><span class="cv_-_computer_voice">ClaimCenter/config/extensions/Vehicle.etx</span>, extend the <span class="cv_-_computer_voice">Vehicle</span> entity with a foreign key.</div>
      <div class="CS_-_Code_Single_Line"><a name="2722594">&lt;</a><span class="s_-_strong">foreignkey</span> name="<span class="s_-_strong">ClaimEntity_Ext</span>" fkentity="<span class="s_-_strong">ClaimEntity_Ext</span>"/&gt;</div>
      <div class="B_-_Body"><a name="2722595">The changes described in this example are common types of data model changes. Because your new entity belongs to the claim graph and not the policy graph, the policy refresh system places no additional demands on the configuration.</a></div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2722596">How Policy Refresh Automatically Updates Objects in the Claim and Policy Graphs</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2722597">When policy refresh happens, </a><span class="cv_-_computer_voice">ClaimEntity_Ext</span> entity instances remain unchanged within the claim graph. For links to <span class="cv_-_computer_voice">ClaimEntity_Ext</span> instances from refreshed <span class="cv_-_computer_voice">Vehicle</span> instances, the policy refresh system relinks them automatically. The directionality of the foreign key runs from a policy object to a claim object. Directionality of foreign keys is an important distinction when reviewing the default relinking behavior of the policy refresh system.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>