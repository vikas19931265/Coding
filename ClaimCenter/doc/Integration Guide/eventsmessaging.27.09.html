<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Reporting Acknowledgements and Errors</title>
    <link rel="StyleSheet" href="css/eventsmessaging.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-messaging.html#4016335">Messaging</a> : <a class="WebWorks_Breadcrumb_Link" href="eventsmessaging.27.01.html#4016335">Messaging and Events</a> : Reporting Acknowledgements and Errors</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="4016335">Reporting Acknowledgements and Errors</a></h3>
      <div class="B_-_Body"><a name="4016759">ClaimCenter expects to receive acknowledgements back from the destination. In most cases, the destination submits a </a><span class="e_-_emphasis">positive acknowledgement</span> to indicate success. However, errors can also occur, and you must tell ClaimCenter about the issue.</div>
      <h4 class="H2_-_Heading_2"><a name="4263294">Message Sending Error Behaviors</a></h4>
      <div class="B_-_Body"><a name="4263295">Sometimes something goes wrong while sending a message. Errors can happen at two different times. Errors can occur during the </a><span class="e_-_emphasis">send</span> attempt as ClaimCenter calls the message sync transport plugin’s <span class="cv_-_computer_voice">send</span> method with the message. For asynchronous replies, errors can also occur in negative acknowledgements.</div>
      <div class="B_-_Body"><a name="4263301">Error conditions during the destination </a><span class="cv_-_computer_voice">send</span> process:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="4263302">Exceptions during send() causes automatic retries </a></span>– Sometimes a message transport plugin has a send error and expects it to be temporary. To support this common use case, if the message transport plugin throws an exception from its <span class="cv_-_computer_voice">send</span> method, ClaimCenter retries after a delay tim, and continues to retry multiple times. The delay time is an exponential wait time (<span class="e_-_emphasis">backoff time</span>) up to a wait limit specified by each destination. ClaimCenter halts sending messages all messages for that destination pair during that retry delay. After the delay reaches the wait limit, the retryable error becomes a non-automatic-retry error.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="4308615">For errors during send() that you do not want automatic retry </a></span>– If the destination has an error that the application does not expect to be temporary, do not throw an exception. Throwing an exception triggers automatic retry. Instead, call the message’s <span class="cv_-_computer_voice">reportError</span> method. See <a href="javascript:WWHClickedPopup('integration', 'eventsmessaging.27.09.html#4016335', '');" title="Reporting Acknowledgements and Errors">“Reporting Acknowledgements and Errors”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="4308619">The destination suspends sending for all messages for that destination until one of the following is true:</a></div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="4308620">An administrator retries the sending manually, and it succeeds this time.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="4308621">An administrator removes the message.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="4317883">It is a safe-ordered ClaimCenter message and an administrator resynchronizes the claim.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="4263320">Errors conditions that occur later:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="4263321">A negative acknowledgement (NAK)</a></span> – A destination might get an error reported from the external system (database error, file system error, and delivery failure) and special intervention might be required to fix it. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="4317902">For safe-ordered messages, ClaimCenter stops sending messages for this claim/destination pair until the error clears through the administration console or automated tools. </a></div>
      <div class="LP_-_List_Para"><a name="4296130">For safe-ordered messages, ClaimCenter stops sending messages for this account/destination pair until the error clears through the administration console or automated tools. </a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ri_-_run_in_header"><a name="4263333">No acknowledgement for a long period</a></span> – ClaimCenter does not automatically time out and resend the message because of delays. If the transport layer guarantees delivery, delay is acceptable whereas resending results in message duplicates. External system may not be able to properly detect and handle duplicates.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="4317910">For safe-ordered messages, ClaimCenter does not send more messages for the claim/destination pair until it receives an ACK or NAK.</a></div>
      <div class="B_-_Body"><a name="4263394">For ClaimCenter administrative tools that monitor and recover from messaging errors, see </a><a href="javascript:WWHClickedPopup('integration', 'eventsmessaging.27.14.html#4025330', '');" title="Monitoring Messages and Handling Errors">“The Administration User Interface”</a>.</div>
      <h4 class="H2_-_Heading_2"><a name="4263397">Submitting Acks, Errors, and Duplicates from Messaging Plugins</a></h4>
      <div class="B_-_Body"><a name="4263398">To submit an acknowledgement or a negative acknowledgement from a messaging plugin implementation class, use the following APIs. Refer to the following table based on the success status, the type of failure, and the location of your code.</a></div>
      <div class="T_-_Table"><a name="4263512">&nbsp;</a></div>
      <table class="withHeadingTallCells" style="text-align: left" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="4278509">Situation</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="4278511">Do this</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="4278513">Description</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="4278515">Success</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="4278517">message.reportAck()</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="4278519">Submits an ACK for this message, which may permit other messages to be sent. For detailed logic of message ordering, see </a><a href="javascript:WWHClickedPopup('integration', 'eventsmessaging.27.07.html#4253049', '');" title="Message Ordering and Multi-Threaded Sending">“Message Ordering and Multi-Threaded Sending”</a>.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="4278524">Errors within the </a><span class="cvt_-_computer_voice_table">send</span> method of your <span class="cvt_-_computer_voice_table">MessageTransport</span> plugin implementation, and the error is presumed temporary.</div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="4278526">Throw an exception within the </a><span class="cvt_-_computer_voice_table">send</span> method, which triggers automatic retries potentially multiple times.</div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="4278528">Automatically retries the message potentially multiple times, including the backoff timeout and maximum tries. After the maximum retries, the application ceases to automatically retry it and suspends the messaging destination.</a></div>
            <div class="TT_-_Table_Text"><a name="4292517">An administrator can retry the message from the </a><span class="ui_-_UI_element">Administration</span> tab. Select the message and click <span class="ui_-_UI_element">Retry</span>. For details of automatic retry, see <a href="javascript:WWHClickedPopup('integration', 'eventsmessaging.27.09.html#4263294', '');" title="Reporting Acknowledgements and Errors">“Message Sending Error Behaviors”</a>. </div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="4278533">Errors in any messaging plugins and no automatic retry is needed </a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="4278535">message.reportError()</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="4278537">Simply reports the error and omits automatic retries. An administrator can retry the message from the </a><span class="ui_-_UI_element">Administration</span> tab. Select the message and click <span class="ui_-_UI_element">Retry</span>.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="4278540">Errors in any messaging plugins and scheduled retry is needed </a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="4278542">message.reportError(date)</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="4278544">Reports the error and schedules a retry at a specific date and time. An administrator can retry the message from the user interface before this date. This is equivalent to using the application user interface in the </a><span class="ui_-_UI_element">Administration</span> tab at that specified time, and select the message and click <span class="ui_-_UI_element">Retry</span>. You can call this method from the <span class="cvt_-_computer_voice_table">MessageTransport</span> or when handling ACKs in your <span class="cvt_-_computer_voice_table">MessageReply</span> plugin implementation.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="4278546">Message is a duplicate</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><span class="cvt_-_computer_voice_table"><a name="4278548">msgHist.reportDuplicate()</a></span> </div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="4278550">Reports a duplicate. This is a method on the message history object, not the message object. A message history object is what a message becomes after successful sending. A message history (</a><span class="cvt_-_computer_voice_table">MessageHistory</span>) object has the same properties as a message (<span class="cvt_-_computer_voice_table">Message</span>) object but has different methods.</div>
            <div class="TT_-_Table_Text"><a name="4278551">If your duplicate detection code runs in the </a><span class="cvt_-_computer_voice_table">MessageTransport</span> plugin (typical only for synchronous sending), use standard database query builder APIs to find the original message. Query the <span class="cvt_-_computer_voice_table">MessageHistory</span> table.</div>
            <div class="BIT_-_Bullet_Item_Table_outer" style="margin-left: 2.16pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
                <tr style="vertical-align: baseline">
                  <td>
                    <div class="BIT_-_Bullet_Item_Table_inner" style="width: 7.199999999999999pt; white-space: nowrap">
                      <span class="but_-_bullet_in_table">•	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="BIT_-_Bullet_Item_Table_inner"><a name="4278553">For asynchronous sending with the </a><span class="cvt_-_computer_voice_table">MessageReply</span> plugin implementation, The <span class="cvt_-_computer_voice_table">MessageFinder</span> interface has methods that a reply plugin uses to find message history entities. The methods use either the original message ID or the combination of sender reference ID and destination ID:<span class="cvt_-_computer_voice_table">findHistoryByOriginalMessageID(originalMessageId)</span> - find message history entity by original message ID</div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="BIT_-_Bullet_Item_Table_outer" style="margin-left: 2.16pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
                <tr style="vertical-align: baseline">
                  <td>
                    <div class="BIT_-_Bullet_Item_Table_inner" style="width: 7.199999999999999pt; white-space: nowrap">
                      <span class="but_-_bullet_in_table">•	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="BIT_-_Bullet_Item_Table_inner"><span class="cvt_-_computer_voice_table"><a name="4278554">findHistoryBySenderRefID(senderRefID, destinationID)</a></span> - find message history entity by sender reference ID</div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="TT_-_Table_Text"><a name="4278556">After you find the original message in the message history table, report the duplicate message by calling </a><span class="cv_-_computer_voice">reportDuplicate</span> on the original message. For related information about asynchronous replies, see <a href="javascript:WWHClickedPopup('integration', 'eventsmessaging.27.11.html#3110489', '');" title="Implementing Messaging Plugins">“Implementing a Message Reply Plugin”</a></div>
          </td>
        </tr>
      </table>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="3247069">Using Web Services to Submit Acks and Errors From External Systems </a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="4248542">If you want to acknowledge the message directly from an external system, use the web service method </a><span class="cv_-_computer_voice">IMessagingTools.acknowledgeMessage(ack)</span>. First, create an <span class="cv_-_computer_voice">Acknowledgement</span> SOAP object.</div>
      <div class="B_-_Body"><a name="4264225">If there are no problems with the message (it is successful), pass the object as is.</a></div>
      <div class="B_-_Body"><a name="4279307">If you detect errors with the message, set the following properties:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="4279308">Error</a></span> – Set the <span class="cv_-_computer_voice">Acknowledgement.error</span> property to <span class="cv_-_computer_voice">true</span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="4279352">Retryable</a></span> – For all errors other than duplicates, always set the <span class="cv_-_computer_voice">Acknowledgement.Retryable</span> property to <span class="cv_-_computer_voice">true</span> and <span class="cv_-_computer_voice">Acknowledgement.Error</span> to <span class="cv_-_computer_voice">true</span>. Set this property to false (the default) only if there is no error.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="4279334">Duplicate</a></span> – If you detect the message is a duplicate, set the <span class="cv_-_computer_voice">Duplicate</span> and <span class="cv_-_computer_voice">Error</span> properties to <span class="cv_-_computer_voice">true</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="4264235">Using Web Services to Retry Messages from External Systems</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="4264237">The web service interface </a><span class="cv_-_computer_voice">MessagingToolsAPI</span> contains methods to retry messages. </div>
      <div class="B_-_Body"><a name="4404226">Review the documentation for the </a><span class="cv_-_computer_voice">MessagingToolsAPI</span> methods <span class="cv_-_computer_voice">retryMessage</span> and <span class="cv_-_computer_voice">retryRetryableErrorMessages</span>. The method <span class="cv_-_computer_voice">retryRetryableErrorMessages</span> optionally limits retry attempts to a specified destination. You can only use the <span class="cv_-_computer_voice">MessagingToolsAPI</span> interface if the server’s run mode is set to <span class="cv_-_computer_voice">multiuser</span>. Otherwise, all these methods throw an exception.</div>
      <div class="B_-_Body"><a name="4016897">As part of an acknowledgement, the destination can update properties on related objects. For example, the destination could set the </a><span class="cv_-_computer_voice">PublicID</span> property based on an ID in the external system.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>