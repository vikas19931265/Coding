<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Calling Published RPCE Web Services From Other Languages</title>
    <link rel="StyleSheet" href="css/webservices-rpce-publish.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-webservices.html#3437254">Web Services</a> : <a class="WebWorks_Breadcrumb_Link" href="webservices-rpce-publish.09.01.html#3437254">Publishing Web Services (RPCE)</a> : Calling Published RPCE Web Services From Other Languages</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="3437254">Calling Published RPCE Web Services From Other Languages</a></h3>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="3647612">RPCE web services are deprecated. Convert existing RPCE code to WS-I web services.</a></div>
      <div class="B_-_Body"><a name="3437255">This topic discusses accessing Guidewire-hosted RPCE web services from alternative languages. Previous sections discuss connecting to web services from Java 1.5 (using the included Java-specific </a><span class="cv_-_computer_voice">APILocator</span> utility) and from Microsoft .NET (using WSS security and .NET example code). If you must connect from another system, such as Java 1.4 or other languages entirely, you must use a different procedure for authentication. </div>
      <div class="B_-_Body"><a name="3437256">There are two major differences connecting from Java 1.4 or other non-.NET languages or other tools:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3437257">The built-in generated Java libraries for connecting to Guidewire libraries require Java version 1.5. You must generate your Java classes on your own from the WSDL files using the Axis utility for Java. The WSDL files are generated at the path:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="3437261">ClaimCenter/soap-api/wsdl/api/</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="3437262">The SOAP API utility class </a><span class="cv_-_computer_voice">APILocator</span> is the recommended way to log on to web services from remote Java code. It requires Java version 1.5. Although you can use Java 1.4 with Guidewire web services, you cannot use <span class="cv_-_computer_voice">APILocator</span>. This class works with Java 1.5 to easily connect to web services, pool proxies for higher performance, and reduces memory issues from uncaught exceptions that skip logout.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="3437263">Because of these differences, the login procedure to authenticate with web services is different from other versions of Java (such as Java 1.4) or other non-.NET languages or systems. Most importantly, you must manually set a header in the HTTP transaction in whatever way that is done in that language or the set of tools that implement SOAP. </a></div>
      <div class="B_-_Body"><a name="3447183">This topic discusses Java but most of it applies for languages that are not Java&nbsp;1.5 and not Microsoft&nbsp;.NET languages. The important thing to understand is how the published web service expects authentication information SOAP transaction headers.</a></div>
      <div class="B_-_Body"><a name="3437264">The exact header to use varies depending on whether you want to use conversational or non-conversational SOAP modes (see </a><a href="javascript:WWHClickedPopup('integration', 'webservices-rpce-publish.09.13.html#3541689', '');" title="Web Services Using ClaimCenter Clusters">“Conversational and Non-Conversational SOAP Modes”</a>). Conversational mode is the typical connection method for connecting to ClaimCenter web services.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="3437271">The most important thing to know about connecting to web services from other languages is that you must add SOAP transaction headers. The header names and values vary depending on conversational or non-conversational SOAP mode. The exact mechanism for adding SOAP headers to a SOAP transaction varies greatly by language. The examples in this section use Java 1.4, but you must consult your documentation for your language and tools for the syntax of how to add SOAP headers.</a></div>
      <h4 class="H2_-_Heading_2"><a name="3437272">Calling SOAP in Conversational Mode from Other Languages</a></h4>
      <div class="B_-_Body"><a name="3437273">To authenticate with conversational SOAP mode, first call the </a><span class="cv_-_computer_voice">ILoginAPI</span> web service method <span class="cv_-_computer_voice">login</span> (however that is done in your language of choice) to generate a session ID. Next, set the <span class="cv_-_computer_voice">gw_auth_prop</span> SOAP header in the transaction to include the session&nbsp;ID (however that is done in your language of choice).</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="3437563">The syntax of setting SOAP headers varies by language. Check your documentation for your language and tools for how to do this.</a></div>
      <div class="B_-_Body"><a name="3437274">For example, the following Java 1.4 code connects to the server and executes a method on the </a><span class="cv_-_computer_voice">ISystemToolsAPI</span> web services interface. It assumes you used Apache Axis to generate Java 1.4 libraries, which allow you to use generated stubs using the <span class="cv_-_computer_voice">org.apache.axis.client.Stub</span> class. </div>
      <div class="B_-_Body"><a name="3437542">The stub class lets you set a SOAP header for the Guidewire authentication to contain the session ID. You obtain the session ID by calling the </a><span class="cv_-_computer_voice">ILoginAPI</span> interface method <span class="cv_-_computer_voice">login</span>. Pass it the user name and password, and it returns the session ID. </div>
      <div class="B_-_Body"><a name="3438851">For example:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="3437275">String sessionId = loginAPI.login(userName, pw);</a></div>
      <div class="B_-_Body"><a name="3437278">Next, use this session ID and set it in the SOAP header </a><span class="cv_-_computer_voice">gw_auth_prop</span>:</div>
      <div class="CS_-_Code_Single_Line"><a name="3437279">systoolsStub.setHeader("http://www.guidewire.com/soap", "gw_auth_prop", sessionId);</a></div>
      <div class="B_-_Body"><a name="3437280">The following full example in Java 1.4 shows how you would do this using the Axis-generated libraries using Java 1.4:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="3437281">// Set up constants.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437285">String loginUrlString = "http://localhost:8080/cc/soap/ILoginAPI?wsdl"; </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437289">String systoolsUrlString = "http://localhost:8080/cc/soap/ISystemToolsAPI?wsdl"; </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437290">String userName = "su";</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437291">String pw = "gw";</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437292">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437293">// Locate ILoginAPI and call login method with name and password.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437294">URL loginURL = new URL(loginUrlString);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437295">loginAPI = loginLocator.getILoginAPI(loginURL);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span class="s_-_strong"><a name="3437296">String sessionId = loginAPI.login(userName, pw);</a></span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437297">System.out.println("Successful login to web service (url: " + loginUrlString + ")");</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437298">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437299">// Locate ISystemToolsAPI.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437300">URL systoolsURL = new URL(systoolsUrlString);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437301">ISystemToolsAPIServiceLocator systoolsLocator = new ISystemToolsAPIServiceLocator();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437302">systoolsAPI = systoolsLocator.getISystemToolsAPI(systoolsURL);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437303">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437304">// Set ISystemToolsAPI and set the special authentication header with the session ID.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437305">Stub systoolsStub = (Stub) systoolsAPI;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span class="s_-_strong"><a name="3437306">systoolsStub.setHeader("http://www.guidewire.com/soap", "gw_auth_prop", sessionId);</a></span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437307">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437308">// Use the API method as desired.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437309">runlevel = systoolsAPI.getRunLevel();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437310">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437311">// Do other actions here.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437312">// ...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437313">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437314">// Log out.</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3437315">loginAPI.logout(sessionId);</a></PRE>
      <div class="B_-_Body"><a name="3437316">This section just discusses authentication differences from other systems. For more information about using web services, see the section </a><a href="javascript:WWHClickedPopup('integration', 'webservices-rpce-publish.09.06.html#3550443', '');" title="Calling Your Published RPCE Web Service from Java">“Calling Your Published RPCE Web Service from Java”</a>. However, ignore the <span class="cv_-_computer_voice">APILocator</span> discussion since that applies only to Java 1.5.</div>
      <h4 class="H2_-_Heading_2"><a name="3437320">Calling SOAP in Non-conversational Mode from Other Languages</a></h4>
      <div class="B_-_Body"><a name="3437321">To authenticate with non-conversational SOAP mode, first manually set the header in the HTTP transaction for the user name and password in each SOAP request. Use the SOAP headers </a><span class="cv_-_computer_voice">gw_auth_user_prop</span> for the name and <span class="cv_-_computer_voice">gw_auth_password_prop</span> for the password. The exact syntax of setting SOAP headers varies based on your language and tools of choice, check your tool’s documentation for details. Unlike conversational mode, you must not call the <span class="cv_-_computer_voice">ILoginAPI</span> web service method <span class="cv_-_computer_voice">login</span> for non-conversational mode before calling your desired API calls on other SOAP interfaces.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="3437558">The syntax of setting SOAP headers varies by language. Check your documentation for your language and tools for how to do this.</a></div>
      <div class="B_-_Body"><a name="3437546">For example:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="3437322">systoolsStub.setHeader("http://www.guidewire.com/soap", "gw_auth_user_prop", userName);</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3437323">systoolsStub.setHeader("http://www.guidewire.com/soap", "gw_auth_password_prop", pw);</a></PRE>
      <div class="B_-_Body"><a name="3437324">The following full example in Java 1.4 shows how you would do this using the Axis-generated libraries using Java 1.4:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="3437325">// Set up constants.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437329">String systoolsUrlString = "http://localhost:8080/cc/soap/ISystemToolsAPI?wsdl"; </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437330">String userName = "su";</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437331">String pw = "gw";</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437332">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437333">// Locate ISystemToolsAPI.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437334">URL systoolsURL = new URL(systoolsUrlString);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437335">ISystemToolsAPIServiceLocator systoolsLocator = new ISystemToolsAPIServiceLocator();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437336">systoolsAPI = systoolsLocator.getISystemToolsAPI(systoolsURL);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437337">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437338">// Set ISystemToolsAPI authentication headers for NON-conversational mode.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437339">Stub systoolsStub = (Stub) systoolsAPI;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span class="s_-_strong"><a name="3437340">systoolsStub.setHeader("http://www.guidewire.com/soap", "gw_auth_user_prop", userName);</a></span></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span class="s_-_strong"><a name="3437341">systoolsStub.setHeader("http://www.guidewire.com/soap", "gw_auth_password_prop", pw);</a></span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437342">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437343">// Use the API method as desired.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437344">runlevel = systoolsAPI.getRunLevel();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437345">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437346">// Do other actions here.</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3437347">// ...</a></PRE>
      <h4 class="H2_-_Heading_2"><a name="3437418">How SOAP Headers Appear in the SOAP Envelope</a></h4>
      <div class="B_-_Body"><a name="3647265">The following example shows how your SOAP header might appear within the SOAP envelope sent to the published web service:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="3647266">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3647267">&nbsp;&nbsp;&lt;soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437680">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlns:xsd="http://www.w3.org/2001/XMLSchema" </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437681">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437688">      &lt;soapenv:Header&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span class="s_-_strong"><a name="3437689">&nbsp;&nbsp;&lt;ns1:gw_auth_user_prop soapenv:actor="http://schemas.xmlsoap.org/soap/actor/next"</a></span></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span class="s_-_strong"><a name="3437692">&nbsp;&nbsp;soapenv:mustUnderstand="0" xmlns:ns1="http://www.guidewire.com/soap"&gt;user&lt;/ns1:gw_auth_user_prop&gt;</a></span></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span class="s_-_strong"><a name="3437702">&nbsp;&nbsp;&lt;ns2:gw_auth_password_prop soapenv:actor="http://schemas.xmlsoap.org/soap/actor/next"</a></span></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span class="s_-_strong"><a name="3437716">&nbsp;&nbsp;soapenv:mustUnderstand="0" xmlns:ns2="http://www.guidewire.com/soap"&gt;password</a></span></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span class="s_-_strong"><a name="3437720">&nbsp;&nbsp;&lt;/ns2:gw_auth_password_prop&gt;</a></span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437369">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/soapenv:Header&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437370">&nbsp;&nbsp;&nbsp;&nbsp;&lt;soapenv:Body&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437371">         ...</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437372">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/soapenv:Body&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3437356">&nbsp;&lt;/soapenv:Envelope&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3647319">...</a></PRE>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>