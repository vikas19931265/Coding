<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Encryption Integration Overview</title>
    <link rel="StyleSheet" href="css/encryption.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-plugins.html#2389258">Plugins</a> : <a class="WebWorks_Breadcrumb_Link" href="encryption.21.1.html#2389258">Encryption Integration</a> : Encryption Integration Overview</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="2389258">Encryption Integration Overview</a></h3>
      <div class="B_-_Body"><a name="2390872">You can store certain data model properties encrypted in the database. For example, hide important data, such as bank account numbers or private personal data, in the database in a non-plaintext format. The actual encryption and decryption is implemented through the </a><span class="cv_-_computer_voice">IEncryption</span> plugin. You can define your own algorithm. ClaimCenter does not provide an encryption algorithm in the product. ClaimCenter simply calls this plugin implementation, which is responsible for encoding an unencrypted <span class="cvt_-_computer_voice_table">String</span> or reversing that process.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2390895">ClaimCenter provides a sample encryption algorithm that simply reverses the string value. You must disable this plugin if you do not wish to use encryption. You must implement the plugin to properly encrypt your data with your own algorithm.</a></div>
      <div class="B_-_Body"><a name="2390886">All encryption and decryption is done within ClaimCenter automatically as the application accesses and loads entities from the database. All Gosu rules and web service interfaces automatically operate on plain text (unencrypted text) without special coding to support encryption within rules, web services, and messaging plugins.</a></div>
      <div class="B_-_Body"><a name="2428371">From Gosu, any encrypted fields appear unencrypted. If you must avoid sending this information as plain text to external systems, you must design your own integrations to use a secure protocol or encrypt that data. </a></div>
      <div class="B_-_Body"><a name="2428381">For example, use the plugin registry and use your own encryption plugin to encrypt and decrypt data across the wire in your integration code. Create classes to contain your integration data for each integration point. You can make some properties contain encrypted versions of data that require extra security between systems. Such properties do not need to be database-backed. You can implement enhancement properties on entities that dynamically return the encrypted version. If your messaging layer uses encryption (for example, SSL/HTTPS) or is on a secure network, additional encryption might not be necessary. It depends on the details of your security requirements.</a></div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="2428385">From Gosu, any encrypted fields appear unencrypted. Carefully consider security implications of any integrations with external systems for properties that normally are encrypted.</a></div>
      <div class="B_-_Body"><a name="2380376">For communication between Guidewire applications, the built-in integrations do not encrypt any encrypted properties during the web services interaction. This affects the following integrations:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2428130">ClaimCenter and ContactManager</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2421633">ClaimCenter and PolicyCenter</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2380478">The built-in integrations between Guidewire applications do not encrypt properties in the web service connection between the applications. To add additional security, you must customize the integration to use HTTPS or add additional encryption of properties sent across the network.</a></div>
      <h4 class="H2_-_Heading_2"><a name="2380624">Setting Encrypted Properties</a></h4>
      <div class="B_-_Body"><a name="2358322">You can change the encryption settings for a column in data model files by overriding the column information (adding a </a><span class="e_-_emphasis">column override</span>). You can only set encryption for character-based column types such as <span class="cv_-_computer_voice">varchar</span>. Encryption is unsupported on other types, including binary types (<span class="cv_-_computer_voice">varbinary</span>) and date types.</div>
      <div class="B_-_Body"><a name="2358136">There are two ways to mark the column as encrypted:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2358137">Make a column encrypted by specifying its type as </a><span class="cv_-_computer_voice">encrypted</span>:</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="2358138"> &lt;column name="encrypted_column" type="encrypted" size="10"/&gt;</a></div>
      <div class="LP_-_List_Para"><a name="2358764">This makes the column </a><span class="cv_-_computer_voice">encrypted_column</span> have the type <span class="cv_-_computer_voice">EncryptedString</span>. ClaimCenter generates visible masks for all input widgets for this value.</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2358775">Alternatively, mark a column as encrypted through the </a><span class="cv_-_computer_voice">encryption</span> attribute, which only applies to types based on <span class="cv_-_computer_voice">varchar. </span>This masks values that are accessed directly as bean properties. For example:</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="2358776">&lt;column name="encrypted_column" type="varchar" size="10" encryption="true"/&gt;</a></div>
      <div class="LP_-_List_Para"><a name="2360355">This example makes the property </a><span class="cv_-_computer_voice">encrypted_column</span> to be the type <span class="cv_-_computer_voice">String</span>. In this case, input widgets for this value are masked only if the value is a bean property access. For example, suppose the earlier column is within an entity called <span class="cv_-_computer_voice">TestBean</span>. ClaimCenter generates an input mask if the value expression is the form <span class="cv_-_computer_voice">bean.encrypted_column</span>. However, there is no input mask if the expression is a method invocation like <span class="cv_-_computer_voice">pageHelper.getMyEncryptedColumnValue()</span>.</div>
      <div class="B_-_Body"><a name="2360359">ClaimCenter prevents you from encrypting properties with a denormalized column. In other words, no encryption on a property that creates a secondary column to support case-insensitive search. For example, the contact property </a><span class="cv_-_computer_voice">LastNameDenorm</span> is a denormalized column added to mirror the <span class="cv_-_computer_voice">LastName</span> property, and thus the <span class="cv_-_computer_voice">LastName</span> property cannot be encrypted.</div>
      <h4 class="H2_-_Heading_2"><a name="2384904">Querying Encrypted Properties</a></h4>
      <div class="B_-_Body"><a name="2359468">Gosu database query builder queries (and older-style </a><span class="cv_-_computer_voice">find</span> expressions) work as expected if you compare the property with a literal value. For example, looking up a social security number or other unique ID is comparing with a literal value. However, the encrypted data for every record is not decrypted from the database to test the results of the query. It actually works in the opposite way. If you compare a constant value against an encrypted property, ClaimCenter encrypts the constant in the SQL query. The query embeds the equality comparison logic directly into the SQL. </div>
      <div class="B_-_Body"><a name="2360514">For comparison logic, the SQL that Gosu generates always compares either:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2360222">Two properties from the database, either both encrypted or both unencrypted</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2360229">A static literal, encrypted if necessary, and a property from the database. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2360233">One side effect of this is that equality comparison is the only supported comparison for encrypted properties. For example you cannot use “greater than” comparisons or “less than” comparisons.</a></div>
      <div class="B_-_Body"><a name="2359529">This means that your </a><span class="cv_-_computer_voice">find</span> queries can compare encrypted properties against other values in only two ways:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2359530">Direct equality comparison (</a><span class="cv_-_computer_voice">==</span>) or not equals (<span class="cv_-_computer_voice">!=</span>) a Gosu expression of type of <span class="cv_-_computer_voice">String</span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2359531">Direct equality comparison (</a><span class="cv_-_computer_voice">==</span>) or not equals (<span class="cv_-_computer_voice">!=</span>) with a field path to another encrypted property</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2359908">For example, suppose </a><span class="cv_-_computer_voice">Claim.SecretVal</span> and <span class="cv_-_computer_voice">Claim.SecretVal2</span> are encrypted properties, suppose <span class="cv_-_computer_voice">Claim.OtherVal</span> and <span class="cv_-_computer_voice">Claim.OtherVal2</span> are unencrypted properties, and suppose <span class="cv_-_computer_voice">tempValue</span> is a local variable containing a <span class="cv_-_computer_voice">String</span>.</div>
      <div class="B_-_Body"><a name="2359909">The following queries work:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386504">q.compare("SecretVal", Equals, "123")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386256">q.compare("SecretVal", NotEquals, "123")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386305">q.compare("SecretVal", Equals, tempValue)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386306">q.compare("SecretVal", NotEquals, tempValue)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386428">q.compare("SecretVal", Equals, q.getColumnRef("SecretVal2")) // both encrypted</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386429">q.compare("SecretVal", NotEquals, q.getColumnRef("SecretVal2")) // both encrypted</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386441">q.compare("OtherVal", Equals, q.getColumnRef("OtherVal2")) // both unencrypted</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386442">q.compare("OtherVal", NotEquals, q.getColumnRef("OtherVal2")) // both unencrypted</a></PRE>
      <div class="B_-_Body"><a name="2359765">The following queries do not work:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386562">q.compare("SecretVal", Equals, q.getColumnRef("OtherVal")) // bad mix of encrypted and unencrypted</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386588">q.compare("SecretVal", NotEquals, q.getColumnRef("OtherVal")) // bad mix of encrypted and unencrypted</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2386600">q.compare("SecretVal", GreaterThan, "123") &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// no greater than or less than</a></PRE>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2359448">If a Gosu </a><span class="cv_-_computer_voice">find</span> query involves encrypted properties, you can use equality comparison with other encrypted properties or against <span class="cv_-_computer_voice">String</span> values constants in the query. However, there are limitations with what you can do in the query. Refer to the instructions in this section for details.</div>
      <h4 class="H2_-_Heading_2"><a name="2428135">Duplicate Check Search Template and Encryption</a></h4>
      <div class="B_-_Body"><a name="2428136">In the base configuration, the ClaimCenter duplicate check search template supports encryption. </a></div>
      <h4 class="H2_-_Heading_2"><a name="2359408">Writing Your Encryption Plugin</a></h4>
      <div class="B_-_Body"><a name="2358160">Write and implement a class that implements the </a><span class="cv_-_computer_voice">IEncryption</span> plugin interface. Its responsibility is to encrypt and decrypt data with one encryption algorithm.</div>
      <div class="B_-_Body"><a name="2385234">To encrypt, implement an </a><span class="cv_-_computer_voice">encrypt</span> method that takes an unencrypted <span class="cv_-_computer_voice">String</span> and returns an encrypted <span class="cv_-_computer_voice">String</span>, which may or may not be a different length than the original text. If you want to use strong encryption and are permitted to do so legally, you are free to do so. ClaimCenter does not include any actual encryption algorithm. </div>
      <div class="B_-_Body"><a name="2385247">To decrypt, implement a </a><span class="cv_-_computer_voice">decrypt</span> method that takes an encrypted <span class="cv_-_computer_voice">String</span> and returns the original unencrypted <span class="cv_-_computer_voice">String</span>.</div>
      <div class="B_-_Body"><a name="2358164">You must also specify the maximum length of the encrypted string by implementing the </a><span class="cv_-_computer_voice">getEncryptedLength</span> method. Its argument is the length of decrypted data. It must return the maximum length of the encrypted data. ClaimCenter primarily uses the encryption length at application startup time during upgrades. During the upgrade process, the application must to determine the required length of encrypted columns. If the length of the column must increase to accommodate inflation of encrypted data, then this method helps ClaimCenter know how far to increase space for the database column.</div>
      <div class="B_-_Body"><a name="2358168">To uniquely identify your encryption algorithm, your plugin must return an encryption ID. Implement a </a><span class="cv_-_computer_voice">getEncryptionIdentifier</span> method to return a unique identifier for your encryption algorithm. This identifier tracks encryption-related change control. This is exposed to Gosu as the property <span class="cv_-_computer_voice">EncryptionIdentifier</span>:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2390736">override property get EncryptionIdentifier() : String {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2390737">    return "ABC:DES3" </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2390738">  }</a></PRE>
      <div class="B_-_Body"><a name="2390752">The encryption ID is very important and must be unique among all encryption plugins in your implementation. The application decides whether to upgrade the encryption data with a new algorithm by comparing:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2390535">The encryption ID of the current encryption plugin </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2390550">The encryption ID associated with the database last time the server ran. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2390558">For important details, see </a><a href="javascript:WWHClickedPopup('integration', 'encryption.21.3.html#2388115', '');" title="Changing Your Encryption Algorithm Later">“Changing Your Encryption Algorithm Later”</a>.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2387039">Be careful that your encryption plugin returns an appropriate encryption ID and that it is unique among all your encryption plugins.</a></div>
      <div class="B_-_Body"><a name="2385355">The following example is a simple demonstration encryption plugin. It simple fake encryption algorithm is to append a reversed version of the unencrypted text to the end of the text. For example, encrypting the text </a><span class="cv_-_computer_voice">"hello"</span> becomes <span class="cv_-_computer_voice">"helloolleh"</span>. </div>
      <div class="B_-_Body"><a name="2390602">To decrypt the text, it merely removes the second half of the string. The second half of the string is the reversed part of the text that it appended earlier when encrypting the string. It is important to note that this fake algorithm doubles the size of the encrypted data, hence the </a><span class="cv_-_computer_voice">getEncryptedLength</span> doubles and returns the input size argument.</div>
      <div class="B_-_Body"><a name="2390613">The following Gosu code implements this plugin</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2358170">package Plugins</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358171">uses gw.plugin.util.IEncryption</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358172">uses java.lang.StringBuilder</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358173">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358174">class EncryptionByReversePlugin implements IEncryption {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2416485">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358176">&nbsp;&nbsp;override function encrypt(value:String) : String {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358177">&nbsp;&nbsp;&nbsp;&nbsp;return reverse(value)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358178">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2416494">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358179">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358180">&nbsp;&nbsp;override function decrypt(value:String) : String {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358181">&nbsp;&nbsp;&nbsp;&nbsp;return value.subString(value.length() / 2, value.length());</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358182">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2416587">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2416533">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2416534">&nbsp;&nbsp;override function getEncryptedLength(size:int) : int {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2416535">&nbsp;&nbsp;&nbsp;&nbsp;return size * 2 // encrypting doubles the size </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358186">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2416552">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358187">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358188">&nbsp;&nbsp;override property get EncryptionIdentifier() : String {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358189">&nbsp;&nbsp;&nbsp;&nbsp;return "mycompany:reverse"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358190">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2416590">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358191">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358192">&nbsp;&nbsp;private function reverse(value:String) : String {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358193">&nbsp;&nbsp;&nbsp;&nbsp;var buffer = new StringBuilder(value)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358194">&nbsp;&nbsp;&nbsp;&nbsp;return buffer.reverse().append(value).toString()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358195">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2358196">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2416583">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2358197">}</a></PRE>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2432989">Detecting Accidental Duplication of Encryption or Decryption</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2433123">You can mitigate the risk of accidentally encrypting already-encrypted data if you design your encryption algorithm to authoritatively detect whether the property data is already encrypted. </a></div>
      <div class="B_-_Body"><a name="2433124">For example, suppose you put a known series of special unusual characters that could not appear in the data both before and after your encrypted data. You can now detect whether data is encrypted or unencrypted:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2433893">During an encryption request, if your encryption plugin detects that the data is already encrypted, throw an exception.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2433909">During an decryption request, if your encryption plugin detects that the data is already decrypted, throw an exception.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2433126">If You Import Data from Staging Tables</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2390097">If you import data from staging tables and use encrypted columns, there are special tools that you need to know about. See </a><a href="javascript:WWHClickedPopup('integration', 'encryption.21.5.html#2428243', '');" title="Encryption Features for Staging Tables">“Encryption Features for Staging Tables”</a>.</div>
      <h4 class="H2_-_Heading_2"><a name="2390102">Installing Your Encryption Plugin</a></h4>
      <div class="B_-_Body"><a name="2385067">After you write your implementation of the </a><span class="cv_-_computer_voice">IEncryption</span> plugin, you must register your plugin implementation. You can register multiple <span class="cv_-_computer_voice">IEncryption</span> plugin implementations if you need to support changing the encryption algorithm.</div>
      <h6 class="HS_-_Head_Sub"><a name="2385184">To enable your encryption plugin implementation</a></h6>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="2385086">Create a new class that implements the </a><span class="cv_-_computer_voice">IEncryption</span> plugin interface. Be certain that your <span class="cv_-_computer_voice">EncryptionIdentifier</span> method returns a unique encryption identifier. If you change your encryption algorithm, it is critical that you change the encryption identifier for your new implementation. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2433495">Guidewire strongly recommends you set the encryption ID for your current encryption plugin to a name that describes or names the algorithm itself. For example, </a><span class="cv_-_computer_voice">"encryptDES3"</span>. </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2433514">In Studio, navigate to </a><span class="ui_-_UI_element">Resources</span> → <span class="ui_-_UI_element">Configuration</span> → <span class="ui_-_UI_element">config → Plugins → registry</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2385112">Right-click on </a><span class="ui_-_UI_element">registry</span>, and choose <span class="ui_-_UI_element">New</span><span class="cv_-_computer_voice"> → </span><span class="ui_-_UI_element">Plugin. </span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2435399">Studio prompts you to name your new plugin. Remember that you can have than one registered implementation of an </a><span class="cv_-_computer_voice">IEncryption</span> plugin interface. The name field must be unique among all your plugins. This is called the <span class="e_-_emphasis">plugin&nbsp;name</span> and is particularly important for encryption plugins. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2385554">Guidewire strongly recommends you set the plugin name for your current encryption plugin to a name that describes the algorithm itself. For example, </a><span class="cv_-_computer_voice">encryptDES3</span>.</div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	5.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2435498">In the interface field, type </a><span class="cv_-_computer_voice">IEncryption</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	6.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2416979">Edit standard plugin fields in the Plugins editor in Studio. See </a><a href="javascript:WWHClickedPopup('config', 'studio_plugins.11.1.html#3595679', '');" title="Using the Plugins Registry Editor">“Using the Plugins Registry Editor” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('config', 'studio_plugins.11.1.html#3595679', '');" title="Using the Plugins Registry Editor">Configuration Guide</a></span>. Also see <a href="javascript:WWHClickedPopup('integration', 'plugins.15.01.html#2013370', '');" title="Plugin Overview">“Plugin Overview”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	7.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2416981">In </a><span class="cv_-_computer_voice">config.xml</span>, set the <span class="cv_-_computer_voice">CurrentEncryptionPlugin</span> parameter to the plugin name. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="2416982">The </a><span class="cv_-_computer_voice">CurrentEncryptionPlugin</span> parameter specifies which encryption plugin is the current encryption algorithm for the main database. Specify the plugin name, not the class name nor the encryption ID. </div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="2416988">If the </a><span class="cv_-_computer_voice">CurrentEncryptionPlugin</span> parameter is missing or specifies an implementation that does not exist, the server does not start. </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	8.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2387256">Start the server.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="2417042">If the upgrader detects data model fields marked as encrypted but the database contains unencrypted versions, the upgrader encrypts the field in the main database using the current encryption plugin.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="2417043">See also</a></h6>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('integration', 'encryption.21.3.html#2388115', '');" title="Changing Your Encryption Algorithm Later" name="2428144">“Changing Your Encryption Algorithm Later”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('integration', 'encryption.21.4.html#2428209', '');" title="Encryption Changes with Snapshots" name="2428148">“Encryption Changes with Snapshots”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <h4 class="H2_-_Heading_2"><a name="2387610">Adding or Removing Encrypted Properties</a></h4>
      <div class="B_-_Body"><a name="2387618">If you later add or remove encrypted properties in the data model, upgrader automatically runs on server startup to update the main database to the new data model.</a></div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2428153">The upgrader does not upgrade claim snapshots or archive databases during the normal upgrade process. For important information about upgrading claim snapshots and archive databases, see </a><a href="javascript:WWHClickedPopup('integration', 'encryption.21.4.html#2428209', '');" title="Encryption Changes with Snapshots">“Encryption Changes with Snapshots”</a>.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>