<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Handling XSD Choices in XML</title>
    <link rel="StyleSheet" href="css/xml.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>Gosu Reference Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="xml.21.01.html#1865750">Gosu and XML</a> : <a class="WebWorks_Breadcrumb_Link" href="xml.21.31.html#1865750">Legacy XML APIs: Structured XML Using XSDs</a> : Handling XSD Choices in XML</span></div>
    <hr align="left" />
    <blockquote>
      <h4 class="H2B_-_Heading_2_Break"><a name="1865750">Handling XSD Choices in XML</a></h4>
      <div class="B_-_Body"><a name="1865751">There are several things to know about XSD choices, which constrain XML documents to contain only one of several different elements. </a></div>
      <div class="B_-_Body"><a name="1865752">For example, the following is a simple XSD that contains a choice:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1865753">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865754">&lt;xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865755">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865756">  &lt;xsd:element name="HomePhone" type="xsd:string"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865757">  &lt;xsd:element name="WorkPhone" type="xsd:string"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865758">  &lt;xsd:element name="MobilePhone" type="xsd:string"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865759">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865760">  &lt;xsd:element name="LastVerifiedBy" type="xsd:string"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865761">  &lt;xsd:element name="LastVerifiedDate" type="xsd:date"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865762">  </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865763">  &lt;xsd:element name="PhoneNumber"&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865764">    &lt;xsd:complexType&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865765">      &lt;xsd:sequence&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865766">      &lt;xsd:element ref="LastVerifiedBy" minOccurs="0"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865767">      &lt;xsd:element ref="LastVerifiedDate" minOccurs="0"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865768">       &lt;xsd:choice&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865769">        &lt;xsd:element ref="HomePhone"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865770">        &lt;xsd:element ref="WorkPhone"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865771">        &lt;xsd:element ref="MobilePhone"/&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865772">      &lt;/xsd:choice&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865773">      &lt;/xsd:sequence&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865774">    &lt;/xsd:complexType&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865775">  &lt;/xsd:element&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865776">&lt;/xsd:schema&gt;</a></PRE>
      <div class="B_-_Body"><a name="1865777">Save this XSD as the file:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="1865781">ClaimCenter/modules/configuration/gsrc/</a><span class="s_-_strong">mycompany/messaging/ChoiceTest.xsd</span></div>
      <div class="B_-_Body"><a name="1865782">From a programming perspective, generally speaking Gosu creates a new object that represents the choice itself and creates subobjects and special properties on the choice group object. If an XSD element has only one choice subelement and the choice is not the element’s root, access the choice object through the </a><span class="cv_-_computer_voice">choice</span> property on the parent object. </div>
      <div class="B_-_Body"><a name="1865783">If there is more than one choice in an element, access additional choices through the properties </a><span class="cv_-_computer_voice">property2</span>, <span class="cv_-_computer_voice">property3</span>, and so on. To access individual subobjects for each choice within that choice group, Gosu creates subobjects (and in some cases, other shortcut properties). You can access these subobjects through the choice object by the individual choice’s ID. Gosu creates one or two properties for each choice, depending on whether the type is a simple type. If it is a simple type, such as an <span class="cv_-_computer_voice">XSDString</span> or <span class="cv_-_computer_voice">XSDInt</span>, Gosu encodes it as a text value with no child elements.</div>
      <div class="B_-_Body"><a name="1865784">If the type of the choice is a complex type, Gosu creates one property on the choice object for the choice:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1865785">The element property’s name matches the ID of the choice value, with no suffix. This property sets or gets the element itself. Use the new operator as necessary to create new elements to assign to those properties, such as the following example (does not use the earlier XSD example):</a></div>
            </td>
          </tr>
        </table>
      </div>
      <PRE class="CF_-_Code_First_Line"><a name="1865786">var a = new mycompany.messaging.ChoiceTest.MyCustomComplexType()</a></PRE>
      <div class="B_-_Body"><a name="1865787">If the type of the choice is a simple type, Gosu creates two properties:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1865788">A shortcut property for each choice with a name matching the ID of the choice value. This property sets or gets the contents of the element. If Gosu can coerce the Gosu data to the appropriate type, Gosu implicitly coerces for set and get operations. In this case, in this case Gosu can coerce a </a><span class="cv_-_computer_voice">String</span> to the value of an <span class="cv_-_computer_voice">XSDString</span>. With the example XSD, the <span class="cv_-_computer_voice">PhoneNumber</span> choice element has properties <span class="cv_-_computer_voice">HomePhone</span>, <span class="cv_-_computer_voice">WorkPhone</span>, and <span class="cv_-_computer_voice">MobilePhone</span>. Those choices are simple types, specifically the <span class="cv_-_computer_voice">XSDString</span> type.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1865789">An element property with a name matching the ID of the choice value, with the suffix “</a><span class="cv_-_computer_voice">_elem</span>”. This property sets or gets the element itself. Accessing the element directly is most important if you need to get or set attributes on the element itself. With the example XSD, the <span class="cv_-_computer_voice">PhoneNumber</span> choice element as properties <span class="cv_-_computer_voice">HomePhone_elem</span>, <span class="cv_-_computer_voice">WorkPhone_elem</span>, and <span class="cv_-_computer_voice">MobilePhone_elem</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="1865790">If the type is a simple type, the type gets a shortcut property to get and set the value and an element property with the </a><span class="cv_-_computer_voice">_elem</span> suffix. Otherwise, Gosu cannot create the shortcut property to get or set the value, so the element property has the property name with no suffix.</div>
      <div class="B_-_Body"><a name="1865791">The following code using the example XSD sets the contents of the home phone element with a standard </a><span class="cv_-_computer_voice">String</span>:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1865792">var a = new mycompany.messaging.ChoiceTest.PhoneNumber()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865793">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865794">// Set the choice value using a special shortcut that creates a choice child element and sets a value.</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1865795">a.choice.HomePhone = "415 555 1212"</a></PRE>
      <div class="B_-_Body"><a name="1865796">The following code sets the contents of the home phone element with a standard </a><span class="cv_-_computer_voice">String</span>. Once the choice’s child element exists (and thus is now non-<span class="cv_-_computer_voice">null</span>), use the <span class="cv_-_computer_voice">HomePhone_elem</span> property to access the element directly.</div>
      <PRE class="CF_-_Code_First_Line"><a name="1865797">var a = new mycompany.messaging.ChoiceTest.PhoneNumber()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865798">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865799">print(a.choice.HomePhone_elem)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// print NULL -- no choice is selected, subobjects=null</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865800">a.choice.HomePhone = "415 555 1212"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// CREATE the element subproperty. It is now non-null</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865801">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865802">// Use the new element to access the value property.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865803">a.choice.HomePhone_elem.value = "415 867 5309"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865804">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865805">// Use the new element to set or get attributes.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865806">a.choice.HomePhone_elem.attributes["extension"] = "x12345"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865807">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865808">print(a.asUTFString())</a></PRE>
      <div class="B_-_Body"><a name="1865809">This code prints:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1865810">null</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865811">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865812">&lt;PhoneNumber&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865813">  &lt;HomePhone extension="x12345"&gt;415 867 5309&lt;/HomePhone&gt;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1865814">&lt;/PhoneNumber&gt;</a></PRE>
      <div class="B_-_Body"><a name="1865815">Since the premise of a choice is that no more than one of the choices can be chosen at any one time, Gosu enforces this requirement. If you set the value of one of the choices, any previous choices are removed. Gosu does this by setting the subelement for that choice to </a><span class="cv_-_computer_voice">null.</span> If there is a shortcut property for the value of a simple type, getting that property also returns <span class="cv_-_computer_voice">null</span>. In the example XSD, this means that if you set the home phone, then set the work phone, that the <span class="cv_-_computer_voice">HomePhone</span> and <span class="cv_-_computer_voice">HomePhone_elem</span> properties now have the value <span class="cv_-_computer_voice">null</span>.</div>
      <div class="B_-_Body"><a name="1865816">For example, take the following Gosu code:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865817">var a = new mycompany.messaging.ChoiceTest.PhoneNumber()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865818">print(a.choice.HomePhone_elem) &nbsp;&nbsp;&nbsp;&nbsp;// print NULL -- no choice is selected, subobjects=null</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865819">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865820">a.Choice.HomePhone = "415 555 1212"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865821">a.Choice.WorkPhone = "415 666 1234"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865822">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865823">// The home choice is now null, because it was replaced by the workphone.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865824">print(a.Choice.HomePhone_elem)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865825">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865826">// The home choice element value shortcut also returns null</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865827">print(a.Choice.HomePhone)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865828">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865829">// Print the work phone, but which phone number is now the work phone?</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865830">print(a.Choice.WorkPhone)</a></PRE>
      <div class="B_-_Body"><a name="1865831">It prints the following:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1865832">null</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865833">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865834">null</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865835">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865836">null</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865837">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1865838">415 666 1234</a></PRE>
      <div class="B_-_Body"><a name="1865839">If you get the value and that is not the current selection (not the current choice of the choice group), Gosu always returns </a><span class="cv_-_computer_voice">null</span>. If you are setting the value for the choice and it is not already the current selection, it sets that value as the choice and removes any previous choice.</div>
      <div class="B_-_Body"><a name="1865840">If a choice has never been for that element yet, the properties for all choice elements have the value </a><span class="cv_-_computer_voice">null</span>.</div>
      <div class="B_-_Body"><a name="1865845">Also see </a><a href="javascript:WWHClickedPopup('gosu', 'xml.21.31.html#1865623', '');" title="Legacy XML APIs: Structured XML Using XSDs">“What Types Does Gosu Generate?”</a></div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1865846">If a Choice is Root of an Element</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1865847">There is a special case if a choice element is defined at the root of the element, rather than enclosed in a sequence or other type of structure. If this is the case, you do not need to type the </a><span class="cv_-_computer_voice">root.Choice</span>.<span class="ps_-_parameter_in_code_snippets">choicename</span> syntax because it is unnecessary to disambiguate the choices from other properties on the element. Instead, the property names appear directly on the root element rather than a separate subobject accessible using the <span class="cv_-_computer_voice">choice</span> property.</div>
      <div class="B_-_Body"><a name="1865848">Using the example XSD, note the definition of the </a><span class="cv_-_computer_voice">Email</span> element has a choice as the root of the element. Consequently, the properties that normally would appear on the <span class="cv_-_computer_voice">choice</span> subobject are flattened such as they appear on the root.</div>
      <div class="B_-_Body"><a name="1865849">For example, do not write this:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1865850">var a = new mycompany.messaging.ChoiceTest.Email()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865851">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865852">a.choice.HomeEmail = "abc@def.com"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865853">print(a.choice.HomeEmail_elem.value)</a></PRE>
      <div class="B_-_Body"><a name="1865854">Instead, Gosu creates choice properties directly on the root element, so use code such as the following:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1865855">var a = new mycompany.messaging.ChoiceTest.Email()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865856">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865857">a.HomeEmail = "abc@def.com"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1865858">print(a.HomeEmail_elem.value)</a></PRE>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>