<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Useful Properties and Methods on Result Objects</title>
    <link rel="StyleSheet" href="css/querybuilder.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>Gosu Reference Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="querybuilder.10.01.html#2239264">Query Builder APIs</a> : <a class="WebWorks_Breadcrumb_Link" href="querybuilder.10.26.html#2239264">Working with Results</a> : Useful Properties and Methods on Result Objects</span></div>
    <hr align="left" />
    <blockquote>
      <h4 class="H2B_-_Heading_2_Break"><a name="2239264">Useful Properties and Methods on Result Objects</a></h4>
      <div class="B_-_Body"><a name="2239265">Query result objects have these useful properties:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2239266">Empty</a></span> – Lets you determine whether a query failed to fetch any matching items. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="2239270">See </a><a href="javascript:WWHClickedPopup('gosu', 'querybuilder.10.30.html#2239289', '');" title="Useful Properties and Methods on Result Objects">“Determining Whether a Query Returned No Results”</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2239271">Count</a></span> – Returns the number of items in the result. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="2239275">See </a><a href="javascript:WWHClickedPopup('gosu', 'querybuilder.10.30.html#2239336', '');" title="Useful Properties and Methods on Result Objects">“Result Counts and Dynamic Queries”</a>.</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2239276">AtMostOneRow</a></span> – Lets you specify that you want the query to return a result only if a single item matches the query predicates. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="2239280">See </a><a href="javascript:WWHClickedPopup('gosu', 'querybuilder.10.30.html#2239383', '');" title="Useful Properties and Methods on Result Objects">“Returning Only Unique Items”</a>. </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2239281">FirstResult</a></span> – Lets you access the first item in a result without iterating the result object. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="2271121">See </a><a href="javascript:WWHClickedPopup('gosu', 'querybuilder.10.30.html#2271114', '');" title="Useful Properties and Methods on Result Objects">“Accessing the First Item in a Result”</a>.</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2335941">getCountLimitedBy</a></span> – Lets you determine if the result will contain more items than you can use. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP_-_List_Para"><a name="2335958">See </a><a href="javascript:WWHClickedPopup('gosu', 'querybuilder.10.30.html#2336089', '');" title="Useful Properties and Methods on Result Objects">“Determining if a Result Will Return Too Many Items”</a>.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2239289">Determining Whether a Query Returned No Results</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2239290">Sometimes you write queries that return no results under certain conditions. This often occurs with queries that include predicates that users provide through the user interface. For example, the user interface lets users search for people by name. A user wants to look up someone whose name is “John Smith.” The database could have several matches, or it could have none. </a></div>
      <div class="B_-_Body"><a name="2239291">Your user interface displays a list of names when there is match or the message “No one found with that name” when there is none. Use the </a><span class="cv_-_computer_voice">Empty</span> property on a result object to determine whether a query returned any results.</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239298">result = query.select()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239299">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2239300">if (result.</a><span class="s_-_strong">Empty</span>) {</PRE>
      <div class="B_-_Body"><a name="2239302">As an alternative, you could iterate a result object inside a </a><span class="cv_-_computer_voice">while</span> loop with a counter and test the counter for zero afterwards. Or, you might the <span class="cv_-_computer_voice">Count</span> property against zero. However, relational query performance often improves when you use the <span class="cv_-_computer_voice">Empty</span> property. </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2239336">Result Counts and Dynamic Queries</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2239337">A query is always dynamic and returns results that may change if you use the object again. Some results may have been added, changed, or removed from the database from one use of the query object to another use of the query, even within the same function.</a></div>
      <div class="B_-_Body"><a name="2239338">The </a><span class="cv_-_computer_voice">Count</span> property of a query gets the current count of items. A common mistake is to rely on the count number remaining constant. That number might be useful in some contexts such as simple user interface display such as “displaying items 1-10 out of 236 results”. However, it might be different from the number of items returned from a query even if you iterate across it immediately afterward. Some results may add, change, or remove from the database between the time you call the <span class="cv_-_computer_voice">count</span> method and when you iterate across it.</div>
      <h6 class="HS_-_Head_Sub"><a name="2239339">Bad Example:</a></h6>
      <PRE class="CF_-_Code_First_Line"><a name="2239340">// Bad example. Do NOT follow this example. Do NOT rely on the result count staying constant! </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239341">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239342">// create a query</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239343">var query = Query.make(TestA)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239344">query.compare("A", Equals, 11)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239345">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239346">// THE FOLLOWING LINE IS UNSAFE</a></PRE>
      <PRE class="CM_-_Code_Middle_Line" style="font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span class="s_-_strong"><a name="2239347">var myArray = new Claim[ query.select().count() ]</a></span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239348">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239349">For ( x in query.select() index y )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239350">{</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239351">&nbsp;&nbsp;&nbsp;// this line throws out of bounds exception if more results appear since the count was calculated</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239352">&nbsp;&nbsp;&nbsp;myArray[y] = x </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2239353">}</a></PRE>
      <div class="B_-_Body"><a name="2239354">In most cases, code like this risks throwing array-out-of-bounds errors at run time. </a></div>
      <div class="B_-_Body"><a name="2239355">Instead, iterate across the set and count upward, appending query result entities to a </a><span class="cv_-_computer_voice">List</span>.</div>
      <h6 class="HS_-_Head_Sub"><a name="2239356">Good Example:</a></h6>
      <PRE class="CF_-_Code_First_Line"><a name="2239358">uses java.util.ArrayList</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239359">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239360">var query = Query.make(User)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239361">query.compare("IntegerExt", NotEquals, 11)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239362">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239363">// create a new list, and use generics to parameterize it</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239364">var myList = new ArrayList&lt;User&gt;()   </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239365">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239366">var maxResult = 100</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239367">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239368">for ( x in query.select() index i)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239369">{</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239370">   if (i &gt; maxResult) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239371">     break</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239372">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239373">  </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239374">  // add a search result to the list</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239375">  myList.add(x) </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2239376">}</a></PRE>
      <div class="B_-_Body"><a name="2239377">The important thing to remember is that calling </a><span class="cv_-_computer_voice">query.select()</span> does not snapshot the current value of the result set forever. When you access the <span class="cv_-_computer_voice">query.select().Count</span> property, ClaimCenter runs the query but the query contents can change quickly. Database changes could happen in another thread on the current server or on another server in the cluster. </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2239383">Returning Only Unique Items</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="CS_-_Code_Single_Line"><a name="2239386">var uniquePerson = query.select().</a><span class="s_-_strong">AtMostOneRow </span></div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2271114">Accessing the First Item in a Result</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2271115">Sometimes you want only the first item in a result, regardless how many instances the database fetched. Use the </a><span class="cv_-_computer_voice">FirstResult</span> property on a result object to obtain its first item.</div>
      <PRE class="CL_-_Code_Last_Line"><a name="2239419">firstPerson = query.select().</a><span class="s_-_strong">FirstResult</span></PRE>
      <div class="B_-_Body"><a name="2271149">As an alternative, you can iterate a result and stop after retrieving the first item. However, relational query performance often improves when you use the </a><span class="cv_-_computer_voice">FirstResult</span> property to access the only the first item in a result. </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2336089">Determining if a Result Will Return Too Many Items</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2336090">When you develop search pages for the user interface, you may want to limit the number of results that you display in the list view. For example, if a user provides little or no search criteria, the number of items returned could be overwhelming. The </a><span class="cv_-_computer_voice">getCountLimitedBy</span> method on result objects lets you efficiently determine how many items a result will return, without fetching all the data from the database. If it will return too many items, your search page can prompt the user to narrow the selection by providing more specific criteria. </div>
      <div class="B_-_Body"><a name="2336091">With the </a><span class="cv_-_computer_voice">getCountLimitedBy</span> method, you specify a <span class="e_-_emphasis">threshold</span>. The threshold is the number of items that is too many. In other words, the threshold is the maximum number of items that you want, plus one. If the number of items that the result will contain falls below the threshold, the method returns the actual result count. On the other hand, if the number of items is at or above the threshold, the method returns the threshold, not the actual result count. </div>
      <div class="B_-_Body"><a name="2336092">For example, you want to limit search results to three hundred items. Pass the number 301 to the </a><span class="cv_-_computer_voice">getCountLimitedBy</span> method, and check the value that the method returns. If the method returns a number less than 301, the result will be within your upper bound, so you can safely iterate the result. If the method returns 301, the result will cross the threshold. In this case, prompt the user to provide more precise search criteria to narrow the result.</div>
      <div class="B_-_Body"><a name="2336093">The following Gosu sample code demonstrates how to use the </a><span class="cv_-_computer_voice">getCountLimitedBy</span> method.</div>
      <PRE class="CF_-_Code_First_Line"><a name="2336094">uses gw.api.database.Query</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336095">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2481957">// -- query for addresses in the city of Chicago</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336096">var query = Query.make(Address)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336097">query.compare("City", Equals, "Chicago")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336098">var result = query.select()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336099">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336100">// -- specify the threshold for too many items in the result --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336101">var threshold = </a><span class="s_-_strong">301</span> &nbsp;// -- 301 or higher is too many</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336102">result.</a><span class="s_-_strong">getCountLimitedBy(threshold)</span> </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336103">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336104">// -- test whether the result count crosses the threshold --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><span class="s_-_strong"><a name="2336105">if (result.getCountLimitedBy(threshold ) &lt; threshold )</a></span> { </PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336106">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336107">		&nbsp;&nbsp;&nbsp;&nbsp;// -- iterate the results --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336108">&nbsp;&nbsp;&nbsp;&nbsp;for (address in result) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336109">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print (address.AddressLine1 + ", " + address.City  + ", " + address.PostalCode)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336110">&nbsp;&nbsp;&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336111">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336112">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336113">&nbsp;&nbsp;else { </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336114">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336115">&nbsp;&nbsp;&nbsp;&nbsp;// -- prompt for more criteria --</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336116">&nbsp;&nbsp;&nbsp;&nbsp;print ("The search will return too many items!") </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2336117">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2336118">} </a></PRE>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>