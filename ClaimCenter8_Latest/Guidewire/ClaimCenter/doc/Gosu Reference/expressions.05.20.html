<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Handling Null Values In Expressions</title>
    <link rel="StyleSheet" href="css/expressions.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>Gosu Reference Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="expressions.05.01.html#1655838">Gosu Operators and Expressions</a> : Handling Null Values In Expressions</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="1655838">Handling Null Values In Expressions</a></h3>
      <h4 class="H2_-_Heading_2"><a name="1655840">Null-safe Property Access</a></h4>
      <div class="B_-_Body"><a name="1655841">A property path expression in Gosu is a series of property accesses in series, for example </a><span class="cv_-_computer_voice">x.P1.P2.P3</span>. There are two different operators you can use in Gosu to get property values:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1597710">The standard period operator “</a><span class="cv_-_computer_voice">.</span>”, which can access properties or invoke methods. The standard period operator is only null-safe for properties, and not for method invocations.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1601235">The null-safe period operator “</a><span class="cvt_-_computer_voice_table">?.</span>”, which can access properties or invoke methods in a null-safe way. For properties, this is the same as the standard period operator. For methods you must this operator if you want a null-safe method invocation.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1601236">How the Standard Period Operator Handles Null</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1654450">The standard “.” operator has a special behavior that some languages do not have. If any object property in a property path expression evaluates to </a><span class="cv_-_computer_voice">null</span>, in Gosu the entire path evaluates to <span class="cv_-_computer_voice">null</span>. In essence, a <span class="cv_-_computer_voice">null</span> value anywhere along the way in a object path short-circuits evaluation and results in a <span class="cv_-_computer_voice">null</span> value, with no exception being thrown. This feature is called <span class="e_-_emphasis">null-safe shortcircuiting</span> for a property path expression.</div>
      <div class="B_-_Body"><a name="1654451">For example, suppose that you have an expression similar to the following: </a></div>
      <div class="CS_-_Code_Single_Line"><a name="1654452">var groupType = claim.AssignedGroup.GroupType </a></div>
      <div class="B_-_Body"><a name="1654453">Remember that if any element in the path evaluates to </a><span class="cv_-_computer_voice">null</span>, the entire expression evaluates to <span class="cv_-_computer_voice">null</span>. If <span class="cv_-_computer_voice">claim</span> is <span class="cv_-_computer_voice">null</span>, the result is <span class="cv_-_computer_voice">null</span>. Also, if <span class="cv_-_computer_voice">claim.AssignedGroup</span> is <span class="cv_-_computer_voice">null</span>, the result is <span class="cv_-_computer_voice">null</span>.</div>
      <div class="B_-_Body"><a name="1654454">If the expression contains a method call, the rules are different. The period operator does not default to null if the left side of the period is </a><span class="cv_-_computer_voice">null</span>. With the standard period operator, if the value on the left of the period is <span class="cv_-_computer_voice">null, </span>Gosu throws a null pointer exception (<span class="cv_-_computer_voice">NullPointerException</span>). In other words, method calls are not null-safe because the method could have side effects. </div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="1654455">Technically speaking, property access from a dynamic </a><span class="cv_-_computer_voice">property get</span> function could generate side effects, but this is strongly discouraged. If a property accessor has any side effects, convert the accessor into a method.</div>
      <h6 class="HS_-_Head_Sub"><a name="1654456">Example 1</a></h6>
      <div class="B_-_Body"><a name="1654457">Suppose that you have an expression similar to the following:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="1654458">claim.AssignedGroup.addEvent("abc")</a></div>
      <div class="B_-_Body"><a name="1654459">In this case, if either </a><span class="cv_-_computer_voice">claim</span> or <span class="cv_-_computer_voice">claim.AssignedGroup</span> evaluate to <span class="cv_-_computer_voice">null</span>, Gosu throws an <span class="cv_-_computer_voice">NullPointerException</span>. The method call follows the <span class="cv_-_computer_voice">null</span> value. </div>
      <h6 class="HS_-_Head_Sub"><a name="1654460">Example 2</a></h6>
      <div class="B_-_Body"><a name="1654461">Suppose that you have an expression similar to the following:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="1654462">claimant.getSpecialContactRelationship().Contact.Name </a></div>
      <div class="B_-_Body"><a name="1654463">If </a><span class="cv_-_computer_voice">Contact</span> is <span class="cv_-_computer_voice">null</span>, the expression evaluates to <span class="cv_-_computer_voice">null</span>. Similarly, if <span class="cv_-_computer_voice">getSpecialContactRelationship()</span> evaluates to <span class="cv_-_computer_voice">null</span>, the expression evaluates to <span class="cv_-_computer_voice">null</span>. </div>
      <div class="B_-_Body"><a name="1654464">However, remember that evaluation in the expression is left-to-right. If </a><span class="cv_-_computer_voice">claimant</span> is <span class="cv_-_computer_voice">null</span>, the expression throws an exception because Gosu cannot call a method on <span class="cv_-_computer_voice">null</span>. </div>
      <h6 class="HS_-_Head_Sub"><a name="1654465">Example 3</a></h6>
      <div class="B_-_Body"><a name="1654466">For those cases in which Gosu expects a Boolean value (for example, in an </a><span class="cv_-_computer_voice">if</span> statement), a <span class="cv_-_computer_voice">null</span> value coerces to <span class="cv_-_computer_voice">false</span> in Gosu. This is true regardless of whether the expression’s value was short-circuited. For example, the following <span class="cv_-_computer_voice">if</span> statement prints “Benefits decision not made yet”, even if <span class="cv_-_computer_voice">claim</span> or <span class="cv_-_computer_voice">claim.BenefitsStatusDcsn</span> is <span class="cv_-_computer_voice">null</span>: </div>
      <PRE class="CF_-_Code_First_Line"><a name="1654467">if( not claim.BenefitsStatusDcsn ) { </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1654468">&nbsp;&nbsp;print( "Benefits decision not made yet" ) </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1654469">}</a></PRE>
      <h6 class="HS_-_Head_Sub"><a name="1654470">Primitives and Null-Safe Paths</a></h6>
      <div class="B_-_Body"><a name="1654471">Gosu null-safety for property paths does not work if the type of the entire expression is a Gosu primitive type. This is equivalent to saying it does not work if the type of the last item in the series of property accesses has a primitive type. For example, suppose you use the property path:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="1654472">a.P1.P2.P3 </a></div>
      <div class="B_-_Body"><a name="1654473">Using null-safe paths means that Gosu automatically returns </a><span class="cv_-_computer_voice">null</span> if any of the following are <span class="cv_-_computer_voice">null</span>:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap; color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="1654474">a</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap; color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="1654475">a.P1</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap; color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="1654476">a.P1.P2</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1654477">However, if the type of the </a><span class="cv_-_computer_voice">P3</span> property is <span class="cv_-_computer_voice">int</span> or <span class="cv_-_computer_voice">char</span> or another primitive type, then the expression <span class="cv_-_computer_voice">a.P1.P2.P3</span> is not null safe.</div>
      <div class="B_-_Body"><a name="1654478">Primitive types (in contrast to object types, which are descendents of </a><span class="cv_-_computer_voice">Object</span>) can never contain the value <span class="cv_-_computer_voice">null</span>. Thus Gosu cannot return <span class="cv_-_computer_voice">null</span> from that expression, and any casting from <span class="cv_-_computer_voice">null</span> to the primitive type would be meaningless. Therefore, Gosu throws a null pointer exception in those conditions.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1597755">How the Null-Safe Period Operator Handles Null</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1597694">In contrast to the standard period character operator, the null-safe period operator </a><span class="cv_-_computer_voice">?.</span> always returns <span class="cv_-_computer_voice">null</span> if the left side of the operator is <span class="cv_-_computer_voice">null</span>. This works both for accessing properties and for invoking methods. If the left side of the operator is <span class="cv_-_computer_voice">null</span>, Gosu does not evaluate the right side of the expression.</div>
      <div class="B_-_Body"><a name="1654483">The null-safe operator is particularly important for invoking methods because for methods, the standard period operator throws an exception if the left side of the period is </a><span class="cv_-_computer_voice">null</span>.</div>
      <div class="B_-_Body"><a name="1654484">For property access in Gosu, the standard period and the null-safe period operator are equivalent. The period operator is already null-safe.</a></div>
      <h4 class="H2_-_Heading_2"><a name="1606622">Null-safe Default Operator</a></h4>
      <div class="B_-_Body"><a name="1598062">Sometimes you might need to return a different value based on whether some expression evaluates to </a><span class="cv_-_computer_voice">null</span>. The Gosu operator <span class="cv_-_computer_voice">?:</span> results in the value of the left-hand-side if it is non-null, avoiding evaluation of the right-hand-side. If the left-hand side expression is <span class="cv_-_computer_voice">null</span>, Gosu evaluates the right-hand-side and returns that result.</div>
      <div class="B_-_Body"><a name="1598150">For example, suppose there is a variable </a><span class="cv_-_computer_voice">str</span> of type <span class="cv_-_computer_voice">String</span>. At run time the value contains either a <span class="cv_-_computer_voice">String</span> or <span class="cv_-_computer_voice">null</span>. Perhaps you want to pass the input to a display routine. However, if the value of <span class="cv_-_computer_voice">str</span> is <span class="cv_-_computer_voice">null</span>, you want to use a default value rather than <span class="cv_-_computer_voice">null</span>. Use the <span class="cv_-_computer_voice">?:</span> operator as follows:</div>
      <div class="CS_-_Code_Single_Line"><a name="1598161">var result = str ?: "(empty)" &nbsp;&nbsp;// return str, but if the value is null return a default string</a></div>
      <h4 class="H2_-_Heading_2"><a name="1598052">Null-safe Indexing for Arrays, Lists, and Maps</a></h4>
      <div class="B_-_Body"><a name="1598273">For objects such as arrays and lists, you can access items by index number, such as </a><span class="cv_-_computer_voice">myArray[2]</span>. Similarly, with maps (<span class="cv_-_computer_voice">java.util.Map</span> objects), you can pass the key value to obtain the value. For example with a <span class="cv_-_computer_voice">Map&lt;String, Integer&gt;</span>, you could use the expression <span class="cv_-_computer_voice">myMap["myvalue"]</span>. The challenge with indexes is that if the object at run time has the value null, code like this throws a null pointer exception. </div>
      <div class="B_-_Body"><a name="1621225">Gosu provides an alternative version of the indexing operator that is null-safe. Instead of simply typing the indexing subexpression, such as </a><span class="cv_-_computer_voice">[2]</span> after an object, prefix the expression with a question mark character. For example:</div>
      <div class="CS_-_Code_Single_Line"><a name="1621226">var v = myArray</a><span class="s_-_strong">?</span>[2]</div>
      <div class="B_-_Body"><a name="1621227">If the value to the left of the question mark is </a><span class="cv_-_computer_voice">null</span>, the entire expression for the operator returns <span class="cv_-_computer_voice">null</span>. If the left-hand-operand is not <span class="cv_-_computer_voice">null</span>, Gosu looks inside the index subexpression and evaluates it and indexes the array, list or map. Finally, Gosu returns the result, just like the regular use of the angled brackets for indexing lists, arrays, and maps.</div>
      <h4 class="H2_-_Heading_2"><a name="1597472">Null-safe Math Operators</a></h4>
      <div class="B_-_Body"><a name="1597533">Gosu provides null-safe versions of common math operators. </a></div>
      <div class="B_-_Body"><a name="1597534">For example, the standard operators for addition, subtraction, multiplication, division, and modulo are as follows: </a><span class="cv_-_computer_voice">+</span>, <span class="cv_-_computer_voice">-</span>, <span class="cv_-_computer_voice">*</span>, <span class="cv_-_computer_voice">/</span>, and <span class="cv_-_computer_voice">%</span>. If you use these standard operators and either side of the operator is <span class="cv_-_computer_voice">null</span>, Gosu throws a <span class="cv_-_computer_voice">NullPointerException</span> exception.</div>
      <div class="B_-_Body"><a name="1597618">In contrast, the null-safe operators are the same symbols but with a question mark (</a><span class="cv_-_computer_voice">?</span>) character preceding it. In other words, the null-safe operators are: <span class="cv_-_computer_voice">?+</span>, <span class="cv_-_computer_voice">?-</span>, <span class="cv_-_computer_voice">?*</span>, <span class="cv_-_computer_voice">?/</span>, and <span class="cv_-_computer_voice">?%.</span></div>
      <div class="B_-_Body"><a name="1597661">&nbsp;</a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>