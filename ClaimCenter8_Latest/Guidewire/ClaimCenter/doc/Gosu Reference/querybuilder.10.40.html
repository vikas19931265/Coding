<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Working with Advanced Inline Views</title>
    <link rel="StyleSheet" href="css/querybuilder.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>Gosu Reference Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="querybuilder.10.01.html#2239651">Query Builder APIs</a> : <a class="WebWorks_Breadcrumb_Link" href="querybuilder.10.33.html#2239651">Testing and Optimizing Queries</a> : Working with Advanced Inline Views</span></div>
    <hr align="left" />
    <blockquote>
      <h4 class="H2B_-_Heading_2_Break"><a name="2239651">Working with Advanced Inline Views</a></h4>
      <div class="B_-_Body"><a name="2239652">You can optionally create what SQL calls an in-line view of these extra columns on the join table. This is an advanced feature which is not normally needed in production code. Use this feature only if necessary due to the performance implications. If you have questions about this, contact Guidewire Customer Support.</a></div>
      <div class="B_-_Body"><a name="2239653">In-line views allow you to add extra columns to the outer query. In other words, you can add predicates to the outer query that reference those columns.</a></div>
      <div class="B_-_Body"><a name="2239654">To create an on-line view, call the </a><span class="cv_-_computer_voice">inlineView</span> method on the query. It returns a query with the new in-line view and automatically selects all referenced columns from that query in the <span class="cv_-_computer_voice">select</span> statement. It takes the following arguments:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2239655">joinColumnOnThisTable</a></span> – The name of the join column (<span class="cv_-_computer_voice">String</span>)</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2239656">inlineViewQuery</a></span> – The query (<span class="cv_-_computer_voice">Query</span>)</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="2239657">joinColumnOnViewTable</a></span> – The name of the join column on the view table (<span class="cv_-_computer_voice">String</span>)</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2239658">The method returns a new query with the in-line view. Technically the return type of the method is a </a><span class="cv_-_computer_voice">Table</span> object.</div>
      <div class="B_-_Body"><a name="2239659">For example, suppose you create two queries, a view query and an outer query:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239660">var viewQuery = Query.make(TestA)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239661">var outerQuery = Query.make(TestE)</a></PRE>
      <div class="B_-_Body"><a name="2239662">Next, make an in-line view to add the </a><span class="cv_-_computer_voice">E</span> column:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239663">var inlineView = outerQuery.inlineView("ID", viewQuery, "E")</a></PRE>
      <div class="B_-_Body"><a name="2239664">Next, use the </a><span class="cv_-_computer_voice">E</span> column from new predicates on the outer query:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239665">outerQuery.compare("E", GreaterThan, inlineView.getColumnRef(DBFunction.Max("A")))</a></PRE>
      <div class="B_-_Body"><a name="2239666">Test the code:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239667">print(outerQuery.select().AtMostOneRow.ID)</a></PRE>
      <div class="B_-_Body"><a name="2239668">This prints the ID of a </a><span class="cv_-_computer_voice">TestE</span> entity where <span class="cv_-_computer_voice">TestE.E</span> is greater than the maximum of all values of A in all <span class="cv_-_computer_voice">TestA</span>'s related to this <span class="cv_-_computer_voice">TestE</span>. This produces the following SQL statement:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239669">select * from TestE INNER JOIN (select E, Max(A) MAX_A from TestA) testA_view </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2239670">&nbsp;&nbsp;GROUP BY E ON TestE.ID = testA_view.E AND TestE.E &gt; testA_view.MAX_A</a></PRE>
      <div class="B_-_Body"><a name="2239671">Notice that automatically predicates on the join table can use columns on the join table or the primary table.</a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>