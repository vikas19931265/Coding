<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Building Simple Queries</title>
    <link rel="StyleSheet" href="css/querybuilder.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>Gosu Reference Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="querybuilder.10.01.html#2237284">Query Builder APIs</a> : Building Simple Queries</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="2237284">Building Simple Queries</a></h3>
      <div class="B_-_Body"><a name="2237285">Consider simple queries in SQL that return information from a single database table. The SQL </a><span class="cv_-_computer_voice">SELECT</span> statement specifies the table. Without further restrictions, the database returns all rows and columns of information from the table. </div>
      <div class="B_-_Body"><a name="2237286">For example, you submit the following SQL statement to a relational database. </a></div>
      <div class="CS_-_Code_Single_Line"><a name="2237287">SELECT * FROM addresses; </a></div>
      <div class="B_-_Body"><a name="2237288">In response, the relational database returns a </a><span class="Emphasis" style="font-style: italic">result set</span> that contains fetched information. A result set is like a database table, with columns and rows, that contains the information that you specified with the <span class="cv_-_computer_voice">SELECT</span> statement. In response to the preceding SQL example code, the relational database returns a result set that has the same columns and rows as the <span class="cv_-_computer_voice">addresses</span> table. </div>
      <div class="B_-_Body"><a name="2237289">In comparison with the preceding SQL example, the following Gosu sample code constructs and executes a functionally equivalent query.</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2237290">uses gw.api.database.Query &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Import the query builder APIs.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2501668">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2501669">var query = Query.</a><span class="s_-_strong">make(Address)</span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2501670">var result = query.</a><span class="s_-_strong">select()</span></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2237294">var iterator = result.</a><span class="s_-_strong">iterator() </span>// Execute the query and access the results with an iterator. </PRE>
      <div class="B_-_Body"><a name="2237295">In response, the ClaimCenter application database returns a </a><span class="Emphasis" style="font-style: italic">result</span> <span class="Emphasis" style="font-style: italic">object</span> that contains fetched entity instances. A result object is like a Gosu collection that contains entity instances of the type that you specified with the <span class="cv_-_computer_voice">make</span> method and that meet the restrictions that you added. In response the <span class="cv_-_computer_voice">interator</span> method in the preceding Gosu sample code, the application database fetches all Address instances from the application database into the result object. </div>
      <h4 class="H2_-_Heading_2"><a name="2237297">Restricting the Results of a Simple Query</a></h4>
      <div class="B_-_Body"><a name="2237298">Generally, you want to restrict the information that queries return from a database instead of selecting all the information that the database contains. With SQL, the </a><span class="cv_-_computer_voice">WHERE</span> clause lets you specify Boolean expressions that data must satisfy to be included in the result. </div>
      <div class="B_-_Body"><a name="2237299">For example, you submit the following SQL statement to a relational database.</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2237300">SELECT * FROM addresses</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2237301">&nbsp;&nbsp;&nbsp;&nbsp;</a><span class="s_-_strong">WHERE city = "Chicago"</span>;</PRE>
      <div class="B_-_Body"><a name="2237303">In response, the relational database returns a result set with addresses only in the city of Chicago. In the preceding SQL example, the Boolean expression applies the predicate </a><span class="cv_-_computer_voice">=&nbsp;"Chicago"</span> to the column <span class="cv_-_computer_voice">city</span>. The expression asserts that addresses in the result set have “Chicago” as the city. </div>
      <div class="B_-_Body"><a name="2237304">In comparison with the preceding SQL example, the following Gosu sample code constructs and executes a functionally equivalent query. </a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2237305">uses gw.api.database.Query </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237306">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237307">var query = Query.make(Address)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237308">query.</a><span class="s_-_strong">compare("City", Equals, "Chicago"</span><span class="cvt_-_computer_voice_table">)</span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237309">var result = query.select()</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3437149">var iterator = result.iterator()</a></PRE>
      <div class="B_-_Body"><a name="3437150">In response to the preceding Gosu sample code, the application database fetches all </a><span class="cv_-_computer_voice">Address</span> instances from the application database that are in the city of Chicago. </div>
      <h4 class="H2_-_Heading_2"><a name="2237312">Ordering the Results of a Simple Query</a></h4>
      <div class="B_-_Body"><a name="2237313">Relational databases return result sets with rows in a seemingly random order. With SQL, the </a><span class="cv_-_computer_voice">ORDER BY</span> clause lets you specify how the database sorts fetched data. The following SQL statement sorts the result set on the postal codes of the addresses. </div>
      <PRE class="CF_-_Code_First_Line"><a name="2237314">SELECT * FROM addresses</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237315">&nbsp;&nbsp;&nbsp;&nbsp;WHERE city = "Chicago"</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2237316">&nbsp;&nbsp;&nbsp;&nbsp;</a><span class="s_-_strong">ORDER BY postal_code</span>;</PRE>
      <div class="B_-_Body"><a name="2237317">In comparison with the preceding SQL example, the following Gosu sample code sorts the instances fetched into the result object in the same way.</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2237318">uses gw.api.database.Query </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237319">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237320">var query = Query.make(Address)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237321">query.compare("City", Equals, "Chicago")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237322">var result = query.select()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237323">result.</a><span class="s_-_strong">orderBy</span>(<span class="cvt_-_computer_voice_table">\ row -&gt; row</span>.<span class="s_-_strong">PostalCode</span>) // Specify to sort the result by postal code.</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237324">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2237325">var iterator = result.iterator() // Execute the query and return an iterator to access the result.</a></PRE>
      <h4 class="H2_-_Heading_2"><a name="2237326">Accessing the Results of a Simple Query</a></h4>
      <div class="B_-_Body"><a name="2237327">Queries let you fetch information from a database and work with the results. Relational databases let you embed SQL queries in your application code so you can bind application data to SQL queries and submit them programmatically. Result sets returned by relational databases provide a programmatic cursor to let you access each result row, one after the other. </a></div>
      <div class="B_-_Body"><a name="2237328">In comparison with SQL, the query builder APIs let you embed queries naturally in your Gosu application code. You bind application data to your queries and submit then programmatically with regular Gosu syntax. Result objects returned by ClaimCenter application databases implement the </a><span class="cv_-_computer_voice">java.lang.iterable&lt;T&gt;</span> interface to let you access each entity instance in the result, one after the other. </div>
      <div class="B_-_Body"><a name="2237329">For example, the following Gosu sample code creates a query of the Address entity instances in the application database. The query binds the constant </a><span class="cv_-_computer_voice">"Chicago"</span> to the <span class="cv_-_computer_voice">compare</span> predicate on the property <span class="cv_-_computer_voice">City</span>, which restricts the results. </div>
      <PRE class="CF_-_Code_First_Line"><a name="2237330">uses gw.api.database.Query</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237331">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237332">// Specify what you want to select.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237333">var query = Query.make(Address)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237334">query.compare("City", Equals, "Chicago")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237335">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237336">// Specify how you want the result returned.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237337">var result = query.select()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237338">result.orderBy(\ row -&gt; row.PostalCode) </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237339">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237340">// Fetch the data with a for loop and print it.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237341">for (</a><span class="s_-_strong">address</span> in <span class="s_-_strong">result</span>) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237342">&nbsp;&nbsp;&nbsp;&nbsp;print (</a><span class="s_-_strong">address.AddressLine1</span> + ", " + <span class="s_-_strong">address.City</span>  + ", " + <span class="s_-_strong">address.PostalCode</span>)</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3437159">}</a></PRE>
      <div class="B_-_Body"><a name="3437160">When the preceding sample code begins the </a><span class="cv_-_computer_voice">for</span> loop, the application database fetches <span class="cv_-_computer_voice">Address</span> instances in the city of Chicago, sorts them by postal code. Then, one-by-one, the for loop passes addresses in the result to the statements inside the for block. The for block prints each address on a separate line.</div>
      <div class="B_-_Body"><a name="2237345">Alternatively, the following Gosu sample code uses an iterator with a </a><span class="cv_-_computer_voice">while</span> loop to fetch matching <span class="cv_-_computer_voice">Address</span> instances in the order specified. </div>
      <PRE class="CF_-_Code_First_Line"><a name="2237346">uses gw.api.database.Query </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237347">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2489139">// Specify what you want to select.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237349">var query = Query.make(Person)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237350">query.compare("City", Equals, "Chicago")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237351">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2489155">// Specify how you want the result returned.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237353">var result = query.select()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237354">result.orderBy(\ row -&gt; row.PostalCode) </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237355">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2489167">// Fetch the data with a for loop and print it.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><span class="s_-_strong"><a name="2237357">iterator</a></span> = result.<span class="s_-_strong">iterator()</span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237358">while (</a><span class="s_-_strong">iterator.hasNext()</span>) {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237359">&nbsp;&nbsp;&nbsp;&nbsp;var </a><span class="s_-_strong">address</span> = <span class="s_-_strong">iterator.next()</span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2237360">&nbsp;&nbsp;&nbsp;&nbsp;print (</a><span class="s_-_strong">address.AddressLine1</span> + ", " + <span class="s_-_strong">address.City</span>  + ", " + <span class="s_-_strong">address.PostalCode</span>)</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2237361">}</a></PRE>
      <div class="B_-_Body"><a name="2248859">Note that there are no consequential functional or performance differences between iterating results with a for loop and iterating results with an iterator. </a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>