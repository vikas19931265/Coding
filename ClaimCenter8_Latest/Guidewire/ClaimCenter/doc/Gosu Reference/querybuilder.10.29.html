<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Ordering Results</title>
    <link rel="StyleSheet" href="css/querybuilder.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>Gosu Reference Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="querybuilder.10.01.html#2592323">Query Builder APIs</a> : <a class="WebWorks_Breadcrumb_Link" href="querybuilder.10.26.html#2592323">Working with Results</a> : Ordering Results</span></div>
    <hr align="left" />
    <blockquote>
      <h4 class="H2B_-_Heading_2_Break"><a name="2592323">Ordering Results</a></h4>
      <div class="B_-_Body"><a name="2592324">By default, SQL Select statements and the query builder APIs return results without regard to the order of the results. However, results in random order might not be useful. So as an option, SQL and the query builder APIs let you specify the order of items in the results they return. </a></div>
      <div class="B_-_Body"><a name="2592325">With SQL, the </a><span class="cv_-_computer_voice">ORDER BY</span> clause lets you specify how the database sorts fetched data. The following SQL statement sorts the result set on the postal codes of the addresses. </div>
      <PRE class="CF_-_Code_First_Line"><a name="2592326">SELECT * FROM addresses</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592327">&nbsp;&nbsp;&nbsp;&nbsp;WHERE city = "Chicago"</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2592328">&nbsp;&nbsp;&nbsp;&nbsp;</a><span class="s_-_strong">ORDER BY postal_code</span>;</PRE>
      <div class="B_-_Body"><a name="2592329">In comparison with the preceding SQL example, the following Gosu sample code uses the </a><span class="cv_-_computer_voice">orderBy</span> ordering method to sort addresses in the same way.</div>
      <PRE class="CF_-_Code_First_Line"><a name="2592330">uses gw.api.database.Query </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592331">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592332">var queryAddresses = Query.make(Address)  // Query for addresses in Chicago. </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592333">queryAddresses.compare("City", Equals, "Chicago")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592334">var resultAddresses = queryAddresses.select()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592335">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592336">resultAddresses.</a><span class="s_-_strong">orderBy</span>(\ row -&gt; row.<span class="s_-_strong">PostalCode</span>) // Sort the result by postal code.</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592337">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2592338">var iterator = resultAddresses.iterator() // Execute the query and iterate the ordered results.</a></PRE>
      <div class="B_-_Body"><a name="2592339">The query builder APIs use the object path expressions that you pass to ordering methods to generate the </a><span class="cv_-_computer_voice">ORDER&nbsp;BY</span> clause for the SQL query. Only when you begin to iterate a result object does Gosu submit the query to the database. The database fetches the items that match the query predicates, sorts the fetched items according to the ordering methods, and returns the result items in that order. </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2592340">Ordering Methods of the Query Builder APIs</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2592341">The Query builder APIs support the following ordering methods on result objects.</a></div>
      <div class="T_-_Table"><a name="2592363">&nbsp;</a></div>
      <table class="withHeading" style="text-align: left" border="0" cellpadding="10" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2592344">Method</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="2592346">Description</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2592348">orderBy</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2592350">Clears all previous ordering, then orders results by the specified column in ascending order.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2592352">orderByDescending</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2592354">Clears all previous order methods, and orders by the specified column in descending order.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2592356">thenBy</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2592358">Orders by the specified column in ascending order. Does not clear previous ordering.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="2592360">thenByDescending</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="2592362">Orders by the specified column in descending order. Does not clear previous ordering.</a></div>
          </td>
        </tr>
      </table>
      <div class="B_-_Body"><a name="2592364">The ordering methods all take a Gosu block as their one argument. The Gosu block has the following syntax.</a></div>
      <div class="CS_-_Code_Single_Line"><a name="2592365">\ row -&gt; row.[</a><span class="pc_-_parameter_in_code">ObjectAccessPath</span>.]<span class="pc_-_parameter_in_code">SimpleProperty</span></div>
      <div class="B_-_Body"><a name="2592366">The block variable is named </a><span class="cv_-_computer_voice">row</span>, by convention. It represents an instance of the primary entity in the query result. The block code is a Gosu expression that yields an object access path from the primary entity to a simple, non-foreign key, database-backed property. </div>
      <div class="B_-_Body"><a name="2592367">For example, the following sample Gosu block specifies a simple property, the </a><span class="cv_-_computer_voice">PostalCode</span> on an <span class="cv_-_computer_voice">Address</span> instance. </div>
      <div class="CS_-_Code_Single_Line"><a name="2592368">\ row -&gt; row.PostalCode</a></div>
      <div class="B_-_Body"><a name="2592369">At compile time, Gosu checks property names in blocks against column names in the </a><span class="e_-_emphasis">Data Dictionary</span>.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2592370">Ordering Query Results on Related Instance Properties </a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2592371">The ordering methods of the query builder APIs let you order results on the properties of related entities. To do so, specify an object access path from the primary entity of the query, which the block variable </a><span class="cv_-_computer_voice">row</span> represents. The access path can traverse only database-backed foreign keys, and it must end with a simple, database-backed property. The access path cannot include virtual properties, methods, or calculations. You do not need to join the related entities to your query to reference them in the Gosu blocks that you pass to the ordering methods. </div>
      <div class="B_-_Body"><a name="2592372">The following sample Gosu code orders notes, based on the date that the activity related to a note was last viewed. </a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2592373">uses gw.api.database.Query </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592374">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592375">var queryNotes = Query.make(</a><span class="s_-_strong">Note</span>)&nbsp;&nbsp;// Query for notes.</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592376">var resultNotes = queryNotes.select()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592377">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592378">result.</a><span class="s_-_strong">orderBy</span>(\row-&gt; <span class="s_-_strong">row.Activity.LastViewedDate</span>) // Sort the notes by related date on activity.</PRE>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2592379">Multiple Levels of Ordering Query Results</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2592380">Often you need to order results on more than one column or property. For example, you query addresses and want them ordered by city. Within a city, you want them ordered by postal code. Within a postal code, you want them ordered by street. In this example, you want three levels of ordering: city, postal code, and street. </a></div>
      <div class="B_-_Body"><a name="2592381">The following SQL statement specifies three levels of ordering for addresses. </a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2592382">SELECT * FROM addresses</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592383">&nbsp;&nbsp;&nbsp;&nbsp;</a><span class="s_-_strong">ORDER BY city, postal_code, address_line1</span>;</PRE>
      <div class="B_-_Body"><a name="2592384">In comparison with the preceding SQL example, the following Gosu sample code constructs and executes a functionally equivalent query.</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="2592385">uses gw.api.database.Query </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592386">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592387">var queryAddresses = Query.make(Address)  // Query for addresses. </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592388">var resultAddresses = queryAddresses.select()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592389">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592390">resultAddresses.</a><span class="s_-_strong">orderBy</span>(\ row -&gt; row.<span class="s_-_strong">City</span>) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Sort results by city.</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="2592391">resultAddresses.</a><span class="s_-_strong">thenBy</span>(\ row -&gt; row.<span class="s_-_strong">PostalCode</span>) &nbsp;&nbsp;&nbsp;// Within a city, sort results by postal code.</PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="2592392">resultAddresses.</a><span class="s_-_strong">thenBy</span>(\ row -&gt; row.<span class="s_-_strong">AddressLine1</span>) &nbsp;// Within a postal code, sort results by street.</PRE>
      <div class="B_-_Body"><a name="2592393">You can call the ordering methods </a><span class="cv_-_computer_voice">thenBy</span> and <span class="cv_-_computer_voice">thenByDescending</span> as many times as you need.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="2592394">Locale Sensitivity for Ordering Query Results</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2592395">The query builder APIs order query results by using locale-sensitive comparisons automatically. In contrast, collection enhancement methods for ordering rely on comparison methods built into the Java interface </a><span class="cv_-_computer_voice">java.lang.Comparable</span>. Those methods do not sort <span class="cv_-_computer_voice">String</span> values in a locale-sensitive way.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>