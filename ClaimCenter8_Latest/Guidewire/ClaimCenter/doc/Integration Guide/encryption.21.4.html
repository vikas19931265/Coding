<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Encryption Changes with Snapshots</title>
    <link rel="StyleSheet" href="css/encryption.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-plugins.html#2428209">Plugins</a> : <a class="WebWorks_Breadcrumb_Link" href="encryption.21.1.html#2428209">Encryption Integration</a> : Encryption Changes with Snapshots</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="2428209">Encryption Changes with Snapshots</a></h3>
      <div class="B_-_Body"><a name="2428210">On server startup, upgrader updates update encryption settings in the database if you do any of the following:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2428211">Add encrypted properties</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2428212">Remove encrypted properties</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2428213">Add an encryption plugin for the first time.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2428214">Change the encryption algorithm. The server looks for a changed value for the encryption ID of the current encryption plugin. For related information, see </a><a href="javascript:WWHClickedPopup('integration', 'encryption.21.3.html#2388115', '');" title="Changing Your Encryption Algorithm Later">“Changing Your Encryption Algorithm Later”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2428218">However, the upgrader does not upgrade claim snapshots during the normal upgrade process. </a></div>
      <div class="B_-_Body"><a name="2428219">After startup, a work queue runs. Eventually that work queue converts all claim snapshots to use the current encryption settings. First the work queue decrypts if necessary then encrypts with the current encryption algorithm. </a></div>
      <div class="B_-_Body"><a name="2428220">Additionally, claim snapshots can upgrade on demand for the user interface. Suppose the work queue is running but is not complete and did not upgrade some claim snapshots. If a user views one of those claim snapshots, ClaimCenter immediately upgrades the encryption in the snapshot as part of accessing the snapshot.</a></div>
      <div class="B_-_Body"><a name="2428221">To control the number of claim snapshots the work queue upgrades at one time, set the </a><span class="cv_-_computer_voice">SnapshotEncryptionUpgradeChunkSize</span> configuration parameter. Set that parameter to the number of claims to upgrade each time the worker runs. Typically the worker runs once a day, but it is configurable.</div>
      <div class="B_-_Body"><a name="2428222">To force the work queue to upgrade all snapshots all at once, set the </a><span class="cv_-_computer_voice">SnapshotEncryptionUpgradeChunkSize</span> parameter to 0. Next, after the usual database upgrade completes, manually run the Encryption Upgrade work queue writer from the tools page. However, before setting <span class="cv_-_computer_voice">SnapshotEncryptionUpgradeChunkSize</span> to 0 to process all snapshots, consider carefully the implications. Depending on the workload, this work queue can use server resources for a long time. For many companies, it is preferable to convert one chunk of snapshots every night at 1:00 a.m. when server usage is low.</div>
      <div class="B_-_Body"><a name="2428225">For details of the Encryption Upgrade work queue, see </a><a href="javascript:WWHClickedPopup('admin', 'batch.11.07.html#1631743', '');" title="List of Batch Processes and Distributable Work Queues">“List of Batch Processes and Distributable Work Queues” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('admin', 'batch.11.07.html#1631743', '');" title="List of Batch Processes and Distributable Work Queues">System Administration Guide</a></span>.</div>
      <h6 class="HS_-_Head_Sub"><a name="2428227">Special Issues For Changing Your Encryption Algorithm</a></h6>
      <div class="B_-_Body"><a name="2428233">If you change encryption algorithms, you must continue to register one encryption plugin implementation for every encryption algorithm that might be referenced by encryption ID in any claim snapshots.</a> Ensure that all encryption plugin implementations return the correct encryption ID.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2428234">Be sure that you understand how to encryption upgrades work with claim snapshots. See </a><a href="javascript:WWHClickedPopup('integration', 'encryption.21.3.html#2388115', '');" title="Changing Your Encryption Algorithm Later">“Changing Your Encryption Algorithm Later”</a>.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>