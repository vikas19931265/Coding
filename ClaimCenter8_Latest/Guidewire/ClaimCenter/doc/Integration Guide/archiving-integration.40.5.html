<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Archive Source Plugin Utility Methods</title>
    <link rel="StyleSheet" href="css/archiving-integration.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-claims.html#2038421">Other Integration Topics</a> : <a class="WebWorks_Breadcrumb_Link" href="archiving-integration.40.1.html#2038421">Archiving Integration</a> : Archive Source Plugin Utility Methods</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="2038421">Archive Source Plugin Utility Methods</a></h3>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="2038422">ClaimCenter calls these utility methods as needed during the archive process:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap; color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('integration', 'archiving-integration.40.5.html#2056623', '');" title="Archive Source Plugin Utility Methods" name="2038426">updateInfoOnDelete(info : RootInfo) : List&lt;Pair&lt;IEntityType, List&lt;Key&gt;&gt;&gt;</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap; color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('integration', 'archiving-integration.40.5.html#2136844', '');" title="Archive Source Plugin Utility Methods" name="2038430">delete(info : RootInfo)</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap; color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('integration', 'archiving-integration.40.5.html#2056890', '');" title="Archive Source Plugin Utility Methods" name="2038432">retrieveSchema(platformMajor : int, platformMinor : int, appMajor : int, appMinor : int,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extension : int) : InputStream</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt; margin-bottom: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap; color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a href="javascript:WWHClickedPopup('integration', 'archiving-integration.40.5.html#2038447', '');" title="Archive Source Plugin Utility Methods" name="2038434">storeSchema(platformMajor : int, platformMinor : int, appMajor : int, appMinor : int,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extension : int, schema : InputStream)</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2126908">For ClaimCenter, when you see the interface type </a><span class="cv_-_computer_voice">RootInfo</span> in documentation or code in Studio, this always refers to a <span class="cv_-_computer_voice">ClaimInfo</span> entity instance.</div>
      <div class="B_-_Body"><a name="2038436">Your plugin must implement all of these methods. Refer to the demonstration plugin for guidance.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="2056623">updateInfoOnDelete(info : RootInfo) : List&lt;Pair&lt;IEntityType, List&lt;Key&gt;&gt;&gt;</a></h6>
      <div class="B_-_Body"><a name="2091690">At some later time after archiving, a user or batch process may decide to delete the archived object entirely, including the data that remained in the local database. This is called </a><span class="e_-_emphasis">purging</span>. During purging, you may want to delete the archived data on the external store, but you are not required to do so. </div>
      <div class="B_-_Body"><a name="2092226">During purging, ClaimCenter calls the </a><span class="cv_-_computer_voice">updateInfoOnDelete</span> method to determine additional objects that ClaimCenter must also delete if it deletes the object represented by <span class="cv_-_computer_voice">RootInfo</span>. ClaimCenter never calls this method during the main archiving step. The delete process calls this method within the transaction in which it deletes the <span class="cv_-_computer_voice">RootInfo</span> object and related entities from the active database. </div>
      <div class="B_-_Body"><a name="2135152">If your archive source plugin creates extension entity objects in the </a><span class="cv_-_computer_voice">updateInfoOnArchive</span> method that link to the <span class="cv_-_computer_voice">RootInfo</span> object, you must return these objects from <span class="cv_-_computer_voice">updateInfoOnDelete</span>. This causes the application to delete those extension entity instances. </div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="2135244">Declaring these relationships in </a><span class="cv_-_computer_voice">updateInfoOnDelete</span> is important because you may have created other objects that ClaimCenter cannot discover by looking at the foreign key references on the <span class="cv_-_computer_voice">RootInfo</span> object.</div>
      <div class="B_-_Body"><a name="2057110">The return type is a list of pair (</a><span class="cv_-_computer_voice">Pair</span>) objects. Each pair object is parameterized on:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2057111">an entity type</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="2057112">A list of </a><span class="cv_-_computer_voice">Key</span> objects. The <span class="cv_-_computer_voice">Key</span> contain the relevant <span class="cv_-_computer_voice">object.ID</span> value for that object.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="2135270">Typically, it is inappropriate to make entity changes in this method. If this method does make changes, the application commits those changes before calling the plugin method called </a><span class="cv_-_computer_voice">delete</span>. If you create objects in the <span class="cv_-_computer_voice">updateInfoOnArchive</span> that link to the <span class="cv_-_computer_voice">RootInfo</span> entity, return those objects in the return results of this method. </div>
      <div class="B_-_Body"><a name="2135920">Generally speaking, if you mark an object to delete by returning it from this method, you also return all objects that link to those objects. </a></div>
      <div class="B_-_Body"><a name="2135921">The order of the types and IDs in the list is important. Deletion happens in the order in the list and deletion is permanent. If object </a><span class="cv_-_computer_voice">A</span> links to object <span class="cv_-_computer_voice">B</span>, which links to the <span class="cv_-_computer_voice">RootInfo</span> object, you must return <span class="cv_-_computer_voice">A</span> before <span class="cv_-_computer_voice">B</span>.</div>
      <div class="B_-_Body"><a name="2136842">Typically you would determine the correct order of types and then delete all objects of that object type all at once. </a></div>
      <div class="B_-_Body"><a name="2137387">However, although usually unnecessary, it is supported to return one entity type more than once in the return list. Theoretically in complex configuration edge cases, this might be necessary to enforce proper ordering of the deletion process. For example, this allows you to enforce the following deletion order:</a></div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="2137311">delete object ID 100 of type </a><span class="cv_-_computer_voice">Type1</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2137317">delete object ID 900 of type </a><span class="cv_-_computer_voice">Type2</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="2137344">delete object ID 101 of type </a><span class="cv_-_computer_voice">Type1</span>, a type already mentioned.</div>
            </td>
          </tr>
        </table>
      </div>
      <h6 class="HS_-_Head_Sub"><a name="2136844">delete(info : RootInfo)</a></h6>
      <div class="B_-_Body"><a name="2056886">In the </a><span class="cv_-_computer_voice">delete</span> method, your plugin implementation must delete from the backing store the data identified by the specified <span class="cv_-_computer_voice">RootInfo</span> object. </div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="2137605">In your implementation of the </a><span class="cv_-_computer_voice">delete</span> method, you must delete any documents and associated document metadata linked to the archived object.</div>
      <div class="B_-_Body"><a name="2137599">The delete process calls this method </a><span class="e_-_emphasis">after</span> ClaimCenter deletes associated objects return from <span class="cv_-_computer_voice">updateInfoOnDelete</span>. See earlier in this topic for details of <span class="cv_-_computer_voice">updateInfoOnDelete</span>.</div>
      <h6 class="HS_-_Head_Sub"><a name="2056890">retrieveSchema(platformMajor : int, platformMinor : int, appMajor : int, appMinor : int, extension : int) : InputStream</a></h6>
      <div class="B_-_Body"><a name="2038444">This method retrieves the XSD associated with a </a><span class="e_-_emphasis">data model</span> + <span class="e_-_emphasis">version number</span> combination as a <span class="cv_-_computer_voice">FileInputStream</span>. The XSD describes the format of the XML files for that version.</div>
      <h6 class="HS_-_Head_Sub"><a name="2038447">storeSchema(platformMajor : int, platformMinor : int, appMajor : int, appMinor : int, extension : int,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;schema : InputStream)</a></h6>
      <div class="B_-_Body"><a name="2038448">This method stores the XSD associated with the specified </a><span class="e_-_emphasis">data model</span> + <span class="e_-_emphasis">version number</span> combination. The XSD describes the format of the XML files for that version.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>