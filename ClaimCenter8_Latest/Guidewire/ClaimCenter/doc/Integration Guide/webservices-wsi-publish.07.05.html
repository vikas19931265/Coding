<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Testing WS-I Web Services with wsi.local</title>
    <link rel="StyleSheet" href="css/webservices-wsi-publish.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Integration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-webservices.html#3780870">Web Services</a> : <a class="WebWorks_Breadcrumb_Link" href="webservices-wsi-publish.07.01.html#3780870">Publishing Web Services (WS-I)</a> : Testing WS-I Web Services with wsi.local</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="3780870">Testing WS-I Web Services with </a><span class="cvh_-_computer_voice_in_heading">wsi.local</span></h3>
      <div class="B_-_Body"><a name="3780874">For testing purposes only, you can call WS-I web services published from the same ClaimCenter server. To call a WS-I web service on the same server, you must generate WSDL files into the class file hierarchy so Gosu can access the service. This permits you to write unit tests that access the WSDL files over the SOAP protocol from Gosu. </a></div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="3563145">Guidewire does not support calls to SOAP APIs published on the same server in a production system. If you think you need to do so, please contact Customer Support.</a></div>
      <div class="B_-_Body"><a name="3579333">To regenerate the WSDL for all local web services in the class hierarchy, open a command prompt and type:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="3579340">ClaimCenter/bin/gwcc regen-wsi-local</a></div>
      <div class="B_-_Body"><a name="3579348">ClaimCenter generates the WSDL in the following location in the class hierarchy. The WSDL is in the </a><span class="cv_-_computer_voice">wsi.local</span> package, followed by fully qualified name of the web service:</div>
      <div class="CS_-_Code_Single_Line"><a name="3579622">wsi.local.</a><span class="pc_-_parameter_in_code">FQNAME</span>.wsdl</div>
      <div class="B_-_Body"><a name="3580161">To use the class, simply prefix the text </a><span class="cv_-_computer_voice">wsi.local.</span> (with a final period) to the fully-qualified name of your API implementation class. </div>
      <div class="B_-_Body"><a name="3581120">For example, suppose the web service implementation class is:</a></div>
      <div class="CS_-_Code_Single_Line" style="font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="cv_-_computer_voice"><a name="3589046">mycompany.ws.v100.EchoAPI</a></span></div>
      <div class="B_-_Body"><a name="3589047">The </a><span class="cv_-_computer_voice">regen-wsi-local</span> tool generates the following WSDL file:</div>
      <div class="CS_-_Code_Single_Line"><a name="3589048">ClaimCenter/modules/configuration/gsrc/wsi/local/mycompany/ws/v100/EchoAPI.wsdl</a></div>
      <div class="B_-_Body"><a name="3580409">Call this web service locally with the syntax:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="3580410">var api = new wsi.local.mycompany.ws.v100.EchoAPI()</a></div>
      <div class="B_-_Body"><a name="3581054">If you change the code for the web service and the change potentially changes the WSDL, regenerate the WSDL. </a></div>
      <div class="B_-_Body"><a name="3580174">ClaimCenter includes with WSDL for some local services in the default configuration. These WSDL files are in Studio modules other than </a><span class="cv_-_computer_voice">configuration</span>. If ClaimCenter creates new local WSDL files from the <span class="cv_-_computer_voice">regen-wsi-local</span> tool, it creates new files in the <span class="cv_-_computer_voice">configuration</span> module.</div>
      <div class="NW_-_Note_Warning">
        <span class="w_-_warning">WARNING  </span><a name="3588157">The </a><span class="cv_-_computer_voice">wsi.local.*</span> namespace exists only to call web services from unit tests. It is unsafe to write production code that uses these <span class="cv_-_computer_voice">wsi.local.*</span> types.</div>
      <div class="B_-_Body"><a name="3588175">To reduce the chance of accidental use of </a><span class="cv_-_computer_voice">wsi.local.*</span> types, Gosu prevents using these types in method signatures of published WS-I web services.</div>
      <h4 class="H2_-_Heading_2"><a name="3563171">Writing Unit Tests for Your Web Service</a></h4>
      <div class="B_-_Body"><a name="3563189">It is good practice to design your web services to be testable. At the time you design your web service, think about the kinds of data and commands your service handles. Consider your assumptions about the arguments to your web service, what use cases your web service handles, and which use cases you want to test. Then, write a series of GUnit tests that use the </a><span class="cv_-_computer_voice">wsi.local.*</span> namespace for your web service.</div>
      <div class="B_-_Body"><a name="3624644">For example, you created the following web service.</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="3624719">package example</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3630871">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3624720">uses gw.xml.ws.annotation.WsiWebService</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3624721">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3624722">@WsiWebService("http://mycompany.com")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3624723">class </a><span class="s_-_strong">HelloWorldAPI</span> {</PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3624724">  </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3624725">  public function helloWorld() : String {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3624726">   return "Hello!" </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3624727">  }</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3624728">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3630874">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3624729">}</a></PRE>
      <div class="B_-_Body"><a name="3572762">The following sample Gosu code is a GUnit test of the preceding </a><span class="cv_-_computer_voice">HelloWorldAPI</span> web service. </div>
      <PRE class="CF_-_Code_First_Line"><a name="3572784">package example</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3630877">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3572785">uses gw.testharness.TestBase</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3572786">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3572787">class HelloWorldAPITest extends gw.testharness.TestBase {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3572788">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3572789">&nbsp;&nbsp;construct() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3572790">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3572791">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3630880">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3572792">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3624599">&nbsp;&nbsp;public function testMyAPI() {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3624600">&nbsp;&nbsp;&nbsp;&nbsp;var api = new wsi.local.example.helloworldapi.</a><span class="s_-_strong">HelloWorldAPI()</span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3624601">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3572796">&nbsp;&nbsp;&nbsp;&nbsp;api.Config.Guidewire.Authentication.Username = "su"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3572797">&nbsp;&nbsp;&nbsp;&nbsp;api.Config.Guidewire.Authentication.Password = "gw"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3572798">&nbsp;&nbsp;&nbsp;&nbsp;var res = api.helloWorld();</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3572799">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3572800">&nbsp;&nbsp;&nbsp;&nbsp;print("result is: " + res);</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3572801">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3572851">&nbsp;&nbsp;&nbsp;&nbsp;TestBase.</a><span class="s_-_strong">assertEquals("Expected 'Hello!'", "Hello!", res)</span></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3572803">&nbsp;&nbsp;&nbsp;&nbsp;print("we got to the end of the test without exceptions!")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3572804">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3572805">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="3630883">&nbsp;</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="3572806">}</a></PRE>
      <div class="B_-_Body"><a name="3572837">For more thorough testing, test your web service from integration code on an external system. To assure your web service scales adequately, test your web service with as large a data set and as many objects as potentially exist in your production system. To assure the correctness of database transactions, test your web service to exercise all bundle-related code. </a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>