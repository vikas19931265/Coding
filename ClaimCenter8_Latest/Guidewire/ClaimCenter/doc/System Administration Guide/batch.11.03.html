<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Distributable Work Queues</title>
    <link rel="StyleSheet" href="css/batch.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter System Administration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="batch.11.01.html#1452983">Batch Processes and Work Queues</a> : Distributable Work Queues</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="1452983">Distributable Work Queues</a></h3>
      <div class="B_-_Body"><a name="1918280">Some batch processes do all their work on the batch server within a single process. For processing-intensive tasks, a work queue distributes processing across multiple servers. Guidewire calls this a </a><span class="e_-_emphasis">distributable work queue</span>, typically shortened to work queue.</div>
      <div class="B_-_Body"><a name="1918285">In a ClaimCenter cluster, worker processes can run in parallel on multiple servers. Worker processes are not restricted to running on the batch server. The batch process that supports workers is a writer. A writer is a schedulable batch process that runs only on the batch server. A writer loads a queue with work items to be completed by one or more workers. Together, the arrangement of workers, a writer, and a queue make up a distributable work queue. Distributable work queues have an advantage because multiple servers in a cluster can share processing. Each work queue concerns itself with a specific task.</a></div>
      <div class="B_-_Body"><a name="1918296">The following diagram illustrates how a distributable work queue functions:</a></div>
      <div class="F_-_Figure"><a name="1918300"><img class="Default" src="images/batch.11.03.1.png" style="display: block; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="B_-_Body"><a name="1453204">When the work queue’s writer wakes, it first checks the </a><span class="cv_-_computer_voice">WorkItem</span> table to see if it contains any items specific to its task. If the table is not empty, the writer notifies the workers and goes back to sleep. If the table does not contain any work items, the writer:</div>
      <div class="LS_-_List_Start_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LS_-_List_Start_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LS_-_List_Start_inner"><a name="1739603">Locates items for processing.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1739604">Loads the items into the </a><span class="cv_-_computer_voice">WorkItem</span> table.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1739605">Notifies the workers.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LI_-_List_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="LI_-_List_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="ri_-_run_in_header">	4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="LI_-_List_Item_inner"><a name="1739606">Goes back to sleep.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1631836">Workers only process items associated with their writer. So, for example, the </a><span class="cv_-_computer_voice">ActivityEsc</span> writer might have six workers on three different servers in a ClaimCenter cluster. Those workers work only on activity escalation items. When a worker wakes, it first checks the <span class="cv_-_computer_voice">WorkItem</span> table in the ClaimCenter database to see if it contains any items from its associated writer. If it does not, the worker goes back to sleep. Typically, there are multiple worker processes for every writer such that there are usually one or more workers processing at some point throughout the day.</div>
      <div class="B_-_Body"><a name="1631843">If a worker wakes and there are items available for processing, the worker checks out its allotted item quota. For each item the worker sets the following attributes:</a></div>
      <div class="T_-_Table"><a name="1631857">&nbsp;</a></div>
      <table class="withoutHeading" style="text-align: left" border="0" cellpadding="10" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1631846">Status</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1631848">Set to </a><span class="cvt_-_computer_voice_table">checkedout</span>. This attribute can be <span class="cvt_-_computer_voice_table">available</span>, <span class="cvt_-_computer_voice_table">checkedout</span>, or <span class="cvt_-_computer_voice_table">failed</span>.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1631850">LastUpdateTime</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1631852">Set to the time when the worker checks out the work item.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="1631854">CheckedOutBy</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1631856">Set to the worker.</a></div>
          </td>
        </tr>
      </table>
      <div class="B_-_Body"><a name="1631858">After checking out its item allotment, the worker then begins processing them individually. When a worker completes processing an item, it removes it from the table and begins to process the next item. </a></div>
      <div class="B_-_Body"><a name="2017576">A worker selects work items according to their priority. The </a><span class="cv_-_computer_voice">IWorkItemPriorityPlugin</span> is an interface with one method, <span class="cv_-_computer_voice">getWorkItemPriority</span>, which takes a <span class="cv_-_computer_voice">WorkItem</span> parameter. The method returns a priority number. Work items with a higher number are typically processed before lower priority work items. However, the priority is not a guarantee about processing order. Instead, the priority is a guarantee about selection order. For an example, assume there are four high priority work items, 20 other work items, two workers, and the work queue has <span class="cv_-_computer_voice">batchsize</span> set to <span class="cv_-_computer_voice">5</span>. The first worker takes the four high priority work items, and one low priority work item, and starts processing. The second worker takes five low priority work items and starts processing. It is conceivable that the second worker will finish processing a lower priority work item before the first worker has finished processing all of the high priority work items. </div>
      <div class="B_-_Body"><a name="1631834">A distributable queue’s writer wakes up at the interval specified in </a><span class="cv_-_computer_voice">scheduler-config.xml</span>. Typically, you schedule the writer to wake up one or two times a day. The writer process runs on the batch server, just as any other batch process.</div>
      <div class="B_-_Body"><a name="2037984">Worker processes wake up much more frequently, at least every </a><span class="cv_-_computer_voice">maxpollinterval</span>. After a worker wakes it can process up to <span class="cv_-_computer_voice">batchsize</span> items. You configure these and other values for the distributable work queue in the <span class="cv_-_computer_voice">work-queue.xml</span> file. Access this file in Guidewire Studio at <span class="ui_-_UI_element">configuration</span> → <span class="ui_-_UI_element">config → workqueue → work-queue.xml</span>.</div>
      <div class="B_-_Body"><a name="2037988">See also</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('admin', 'batch.11.06.html#2028260', '');" title="Configuring Distributable Work Queues" name="2017930">“Configuring Distributable Work Queues”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('integration', 'plugins-other.23.07.html#2401157', '');" title="Work Item Priority Plugin" name="2017938">“Work Item Priority Plugin” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('integration', 'plugins-other.23.07.html#2401157', '');" title="Work Item Priority Plugin">Integration Guide</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('admin', 'batch.11.08.html#1030716', '');" title="Scheduling Batch Processes and Work Queues" name="2017993">“Scheduling Batch Processes and Work Queues”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a href="javascript:WWHClickedPopup('admin', 'batch.11.04.html#1801777', '');" title="Running Batch Processes and Work Queues" name="2018015">“Starting Batch Processes and Work Queues from the Command Line”</a></div>
            </td>
          </tr>
        </table>
      </div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>