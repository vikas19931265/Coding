<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Checking Database Consistency</title>
    <link rel="StyleSheet" href="css/database.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter System Administration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="database.05.01.html#1199437">Configuring and Maintaining the ClaimCenter Database</a> : Checking Database Consistency</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="1199437">Checking Database Consistency</a></h3>
      <div class="B_-_Body"><a name="1199439">ClaimCenter includes a number of database consistency checks. These checks determine if any unusual conditions exist in the ClaimCenter database such as orphaned child records or inconsistencies between properties. Problems reported by the checks are sent to the console and logged in the </a><span class="cv_-_computer_voice">cclog.log</span> file. This mode is especially useful during trial periods or for testing converted data. </div>
      <div class="B_-_Body"><a name="1262553">Check the database consistency on a regular basis to identify potential problems. Run consistency checks before and after a database upgrade and before importing data into a production database.</a></div>
      <h4 class="H2_-_Heading_2"><a name="1265044">Running Consistency Checks from ClaimCenter</a></h4>
      <div class="B_-_Body"><a name="1265048">Guidewire recommends that you view and run consistency checks from the </a><span class="ui_-_UI_element">Consistency Checks</span> page in ClaimCenter. The <span class="ui_-_UI_element">Consistency Checks</span> page lists which consistency checks are available for specific tables. You can also use this page to view the results of running consistency checks previously. If there are consistency check errors, the results include SQL queries that you can use to identify records that violated the consistency check.</div>
      <div class="B_-_Body"><a name="1265052">See </a><a href="javascript:WWHClickedPopup('admin', 'maintenance.13.12.html#1532290', '');" title="Info Pages">“Consistency Checks”</a> for more information.</div>
      <h4 class="H2_-_Heading_2"><a name="1217462">Running Consistency Checks with System Tools</a></h4>
      <div class="B_-_Body"><a name="1261507">It is also possible to launch database consistency checks from the command line. Launching consistency checks from the command line is primarily useful for scheduling checks to run on a regular basis. Use the following command:</a></div>
      <div class="CS_-_Code_Single_Line"><span class="cv_-_computer_voice"><a name="1261555">system_tools</a></span> <span class="cv_-_computer_voice">-checkdbconsistency</span> -password <span class="pc_-_parameter_in_code">password</span></div>
      <div class="B_-_Body"><a name="1261560">The </a><span class="cv_-_computer_voice">system_tools</span> utility is located in the <span class="cv_-_computer_voice">ClaimCenter/admin/bin</span> folder. See <a href="javascript:WWHClickedPopup('admin', 'commandsref.14.07.html#1350094', '');" title="System Tools Command">“System Tools Command”</a> for more information.</div>
      <div class="B_-_Body"><a name="1262644">This tool has two optional arguments:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="1262645">-checkdbconsistency </a><span class="pc_-_parameter_in_code">tableSelection</span> <span class="pc_-_parameter_in_code">checkTypeSelection</span></div>
      <div class="B_-_Body"><a name="1262646">The </a><span class="ps_-_parameter_in_code_snippets">tableSelection</span> argument can be specified as:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1262647">all</a></span> – Run consistency checks on all tables.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ps_-_parameter_in_code_snippets"><a name="1262648">table name</a></span> – The name of a single table on which to run checks.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1262649">tg.</a></span><span class="ps_-_parameter_in_code_snippets">table group name</span> – The name of a table group. Table groups are defined in the <span class="cv_-_computer_voice">&lt;database&gt;</span> element of <span class="cv_-_computer_voice">database-config.xml</span>. For more information, see <a href="javascript:WWHClickedPopup('install', 'install.6.07.html#2267775', '');" title="Defining Table Groups">“Defining Table Groups” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('install', 'install.6.07.html#2267775', '');" title="Defining Table Groups">Installation Guide</a></span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1262653">@</a></span><span class="ps_-_parameter_in_code_snippets">file name</span> – A file name with one or more valid table names or table group names entered in comma-separated values (CSV) format. Prefix table group names with <span class="cv_-_computer_voice">tg.</span>, such as <span class="cv_-_computer_voice">tg.MyTableGroup</span>. You can combine table groups and individual table names in the same file.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1262773">The </a><span class="ps_-_parameter_in_code_snippets">checkTypeSelection</span> can be specified as:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1262655">all</a></span> – Run all consistency checks on the specified tables.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="ps_-_parameter_in_code_snippets"><a name="1262656">check name</a></span> – The typecode value of a single consistency check to run.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1262941">@</a></span><span class="ps_-_parameter_in_code_snippets">file name</span> – A file name with one or more valid consistency check names entered in comma-separated values (CSV) format.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1262942">If you specify one optional argument, you must specify both.</a></div>
      <div class="B_-_Body"><a name="1272789">The </a><span class="cv_-_computer_voice">-checkdbconsistency</span> option runs consistency checks as an asynchronous batch process. </div>
      <div class="B_-_Body"><a name="1265745">You can configure the number of threads to use for consistency checks by specifying the </a><span class="cv_-_computer_voice">ConsistencyCheckerThreads</span> parameter in <span class="cv_-_computer_voice">config.xml</span>. </div>
      <div class="CS_-_Code_Single_Line"><a name="1281420">&lt;param name="ConsistencyCheckerThreads" value="5"/&gt;</a></div>
      <div class="B_-_Body"><a name="1281422">Using a larger number of threads can help performance as long as your server can process the threads. Guidewire recommends starting with five threads. If too many threads are used, there is a greater chance that current users experience reduced performance if the database server is fully loaded.</a></div>
      <div class="B_-_Body"><a name="1265746">Use the typecode value to specify a consistency check type as an argument or in a file. To see which consistency check types are available for each table, search for the table on the </a><span class="ui_-_UI_element">View consistency checks definitions</span> tab of the <span class="ui_-_UI_element">Info Pages</span> → <span class="ui_-_UI_element">Consistency Checks</span> page. This page lists the consistency checks available by name. Then select the <span class="ui_-_UI_element">Run consistency checks</span> tab. For <span class="ui_-_UI_element">Check all types?</span>, select <span class="ui_-_UI_element">Specify types</span>. Use the <span class="ui_-_UI_element">Type Code</span> value to specify the consistency checks that you want to run. The Typelists section of the <span class="bt_-_book_title">ClaimCenter Data Dictionary</span> also lists available consistency check types. The typelist is <span class="cv_-_computer_voice">ConsistencyCheckType</span>. </div>
      <div class="B_-_Body"><a name="1265655">Results of the consistency checks are available from the </a><span class="ui_-_UI_element">Consistency Checks</span> page. See <a href="javascript:WWHClickedPopup('admin', 'maintenance.13.12.html#1532290', '');" title="Info Pages">“Consistency Checks”</a>.</div>
      <div class="B_-_Body"><a name="1265926">The ClaimCenter log lists a check type for each consistency check that runs. Each check type in the log can have a value of either </a><span class="cv_-_computer_voice">0</span> or <span class="cv_-_computer_voice">1</span>. A value of <span class="cv_-_computer_voice">0</span> indicates that ClaimCenter expects the check to return zero results if the database is consistent. A value of <span class="cv_-_computer_voice">1</span> indicates that ClaimCenter expects the check to have a different return value. ClaimCenter uses the check type for custom checks. If a check type <span class="cv_-_computer_voice">0</span> fails, the log records a failure description that ClaimCenter expected the query issued by the check to return zero rows. The log includes the SQL query run by the check and the number of inconsistencies returned by the query. If a check type <span class="cv_-_computer_voice">1</span> fails, the log includes a specific failure description. </div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="1281520">The check type in the ClaimCenter log is not the same as the check type shown in the Typelists section of the </a><span class="bt_-_book_title">ClaimCenter Data Dictionary</span>. </div>
      <div class="B_-_Body"><a name="1265911">Running consistency checks using the</a><span class="cv_-_computer_voice"> -checkdbconsistency</span> option can take a long time. If the connection times out while running this command, try the following:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1266091">Run consistency checks on fewer tables at a time by using the arguments shown previously.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1266094">Increase the number of threads by increasing the value of </a><span class="cv_-_computer_voice">ConsistencyCheckerThreads</span> in <span class="cv_-_computer_voice">config.xml</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <h4 class="H2_-_Heading_2"><a name="1261898">Running Consistency Checks when the Server Starts</a></h4>
      <div class="B_-_Body"><a name="1261501">For development environments with very small data sets, you can enable consistency checks to run each time the ClaimCenter server starts. To do this, set the </a><span class="cv_-_computer_voice">checker</span> attribute of the <span class="cv_-_computer_voice">database</span> block to <span class="cv_-_computer_voice">true</span> in <span class="cv_-_computer_voice">database-config.xml</span>. By default, this option is set to <span class="cv_-_computer_voice">false</span>.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="1199447">Running these consistency tests when starting the server can take a long time, impact performance severely, and possibly time out on large datasets. Set </a><span class="cv_-_computer_voice">checker</span> to <span class="cv_-_computer_voice">false</span> under most circumstances. Guidewire recommends that you do not set <span class="cv_-_computer_voice">checker</span> to <span class="cv_-_computer_voice">true</span> except in development environments with very small test data sets.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>