<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Monitoring and Managing Event Messages</title>
    <link rel="StyleSheet" href="css/mngservers.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter System Administration Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="mngservers.06.01.html#1731271">Managing ClaimCenter Servers</a> : Monitoring and Managing Event Messages</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="1731271">Monitoring and Managing Event Messages</a></h3>
      <div class="B_-_Body"><a name="1731275">ClaimCenter generates a large number of events. In a typical company’s environment, it can be necessary or helpful for ClaimCenter to notify other applications of these events through an integration. ClaimCenter integration developers create message destination objects that provide the means for passing information between ClaimCenter and a particular destination. Rule writers can write Gosu rules to generate messages in response to events of interest. ClaimCenter queues these messages and dispatches them to receiving systems by using the destination objects.</a></div>
      <div class="B_-_Body"><a name="1731289">Monitor message traffic to ensure that the integration is running smoothly. This section discusses topics in monitoring and managing event messages. For more information about messages, including how to create message destination objects, see </a><a href="javascript:WWHClickedPopup('integration', 'eventsmessaging.27.01.html#4197044', '');" title="Messaging and Events">“Messaging and Events” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('integration', 'eventsmessaging.27.01.html#4197044', '');" title="Messaging and Events">Integration Guide</a></span>.</div>
      <h4 class="H2_-_Heading_2"><a name="1731297">How ClaimCenter Processes Messages</a></h4>
      <div class="B_-_Body"><a name="1731301">Every time ClaimCenter sends an event message, it expects to receive a positive acknowledgement (ack) back from the destination indicating it received and processed the message. ClaimCenter retains completed messages until you purge them. Since the number of messages in ClaimCenter can grow to be large, purge completed messages on a regular basis. Use the following command:</a></div>
      <div class="CS_-_Code_Single_Line" style="font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="cv_-_computer_voice"><a name="1731308">messaging_tools -password </a></span><span class="pc_-_parameter_in_code">password</span><span class="cv_-_computer_voice"> -purge </span><span class="pc_-_parameter_in_code">MM</span><span class="cv_-_computer_voice">/</span><span class="pc_-_parameter_in_code">DD</span><span class="cv_-_computer_voice">/</span><span class="pc_-_parameter_in_code">YY</span></div>
      <div class="B_-_Body"><a name="1731309">For example:</a></div>
      <div class="CS_-_Code_Single_Line"><span class="cv_-_computer_voice"><a name="1731310">messaging_tools -password </a></span>gw<span class="cv_-_computer_voice"> -purge 02/06/06</span></div>
      <div class="B_-_Body"><a name="1731311">In this example, this command purges all completed messages received prior to </a><span class="cv_-_computer_voice">02/06/06</span>. </div>
      <div class="B_-_Body"><a name="1731312">Messages can have several different statuses. The following table describes the different message statuses and what they mean:</a></div>
      <div class="T_-_Table"><a name="1731358">&nbsp;</a></div>
      <table class="withoutHeading" style="text-align: left" border="0" cellpadding="10" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1731315">Unsent</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1731317">The message has not been sent. The message might be waiting on a prior message. Or, the destination might not be processing messages because it is suspended. Or, the destination is falling behind. ClaimCenter can generate messages very quickly</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1731322">Needing Retry</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1731327">Waiting to attempt a retry. ClaimCenter attempted to send the message but the destination threw an exception. If the exception was retryable, ClaimCenter automatically attempts to retry the send before turning the message into a failure. </a></div>
            <div class="TT_-_Table_Text"><a name="1731335">ClaimCenter attempts to send an event message several times. Typically, you can configure the number of retries and the interval between them for an integration. Review documentation for the specific destination to find out how to configure it. </a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1731337">In Flight</a></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="1731342">ClaimCenter is waiting for an acknowledgement.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top" rowspan="3">
            <div class="TT_-_Table_Text"><a name="1731344">Messages Failed</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top" rowspan="3">
            <div class="TT_-_Table_Text"><a name="1731346">A message can fail for several reasons.</a></div>
            <div class="BIT_-_Bullet_Item_Table_outer" style="margin-left: 2.16pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
                <tr style="vertical-align: baseline">
                  <td>
                    <div class="BIT_-_Bullet_Item_Table_inner" style="width: 7.199999999999999pt; white-space: nowrap">
                      <span class="but_-_bullet_in_table">•	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="BIT_-_Bullet_Item_Table_inner"><a name="1731347">A processing error, the destination did not process the message successfully. </a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="BIT_-_Bullet_Item_Table_outer" style="margin-left: 2.16pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
                <tr style="vertical-align: baseline">
                  <td>
                    <div class="BIT_-_Bullet_Item_Table_inner" style="width: 7.199999999999999pt; white-space: nowrap">
                      <span class="but_-_bullet_in_table">•	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="BIT_-_Bullet_Item_Table_inner"><a name="1731348">The destination returns a negative acknowledge (nack) indicating that the message failed.</a></div>
                  </td>
                </tr>
              </table>
            </div>
            <div class="BIT_-_Bullet_Item_Table_outer" style="margin-left: 2.16pt">
              <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
                <tr style="vertical-align: baseline">
                  <td>
                    <div class="BIT_-_Bullet_Item_Table_inner" style="width: 7.199999999999999pt; white-space: nowrap">
                      <span class="but_-_bullet_in_table">•	</span>
                    </div>
                  </td>
                  <td width="100%">
                    <div class="BIT_-_Bullet_Item_Table_inner"><a name="1731349">The message was embedded in a series of messages, one or more of which failed. </a></div>
                  </td>
                </tr>
              </table>
            </div>
          </td>
        </tr>
        <tr></tr>
        <tr></tr>
      </table>
      <div class="B_-_Body"><a name="1731362">If ClaimCenter receives an unrecoverable or unexpected exception from a send attempt, or reaches the retry limit, it does not send messages to that destination until you clear the error. If ClaimCenter receives a processing error that is not retryable, ClaimCenter also suspends the destination and waits for you to clear the error. To clear an error, either manually retry the send or skip the message. Do this from the user interface or from the command line. </a></div>
      <div class="B_-_Body"><a name="1731372">If ClaimCenter becomes completely out of synchronization with an external system, such that skipping or retrying a message is insufficient to resynchronize the two systems, </a><span class="ui_-_UI_element">Resync</span> the entire destination. A resynchronization causes ClaimCenter to drop all pending and failed messages and resend all the messages associated with a particular claim.</div>
      <h4 class="H2_-_Heading_2"><a name="1731376">Working with the Destinations Page</a></h4>
      <div class="B_-_Body"><a name="1731380">ClaimCenter lists each message destination in the </a><span class="ui_-_UI_element">Event Messages</span> page. You access this page from the <span class="ui_-_UI_element">Administration</span> tab by choosing <span class="ui_-_UI_element">Event Messages</span>. The first page of <span class="ui_-_UI_element">Event Messages</span> contains cumulative information about message destinations.</div>
      <div class="B_-_Body"><a name="1731381">You can select a message destination and </a><span class="ui_-_UI_element">Suspend</span> or <span class="ui_-_UI_element">Resume</span> the individual synchronization. You can also restart the messaging engine within ClaimCenter itself.</div>
      <div class="B_-_Body"><a name="1731385">If a destination is running correctly, you do not see any accumulation of information in the columns. If there is a problem and messages begin to accumulate, you can drill down into a message destination by clicking the destination name. This opens the </a><span class="ui_-_UI_element">Destination</span> page. From this page, you can see additional detail about any clog in a destination. This information can assist you in diagnosing the error, in particular you can use the <span class="ui_-_UI_element">Error Message</span> column to see the possible cause of a particular clog.</div>
      <div class="B_-_Body"><a name="1731390">The </a><span class="ui_-_UI_element">Destination</span> page lists all failed or in-process messages for a claim for all destinations. You can search for a particular claim to respond to a query from an end user and then open the claim’s detail view. From this page, you can select one or more claims and indicate that the failed or in-flight message for each claim be skipped, retried, or resynced.</div>
      <h4 class="H2_-_Heading_2"><a name="1731398">Configuring Message Destinations</a></h4>
      <div class="B_-_Body"><a name="1731399">You create and configure message environments and destinations in the </a><span class="cv_-_computer_voice">messaging-config.xml</span> file. Access <span class="cv_-_computer_voice">messaging-config.xml</span> in Guidewire Studio at <span class="ui_-_UI_element">configuration</span> → <span class="ui_-_UI_element">config</span> → <span class="ui_-_UI_element">Messaging</span> → <span class="ui_-_UI_element">messaging-config.xml</span>. See <a href="javascript:WWHClickedPopup('config', 'studio_messaging.15.2.html#3406051', '');" title="Messaging Editor">“Messaging Editor” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('config', 'studio_messaging.15.2.html#3406051', '');" title="Messaging Editor">Configuration Guide</a></span>.</div>
      <h4 class="H2_-_Heading_2"><a name="1731414">Tuning Message Handling</a></h4>
      <div class="B_-_Body"><a name="1731418">A ClaimCenter server reads integration messages from a queue and dispatches them to their destinations. However, there is no guarantee that messages in the queue are ready for dispatching in the same order in which ClaimCenter places the messages in the queue.</a></div>
      <div class="B_-_Body"><a name="1731422">For example, the server can start writing </a><span class="cv_-_computer_voice">message1</span> to the queue, and then start writing <span class="cv_-_computer_voice">message2</span> to the same queue. It is possible that the server completes and commits <span class="cv_-_computer_voice">message2</span> while still writing <span class="cv_-_computer_voice">message1</span>. This does not, in itself, present an issue. However, if the server attempts to read messages off the queue at this moment, then it skips the uncommitted <span class="cv_-_computer_voice">message1</span> and reads <span class="cv_-_computer_voice">message2</span>. You are most likely to encounter this situation in a clustered ClaimCenter environment.</div>
      <div class="B_-_Body"><a name="1731432">To address this situation, ClaimCenter provides the </a><span class="cv_-_computer_voice">IncrementalReaderSafetyMarginMillis</span> parameter in the <span class="cv_-_computer_voice">config.xml</span> file. This determines how long after detecting a skipped message that ClaimCenter attempts to read messages again. This waiting period gives the skipped message a chance to be committed. If the message has not been committed after waiting this long, then ClaimCenter assumes the message is lost and will never be committed, and ClaimCenter skips the message permanently.</div>
      <div class="B_-_Body"><a name="1731445">For example, in the previous scenario, ClaimCenter waits 10 seconds (the default parameter value) before attempting to read messages again, beginning with the skipped </a><span class="cv_-_computer_voice">message1</span>. If <span class="cv_-_computer_voice">message1</span> has still not been committed at that time, ClaimCenter skips it permanently.</div>
      <div class="B_-_Body"><a name="1731512">Set the </a><span class="cv_-_computer_voice">IncrementalReaderSafetyMarginMillis</span> parameter long enough to give messages time to be committed without prematurely marking them as permanently skipped. However, because no other messages are read during this waiting period, do not set <span class="cv_-_computer_voice">IncrementalReaderSafetyMarginMillis</span> so long as to delay the delivery of messages. You can also set the <span class="cv_-_computer_voice">IncrementalReaderPollIntervalMillis</span> and <span class="cv_-_computer_voice">IncrementalReaderChunkSize</span> parameters to configure the message reading environment.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>