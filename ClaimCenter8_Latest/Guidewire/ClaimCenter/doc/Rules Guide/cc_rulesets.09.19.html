<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Adding New Validation Levels</title>
    <link rel="StyleSheet" href="css/cc_rulesets.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>ClaimCenter Rules Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="p-rules.html#16507785">Gosu Business Rules</a> : <a class="WebWorks_Breadcrumb_Link" href="cc_rulesets.09.01.html#16507785">Rule Set Categories</a> : <a class="WebWorks_Breadcrumb_Link" href="cc_rulesets.09.18.html#16507785">Validation Rule Set Category</a> : Adding New Validation Levels</span></div>
    <hr align="left" />
    <blockquote>
      <h4 class="H2B_-_Heading_2_Break"><a name="16507785">Adding New Validation Levels</a></h4>
      <div class="B_-_Body"><a name="16690481">It is possible to add additional validation levels to meet your business needs.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="16690848">System Validation Levels</a></h6>
      <div class="B_-_Body"><a name="16851287">You can override the </a><span class="e_-_emphasis">name</span> and the <span class="e_-_emphasis">priority</span> of the three system validations levels (<span class="cv_-_computer_voice">loadsave</span>, <span class="cv_-_computer_voice">newloss</span>, and <span class="cv_-_computer_voice">payment</span>). For example, you can change the name of the <span class="cv_-_computer_voice">payment</span> validation level from <span class="e_-_emphasis">Ability to pay</span> to <span class="e_-_emphasis">Ability to pay expenses</span>. You can also modify the priority so this level is easier to reach. You <span class="e_-_emphasis">cannot</span>, however, delete the three system validation levels.</div>
      <h6 class="HS_-_Head_Sub"><a name="16690860">Non-system Validation Levels</a></h6>
      <div class="B_-_Body"><a name="16851304">You can modify or delete any non-system validation level at will.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="16690872">Custom Validation Levels</a></h6>
      <div class="B_-_Body"><a name="16851321">You can add new validation levels. If you do so, then you must provide a linkage to the actions you would like to control through the new validation level and to the validation level itself. You do this by calling the following method on a </a><span class="cv_-_computer_voice">Claim</span> or <span class="cv_-_computer_voice">Exposure</span> object (or, indeed, any validatable object):</div>
      <div class="CS_-_Code_Single_Line"><a name="16690904">isValid(validationLevel, includeExposures)</a></div>
      <div class="B_-_Body"><a name="16690840">For example:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="16690918">Claim.isValid("newLoss", false)</a></div>
      <div class="B_-_Body"><a name="16827143">This method determines if the claim or exposure is valid for the action you are attempting to perform. This is required for checking actions triggered in preupdate rules or from within ClaimCenter. It is important to understand that ClaimCenter runs the Validation rules after the preupdate rules, so the </a><span class="cv_-_computer_voice">Claim.ValidationLevel</span> property reflects the previous validation level. However, this is not true for rules in the Event Message rule set category, which ClaimCenter runs after validation. See <a href="javascript:WWHClickedPopup('rules', 'cc_rulesets.09.08.html#16506651', '');" title="Event Message Rule Set Category">“Event Message Rule Set Category”</a>.</div>
      <h4 class="H2_-_Heading_2"><a name="16690462">Triggering Validation Rules</a></h4>
      <div class="B_-_Body"><a name="16830372">For an entity to trigger the validation rules, it must implement the </a><span class="cvt_-_computer_voice_table">Validatable</span> delegate. This is true for an entity in the base ClaimCenter configuration or for a custom entity that you create. </div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="16830380">ClaimCenter runs the validation (and preupdate) rules:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16830381">Whenever an instance of a validatable entity is created, modified, or retired.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16830382">Whenever a </a><span class="e_-_emphasis">subentity</span> of a validatable entity is created, modified, or retired <span class="e_-_emphasis">and</span> the validatable entity is connected to the subentity through a <span class="cv_-_computer_voice">triggersValidation="true"</span> link.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="16830350">However, for any entity that you create to trigger the validation rules, you must also create a validation rule set and name it using the name of your new entity. Thus, to create a rule set that ClaimCenter recognizes as triggering validation, do the following:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16830587">Put your validation rules in the </a><span class="e_-_emphasis">Validation</span> rule set category.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16830600">Name the rule set </a><span class="cv_-_computer_voice">&lt;entity name&gt;ValidationRules</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="16830625">For example, if you create an entity named </a><span class="cv_-_computer_voice">MyEntityExt</span>, put validation rules for that entity in the following rule set that you create in the <span class="e_-_emphasis">Validation</span> rule set category:</div>
      <div class="CS_-_Code_Single_Line"><a name="16830613">MyEntitityExtValidationRules</a></div>
      <h6 class="HS_-_Head_Sub"><a name="16830357">See Also</a></h6>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16830471">For information on preupdate rules and custom entities, see </a><a href="javascript:WWHClickedPopup('rules', 'cc_rulesets.09.14.html#16826972', '');" title="Preupdate Rule Set Category">“Preupdate Rules and Custom Entities”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16830514">For information on how to create an entity that implements the </a><span class="cv_-_computer_voice">Validatable</span> delegate, see <a href="javascript:WWHClickedPopup('config', 'entities.19.06.html#2635205', '');" title="Delegate Data Objects">“Delegate Data Objects” in the </a><span class="bt_-_book_title"><a href="javascript:WWHClickedPopup('config', 'entities.19.06.html#2635205', '');" title="Delegate Data Objects">Configuration Guide</a></span>. </div>
            </td>
          </tr>
        </table>
      </div>
      <h4 class="H2_-_Heading_2"><a name="16507815">Validation and Preupdate Rules</a></h4>
      <div class="B_-_Body"><a name="16507816">ClaimCenter runs preupdate and validation rules every time that it commits data to the database. (This is known as a database bundle commit.) Validation rules execute after ClaimCenter runs all preupdate callbacks and preupdate rules. Execution of the validation rules forms the last step before ClaimCenter actually writes data to the database.</a></div>
      <div class="B_-_Body"><a name="16507820">It is possible for the preupdate rules to modify objects during execution, requiring changes to the database. However, ClaimCenter does not permit you to modify objects during validation rule execution that require changes to the database. To allow this would make it impossible to ever completely validate data. (Data validation would be a ever-shifting target.)</a></div>
      <h6 class="HS_-_Head_Sub"><a name="16829496">See Also</a></h6>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16507827">For more information on how the preupdate and validation rules work together, see </a><a href="javascript:WWHClickedPopup('rules', 'validation_cc.13.1.html#4652290', '');" title="Validation in ClaimCenter">“Validation in ClaimCenter”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16829543">For information on how to create custom entities that trigger validation (and preupdate) rules, see </a><a href="javascript:WWHClickedPopup('rules', 'cc_rulesets.09.14.html#16826972', '');" title="Preupdate Rule Set Category">“Preupdate Rules and Custom Entities”</a>.</div>
            </td>
          </tr>
        </table>
      </div>
      <h4 class="H2_-_Heading_2"><a name="16507830">Determining the Validity of an Object</a></h4>
      <div class="B_-_Body"><a name="16699713">ClaimCenter provides a </a><span class="cv_-_computer_voice">validate</span> method that you can call on a number of different business objects to determine if that object is valid. For example, the <span class="cv_-_computer_voice">validate</span> method on <span class="cv_-_computer_voice">Claim</span> executes the Claim Validation Rules on the supplied claim. See <a href="javascript:WWHClickedPopup('rules', 'cc_rulesets.09.19.html#16508014', '');" title="Adding New Validation Levels">“Claim Validation Rules”</a>. It then returns a validation object containing any errors. If the validation was successful, the method returns an empty validation object. Also, if <span class="cv_-_computer_voice">validateExposures</span> is <span class="cv_-_computer_voice">true</span>, then the method validates the claim and all the exposures on the claim. Otherwise, it validates the claim only.</div>
      <div class="CS_-_Code_Single_Line"><a name="16699771">Claim.validate(validateExposures)</a></div>
      <div class="B_-_Body"><a name="16699869">It is important to understand that this works on a single object at a time, and that it returns a validation object that you must then handle. For this reason, Guidewire does not recommend that you use this for bulk operations. Instead, for example, if you wish to process a large number of converted claims by escalating them to whatever level they can achieve, use the following:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="16699945">IClaimAPI.bulkValidate(loadCommandID)</a></div>
      <div class="B_-_Body"><a name="16699965">The </a><span class="cv_-_computer_voice">bulkValidate</span> method does not perform any validation. Instead, it starts a batch process that creates a separate work item to validate each claim. The batch process runs unattended and does not return a result. The method <span class="cv_-_computer_voice">loadCommandID</span> parameter is an integer value that identifies the conversion batch process that imported the claims. The <span class="cv_-_computer_voice">loadCommandID</span> value is available through the <span class="cv_-_computer_voice">TableImportResult</span> object returned from a table import operation. For example:</div>
      <div class="CS_-_Code_Single_Line"><a name="16700057">ITableImportAPI.integrityCheckStagingTableContentsAndLoadSourceTables()</a></div>
      <div class="B_-_Body"><a name="16700164">Again, to determine if a claim (and its exposures) are valid, call the following method: on a </a><span class="cv_-_computer_voice">Claim</span> or <span class="cv_-_computer_voice">Exposure</span> object (or, indeed, any validatable object):</div>
      <div class="CS_-_Code_Single_Line"><a name="16700213">isValid(validationLevel, includeExposures)</a></div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="16699745">As always, for more information on this and other ClaimCenter methods, see the </a><span class="e_-_emphasis">Gosu API Reference</span> available from the Studio <span class="ui_-_UI_element">Help</span> menu.</div>
      <h4 class="H2_-_Heading_2"><a name="16699702">Correcting Validation Errors</a></h4>
      <div class="B_-_Body"><a name="16507832">Use the </a><span class="cv_-_computer_voice">reject</span> method—in one of its many forms—to prevent continued processing of the object, and to inform the user of the problem and how to correct it. The following table describes the various forms of the <span class="cv_-_computer_voice">reject</span> method. These methods are available on <span class="cv_-_computer_voice">ABContact</span>, <span class="cv_-_computer_voice">Claim</span>, <span class="cv_-_computer_voice">Exposure</span>, <span class="cv_-_computer_voice">Matter</span>, <span class="cv_-_computer_voice">Policy</span>, and <span class="cv_-_computer_voice">TransactionSet</span> business entities. (To determine which objects you can use within a rule, right-click within the rule and select <span class="ui_-_UI_element">Complete Code</span> to view a list of valid objects.)</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="16507836">Guidewire ClaimCenter currently supports the following </a><span class="cvt_-_computer_voice_table">reject</span> methods only, even though additional methods can show in Studio. Specifically, ClaimCenter does not support <span class="cvt_-_computer_voice_table">reject</span> methods that take a <span class="cv_-_computer_voice">flowtStepId</span> argument. ClaimCenter ignores this argument if you attempt to set it.</div>
      <div class="T_-_Table"><a name="16507857">&nbsp;</a></div>
      <table class="withHeading" style="text-align: left" border="0" cellpadding="10" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="16507839">Method form</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="16507841">Description</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="16507844">reject</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="16507846">Indicates a problem and provides an error message, but does not point the user to a specific field.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="16507849">rejectField</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="16507851">Indicates a problem with a particular field (</a><span class="cvt_-_computer_voice_table">relatedObject</span>), provides an error message, and directs the user to the correct field to fix.</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="16507854">rejectSubField</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="16507856">Similar to </a><span class="cvt_-_computer_voice_table">rejectField</span>, but also indicates that the problem is with a field on a subobject (for example, a form).</div>
          </td>
        </tr>
      </table>
      <div class="B_-_Body"><a name="16507858">The method signature can take one of the following forms:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="16507859">reject( errorLevel, strErrorReason, warningLevel, strWarningReason)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="16507861">rejectField( strRelativeFieldPath, errorLevel, strErrorReason, warningLevel, strWarningReason )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="16507863">rejectSubField( relatedObject, strRelativeFieldPath, errorLevel, strErrorReason, </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="16507864">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;warningLevel, strWarningReason )&nbsp;</a></PRE>
      <div class="B_-_Body"><a name="16507866">The following table lists the </a><span class="cv_-_computer_voice">reject</span> method parameters and describes their use. Identified issues or problems are either errors (blocking) or warnings (non-blocking). Note that you can indicate failure as both an error and a warning simultaneously. However, if the failure is both an error and a warning, use different error and warning levels for the failure.</div>
      <div class="T_-_Table"><a name="16507897">&nbsp;</a></div>
      <table class="withHeading" style="text-align: left" border="0" cellpadding="10" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="16507869">Method parameter</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: bottom">
            <div class="TH_-_Table_Heading"><a name="16507871">Description</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="16507873">errorLevel</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="16507875">Corresponding level effected by the validation error. </a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="16507877">relatedObject</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="16507879">Object related to the root entity that is causing the error.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="16507881">strErrorReason</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="16507883">Message to show to the user indicating the reason for the error.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="16507885">strRelativeFieldPath</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="16507887">Relative path from the root entity to the field that failed validation. Using a relative path (as opposed to a full path) sets a link to the problem field from within the message shown to the user. It also identifies the invalid field on-screen.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="16507889">strWarningReason</a></span></div>
          </td>
          <td style="border-bottom-color: #c0d1d1; border-bottom-style: solid; border-bottom-width: 0.15pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="16507891">Message to show to the user indicating the reason for the warning.</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text" style="color: #000000; font-family: &quot;Lucida Sans Typewriter&quot;; font-style: normal; font-variant: normal; font-weight: normal; margin-top: 3.0pt; text-transform: none; vertical-align: baseline"><span class="cvt_-_computer_voice_table"><a name="16507893">warningLevel</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-top-color: #c0d1d1; border-top-style: solid; border-top-width: 0.15pt; padding-bottom: 4pt; padding-left: 2pt; padding-right: 8pt; padding-top: 0pt; vertical-align: top">
            <div class="TT_-_Table_Text"><a name="16507896">Corresponding level effected by the validation warning. </a></div>
          </td>
        </tr>
      </table>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="16507898">Validation Rules and Entity Types</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="16507899">As you define a validation rule, you do so in a rule set that is declared for a specific entity type. For example, this would be for </a><span class="cv_-_computer_voice">Claim</span>, <span class="cv_-_computer_voice">User</span>, or one of the other business entities. Although it is possible to access other business entities within that rule (other than the declared type), <span class="e_-_emphasis">only</span> call the <span class="cv_-_computer_voice">reject</span> method on the declared entity in the rule set. Studio does not detect violations of this guideline. During validation, it is possible that some traversal of the objects to be validated can reset that entity's previous result. If this is before the entity’s own rules are executed, then ClaimCenter would lose this particular reject.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="16507904">Error Text Strings</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="16507905">You can enter the error text string (</a><span class="cv_-_computer_voice">strErrorReason</span>) directly into <span class="cv_-_computer_voice">rejectField</span>, or you can use one of the following methods to insert the error text.</div>
      <h6 class="HS_-_Head_Sub" style="color: #000000; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span class="cvh_-_computer_voice_in_heading"><a name="16507907">getMessage</a></span></h6>
      <div class="B_-_Body"><a name="16507908">The </a><span class="cv_-_computer_voice">getMessage</span> method returns an instance of <span class="cv_-_computer_voice">UserMessage</span>, which represents all the information needed to render a user message. Guidewire recommends that you also call the <span class="cv_-_computer_voice">localize</span> method to handle any localization issues. In the following example, the Gosu code checks roles at the exposure level and generates an error message for each invalid role.</div>
      <PRE class="CF_-_Code_First_Line"><a name="16507909">/* Check for invalid role configurations at the exposure level and report each individually </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="16507910">&nbsp;&nbsp;&nbsp;on the Contacts array - if they exist </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="16507911">*/</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="16507912">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="16507913">var failures = exposure.validateRoles() </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="16507914">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="16507915">for ( failure in failures ) { </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="16507916">&nbsp;&nbsp;exposure.rejectField( "Contacts", "newloss", failure.getMessage().localize(), null, null ) </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="16507917">} </a></PRE>
      <h6 class="HS_-_Head_Sub"><span class="cvh_-_computer_voice_in_heading"><a name="16507920">displaykey</a></span> Class</h6>
      <div class="B_-_Body"><a name="16507921">You can also use the </a><span class="cv_-_computer_voice">displaykey</span> class to return the value of the display key, which you can then use in the error text string. For example: </div>
      <div class="CS_-_Code_Single_Line"><a name="16507922">displaykey.Java.Admin.User.DuplicateRoleError</a></div>
      <div class="B_-_Body"><a name="16507923">returns </a></div>
      <div class="CS_-_Code_Single_Line"><a name="16507924">User has duplicate roles</a></div>
      <div class="B_-_Body"><a name="16507925">This also works with display keys that require a parameter or parameters. For example, </a><span class="cv_-_computer_voice">display.properties</span> defines the following display key with placeholder <span class="cv_-_computer_voice">{0}</span>:</div>
      <PRE class="CF_-_Code_First_Line"><a name="16507926">Java.UserDetail.Delete.IsSupervisorError = Cannot delete user because that user is the supervisor </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="16507927">&nbsp;&nbsp;of the following groups\: {0}</a></PRE>
      <div class="B_-_Body"><a name="16507928">For example, if you use the following displaykey code (</a><span class="cv_-_computer_voice">GroupName</span> has been retrieved already):</div>
      <div class="CS_-_Code_Single_Line"><a name="16507929">displaykey.Java.UserDetail.Delete.IsSupervisorError( GroupName )</a></div>
      <div class="B_-_Body"><a name="16507930">then, it returns the following:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="16507931">Cannot delete user because they are supervisor of the following groups: AutoClaim1</a></div>
      <h4 class="H2_-_Heading_2"><a name="16507979">Activity Validation Rules</a></h4>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="16885284">Use to provide validation for </a><span class="cv_-_computer_voice">Activity</span> objects. For example, in the following rule:</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16885997">If you have an activity of type Claim Acceptance with a status of Complete</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16886008">And, the associated workers’comp claim has a Compensable status of either </a><span class="cv_-_computer_voice">null</span> or Pending</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="16886012">Then, do the following:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16885836">Do not close the activity</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16885915">Display the following message: </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="LP2_-_List_Para_002c_Level_2" style="color: #000000; font-style: italic; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="e_-_emphasis"><a name="16886025">Prior to completing the activity, {0}, please change the Compensability status to either Accepted or Denied</a></span></div>
      <h6 class="HS_-_Head_Sub"><a name="16885429">Condition</a></h6>
      <PRE class="CF_-_Code_First_Line"><a name="16885455">return activity.ActivityPattern.Code == "claim_acceptance" </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="16885456">and (activity.Claim.ClaimWorkComp.Compensable == null </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="16885506">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or activity.Claim.ClaimWorkComp.Compensable == "pending") </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="16885430">and activity.Status == "complete"</a></PRE>
      <h6 class="HS_-_Head_Sub"><a name="16885432">Action</a></h6>
      <PRE class="CF_-_Code_First_Line"><a name="16885474">var myMessage = displaykey.Rules.Validation.Activity.Compensable.Status(activity.Subject)</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="16885433">activity.reject("external", myMessage, null, null)</a></PRE>
      <h4 class="H2_-_Heading_2"><a name="16507993">Claim Closed Validation Rules</a></h4>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="16507994">The Claim Closed Validation rules execute any time that a claim is closed and after claim validation and preupdate rules execute, but before ClaimCenter commits data to the database:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16853787">The Claim Closed Validation rules execute before ClaimCenter inserts a new or updated entity into the database.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16853689">The Claim Closed Validation rules execute before ClaimCenter executes the Claim Closed rules.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16853841">The Claim Closed Validation rules do not execute if validation rules deem the entity invalid. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="16507997">Use these rules to raise validation errors or warnings if ClaimCenter could not close the claim for some reason. In the following example, the rule prevents claim closure if the claim has open activities associated with it.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="16507998">Condition</a></h6>
      <PRE class="CF_-_Code_First_Line"><a name="16507999">return exists( activity in claim.Activities where activity.Status == "open" and</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="16508000">&nbsp;&nbsp;activity.ActivityPattern != null )</a></PRE>
      <h6 class="HS_-_Head_Sub"><a name="16508001">Action</a></h6>
      <div class="CS_-_Code_Single_Line"><a name="16508002">claim.reject("newloss", displaykey.Rules.Validation.CloseExposure.CloseAllOpenActivities, null, null)</a></div>
      <div class="B_-_Body"><a name="16884455">In the base configuration, the display key contains the following string:</a></div>
      <div class="LP_-_List_Para" style="color: #000000; font-style: italic; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="e_-_emphasis"><a name="16884521">This claim has open activities. To close the claim, you must first complete or skip all open activities. Please complete or skip these activities before closing the claim.</a></span></div>
      <h4 class="H2_-_Heading_2"><a name="16508004">Claim Reopened Validation Rules</a></h4>
      <div class="B_-_Body"><a name="16508005">The Claim Reopened Validation rules execute any time that a claim is reopened and after claim validation rules execute, but before ClaimCenter commits the data commits to the database:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16508006">The Claim Reopened Validation rules execute before ClaimCenter inserts a new entity or updated entity into the database.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16853866">The Claim Reopened Validation rules execute before ClaimCenter executes the Claim Reopened rules.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16508007">The Claim Reopened Validation rules do not execute if validation rules deem the entity invalid. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="16884550">Use to raise validation errors or warnings if ClaimCenter cannot reopen a claim for some reason. This rule set is empty in the base ClaimCenter configuration.</a></div>
      <div class="B_-_Body"><a name="16884648">In the following example, the rule logs the fact that the claim has been reopened.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="16508009">Condition</a></h6>
      <div class="CS_-_Code_Single_Line"><a name="16508010">return true</a></div>
      <h6 class="HS_-_Head_Sub"><a name="16508011">Action</a></h6>
      <PRE class="CF_-_Code_First_Line"><a name="16508012">gw.api.util.Logger.logInfo( "Log Rule Info - " + actions.getRuleSet() + " Rule Set - "  </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="16508013">&nbsp;&nbsp;+ actions.getRule() + " Rule")</a></PRE>
      <h4 class="H2_-_Heading_2"><a name="16508014">Claim Validation Rules</a></h4>
      <div class="B_-_Body"><a name="16508015">Use the claim validation rules to ensure that claims data stored in ClaimCenter is sufficient and valid for downstream processing. In the following example, the rule verifies that the chosen policy type is valid for the kind of loss being reported </a></div>
      <h6 class="HS_-_Head_Sub"><a name="16508016">Condition</a></h6>
      <div class="CS_-_Code_Single_Line"><a name="16508017">return ( claim.LossType=="WC" ) and ( claim.Policy.PolicyType != "CommercialPackage" )</a></div>
      <h6 class="HS_-_Head_Sub"><a name="16508018">Action</a></h6>
      <div class="CS_-_Code_Single_Line"><a name="16508019">claim.reject( "newloss", "Invalid policy type for this type of loss", null, null  )</a></div>
      <h4 class="H2_-_Heading_2"><a name="16508021">Contact Validation Rules</a></h4>
      <div class="B_-_Body"><a name="16853919">Use the contact validation rules to ensure that contacts data stored is sufficient and valid for downstream processing. In the base configuration, this rule set is empty.</a></div>
      <h4 class="H2_-_Heading_2"><a name="16853912">Exposure Closed Validation Rules</a></h4>
      <div class="B_-_Body"><a name="16508024">The Exposure Closed Validation rules execute any time that an exposure is closed and after exposure validation rules execute, but before ClaimCenter commits the data to the database:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16854022">The Exposure Closed Validation rules execute before ClaimCenter inserts a new entity or updated entity into the database.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16854023">The Exposure Closed Validation rules execute before ClaimCenter executes the Exposure Closed rules.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16854024">The Exposure Closed Validation rules do not execute if validation rules deem the entity invalid. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="16854013">Use to raise validation errors or warnings if ClaimCenter must not close an exposure for some reason. In the following example, the rule prevents closure of an exposure if the exposure has open activities.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="16508026">Condition</a></h6>
      <PRE class="CF_-_Code_First_Line"><a name="16854134">return exists(activity in exposure.Claim.Activities where (activity.Exposure == exposure</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="16854136">&nbsp;&nbsp;&nbsp;&nbsp;and activity.Status == "open" </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="16854137">&nbsp;&nbsp;&nbsp;&nbsp;and activity.ActivityPattern != null </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="17003523">&nbsp;&nbsp;&nbsp;&nbsp;and not activity.ActivityPattern.ClosedClaimAvlble)</a></PRE>
      <h6 class="HS_-_Head_Sub"><a name="17003524">Action</a></h6>
      <div class="CS_-_Code_Single_Line"><a name="17003525">exposure.reject("newloss", displaykey.Rules.Validation.Exposure.CompleteOpenActivities, null, null)</a></div>
      <h4 class="H2_-_Heading_2"><a name="16508035">Exposure Reopened Validation Rules</a></h4>
      <div class="B_-_Body"><a name="16854251">The Exposure Reopened Validation rules execute any time that an exposure is reopened and after exposure validation rules execute, but before ClaimCenter commits the data to the database:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16854252">The Exposure Reopened Validation rules execute before ClaimCenter inserts a new entity or updated entity into the database.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16854253">The Exposure Reopened Validation rules execute before ClaimCenter executes the Exposure Reopened rules.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16854254">The Exposure Reopened Validation rules do not execute if validation rules deem the entity invalid. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="16854239">Use to raise validation errors or warnings if ClaimCenter cannot reopen an exposure for some reason. In the following example, the rule does not permit reopening an exposure if the associated claim is closed.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="16508040">Condition</a></h6>
      <div class="CS_-_Code_Single_Line"><a name="16508041">return exposure.Claim.State&lt;&gt;"open"</a></div>
      <h6 class="HS_-_Head_Sub"><a name="16508042">Action</a></h6>
      <div class="CS_-_Code_Single_Line"><a name="16508043">exposure.reject("newloss", displaykey.Rules.Validation.ReopenExposure.OpenClaimRequired, null, null)</a></div>
      <div class="B_-_Body"><a name="16884790">In the base configuration, the display key contains the following string:</a></div>
      <div class="LP_-_List_Para" style="color: #000000; font-style: normal; font-variant: normal; font-weight: bold; margin-bottom: 2.0pt; margin-top: 2.0pt; text-transform: none; vertical-align: baseline"><span class="ui_-_UI_element"><a name="16884791">You can reopen an exposure only for an open claim.</a></span></div>
      <h4 class="H2_-_Heading_2"><a name="16884793">Exposure Validation Rules</a></h4>
      <div class="B_-_Body"><a name="16508046">Use the Exposure Validation rules to ensure that exposure data stored in ClaimCenter is sufficient and valid for downstream processing.</a></div>
      <h4 class="H2_-_Heading_2"><a name="16508055">Group Validation Rules</a></h4>
      <div class="B_-_Body"><a name="16508056">ClaimCenter runs the Group Validation (and Group Preupdate) rules upon a save of the Group entity. Any exceptions found during validation cause the bounding database transaction to roll back, thus effectively vetoing the update. In the base configuration, this rule set is empty.</a></div>
      <div class="B_-_Body"><a name="16884864">Guidewire recommends that you use the </a><span class="e_-_emphasis">LoadSave</span> validation level for rules pertaining to validation for Users and Groups.</div>
      <h4 class="H2_-_Heading_2"><a name="16508064">Matter Closed Validation Rules</a></h4>
      <div class="B_-_Body"><a name="16854453">The Matter Closed Validation rules execute any time that a matter is closed and after matter validation rules execute, but before ClaimCenter commits the data to the database:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16854454">The Matter Closed Validation rules execute before ClaimCenter inserts a new or updated entity into the database.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16854455">The Matter Closed Validation rules execute before ClaimCenter executes the Matter Closed rules.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16854456">The Matter Closed Validation rules do not execute if validation rules deem the entity invalid. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="16854420">Use to raise validation errors or warnings if ClaimCenter cannot close a matter for some reason. </a></div>
      <h4 class="H2_-_Heading_2"><a name="16508068">Matter Reopened Validation Rules</a></h4>
      <div class="B_-_Body"><a name="16854382">The Matter Reopened Validation rules execute any time that a matter is reopened and after matter validation rules execute, but before ClaimCenter commits the data to the database:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16854383">The Matter Reopened Validation rules execute before ClaimCenter inserts a new or updated entity into the database.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16854384">The Matter Reopened Validation rules execute before ClaimCenter executes the Matter Reopened rules.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="16854385">The Matter Reopened Validation rules do not execute if validation rules deem the entity invalid. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="16854360">Use to raise validation errors or warnings if ClaimCenter cannot reopen a matter for some reason. </a></div>
      <h4 class="H2_-_Heading_2"><a name="16508072">Matter Validation Rules</a></h4>
      <div class="B_-_Body"><a name="16508073">Use to ensure that matter data stored in ClaimCenter is sufficient and valid for downstream processing. ClaimCenter does not enforce validation levels on Matter objects, meaning the Matter Validation rule set will always fire, regardless of the validation level.</a></div>
      <div class="B_-_Body"><a name="16884933">In the base configuration, this rule set is empty.</a></div>
      <h4 class="H2_-_Heading_2"><a name="16508074">Policy Validation Rules</a></h4>
      <div class="B_-_Body"><a name="16508075">Use to ensure that policy data stored in ClaimCenter is sufficient and valid for downstream processing. ClaimCenter does not enforce validation levels on Policy objects, meaning the Policy Validation Rule Set always fire, regardless of the validation level.</a></div>
      <div class="B_-_Body"><a name="16508076">In the following example, the rule raises a warning if the endorsement effective date is earlier than the policy effective date. It also raises a warning if the endorsement expiration date is later than the policy expiration date.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="16508077">Condition</a></h6>
      <PRE class="CF_-_Code_First_Line"><a name="16508078">return exists(end in policy.Endorsements where (end.EffectiveDate &lt; policy.EffectiveDate) or</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="16508079">&nbsp;&nbsp;(end.ExpirationDate &gt; policy.ExpirationDate) )</a></PRE>
      <h6 class="HS_-_Head_Sub"><a name="16508080">Action</a></h6>
      <PRE class="CF_-_Code_First_Line"><a name="16508081">policy.reject( null, null, "loadsave", "You are adding an endorsement whose date range is not </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="16508082">&nbsp;&nbsp;entirely within the policy date range." )</a></PRE>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="16854484">As always, Guidewire recommends that you use display keys, rather than fixed strings for error or warning messages.</a></div>
      <div class="TBD_-_To_Be_Done">
        <span class="tbd_-_to_be_done">TBD: </span><a name="17020350">&nbsp;</a></div>
      <h4 class="H2_-_Heading_2"><a name="17034162">Service Request Validation Rule Set</a></h4>
      <div class="B_-_Body"><a name="17036257">Use to ensure that service request data is valid for downstream processing. ClaimCenter does not enforce validation levels on </a><span class="cv_-_computer_voice">ServiceRequest</span> objects. Errors will cause validation to fail, regardless of the validation level.</div>
      <div class="B_-_Body"><a name="17036258">The following two validations rules are included in the base configuration. You can expand or edit these rules, as needed.</a></div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="17034580">Check Invoice Currency</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="17034894">This rule raises a warning if the currency of the service request invoice does not match the currency of the associated check.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="17034594">Condition</a></h6>
      <PRE class="CF_-_Code_First_Line"><a name="17034596">return true</a></PRE>
      <h6 class="HS_-_Head_Sub"><a name="17034600">Action</a></h6>
      <PRE class="CF_-_Code_First_Line"><a name="17034602">for(sri in serviceRequest.Invoices) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034743">if(!sri.HasConsistentCheckCurrency) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034604">&nbsp;&nbsp;serviceRequest.rejectField("Currency", "loadsave",</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034793">&nbsp;&nbsp;&nbsp;&nbsp;displaykey.Rules.Validation.ServiceRequest.InvalidInvoice(sri.ReferenceNumber ?: "", </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034806">&nbsp;&nbsp;&nbsp;&nbsp;serviceRequest.ServiceRequestNumber), null, null)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034794">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="17034325">}</a></PRE>
      <div class="B_-_Body"><a name="17035466">In the base configuration, this currency compatibility check is also done for checks in the transaction validation rule set. The constraint is enforced on both sides, by service requests and checks, in case only one of the other validation rules is running during a commit.</a></div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="17034576">Check Service Request History</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="17034959">The following rule raises an error if the data in the service request history is not consistent.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="17034441">Condition</a></h6>
      <PRE class="CF_-_Code_First_Line"><a name="17034351">return true</a></PRE>
      <h6 class="HS_-_Head_Sub"><a name="17034471">Action</a></h6>
      <PRE class="CF_-_Code_First_Line"><a name="17034473">var changedFields = ServiceRequestChangePropertySet.getAll()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034474">var currentHistoryValueByProperty = new HashMap&lt;IEntityPropertyInfo, Object&gt;()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034475">for(srChange in serviceRequest.OrderedHistory index i) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034476">&nbsp;&nbsp;for(changeFieldSet in changedFields) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034477">&nbsp;&nbsp;&nbsp;&nbsp;var fieldChanged = srChange.getFieldValue(changeFieldSet.valueChangedChangeProp) as boolean</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034478">&nbsp;&nbsp;&nbsp;&nbsp;// The change indicates that this field was modified, we will validate that it actually was.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034479">&nbsp;&nbsp;&nbsp;&nbsp;if(fieldChanged) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034480">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// We don't validate the first change, since it records all initial values as changes.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034481">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(i != 0) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034482">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Check to make sure the field actually changed.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034483">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(currentHistoryValueByProperty[changeFieldSet.newValueChangeProp] == srChange.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17035130">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getFieldValue(changeFieldSet.newValueChangeProp)) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034484">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;serviceRequest.rejectSubField(srChange, changeFieldSet.newValueChangeProp.Name, "loadsave",</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17035203">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;displaykey.Rules.Validation.ServiceRequest.FalseChange(changeFieldSet.serviceRequestProp.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17035210">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DisplayName), null, null)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034486">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034487">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034488">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//Store what the value changed to.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034489">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentHistoryValueByProperty[changeFieldSet.newValueChangeProp] = </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17035357">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;srChange.getFieldValue(changeFieldSet.newValueChangeProp)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034490">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034491">&nbsp;&nbsp;&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034492">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034493">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034494">for(changeFieldSet in changedFields) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034495">&nbsp;&nbsp;if(currentHistoryValueByProperty[changeFieldSet.newValueChangeProp] !=</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17035389">&nbsp;&nbsp;&nbsp;&nbsp;serviceRequest.getFieldValue(changeFieldSet.serviceRequestProp)) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034496">&nbsp;&nbsp;&nbsp;&nbsp;//The latest change value does not match the ServiceRequest’s current value.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034497">&nbsp;&nbsp;&nbsp;&nbsp;serviceRequest.rejectField(changeFieldSet.serviceRequestProp as String, "loadsave",</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034498">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;displaykey.Rules.Validation.ServiceRequest.MissingChange(changeFieldSet.serviceRequestProp.</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17035434">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Display Name), null, null)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="17034499">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="17034458">}</a></PRE>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="17034352">As always, Guidewire recommends that you use display keys, rather than fixed strings for error or warning messages.</a></div>
      <h4 class="H2_-_Heading_2"><a name="17034354">Transaction Set Validation Rule Set</a></h4>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="16508088">See </a><a href="javascript:WWHClickedPopup('rules', 'transaction_validation.17.1.html#1014525', '');" title="Transaction Set Validation">“Transaction Set Validation”</a> for a discussion of the transaction-related validation rules. </div>
      <div class="B_-_Body"><a name="16508089">ClaimCenter runs the Transaction Set Validation rules any time that a </a><span class="cv_-_computer_voice">TransactionSet</span> is saved. ClaimCenter does not enforce validation levels on <span class="cv_-_computer_voice">Transaction</span> objects, so the Transaction Set Validation rule set always fires, regardless of the validation level.</div>
      <div class="BKN_-_Body_002c_Keep_Next"><a name="16508090">In the following example, the rule rejects attempts to make payments on closed claims.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="16854512">Condition</a></h6>
      <div class="CS_-_Code_Single_Line"><a name="16854513">return transactionSet.Claim.isClosed() and transactionSet.Subtype=="checkset"</a></div>
      <h6 class="HS_-_Head_Sub"><a name="16854514">Action</a></h6>
      <PRE class="CF_-_Code_First_Line"><a name="16854515">transactionSet.reject( "payment", "You cannot make payments for closed claims. To proceed, </a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="16508095">&nbsp;&nbsp;cancel this payment and reopen the claim.", null, null )</a></PRE>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="16885173">As always, Guidewire recommends that you use display keys, rather than fixed strings for error or warning messages.</a></div>
      <h4 class="H2_-_Heading_2"><a name="16508096">User Validation Rules</a></h4>
      <div class="B_-_Body"><a name="16508097">ClaimCenter runs the User Validation and User Preupdate rules on a save of the User entity. Any exceptions found during validation cause the bounding database transaction to roll back, thus effectively vetoing the update.</a></div>
      <div class="B_-_Body"><a name="16885207">Guidewire recommends that you use the LoadSave validation level for rules pertaining to validation for users and groups.</a></div>
      <div class="B_-_Body"><a name="16885216">In the base configuration, this rule set is empty.</a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>